<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 13.0.0"/>
    <title>src.simstock API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent }nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .pdoc-alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:1rem center;margin-bottom:1rem;}.pdoc .pdoc-alert > *:last-child{margin-bottom:0;}.pdoc .pdoc-alert-note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--code);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../src.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;src</a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>

        <h2>Contents</h2>
        <ul>
  <li><a href="#introduction">Introduction</a></li>
  <li><a href="#basic-usage">Basic usage</a></li>
  <li><a href="#installation-pending">Installation (pending)</a></li>
  <li><a href="#advanced-usage">Advanced usage</a></li>
  <li><a href="#dev-install">Dev install</a></li>
</ul>



        <h2>API Documentation</h2>
            <ul class="memberlist">
            <li>
                    <a class="class" href="#SimstockDataframe">SimstockDataframe</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#SimstockDataframe.__init__">SimstockDataframe</a>
                        </li>
                        <li>
                                <a class="function" href="#SimstockDataframe.orientate_polygons">orientate_polygons</a>
                        </li>
                        <li>
                                <a class="function" href="#SimstockDataframe.remove_duplicate_coords">remove_duplicate_coords</a>
                        </li>
                        <li>
                                <a class="function" href="#SimstockDataframe.polygon_topology">polygon_topology</a>
                        </li>
                        <li>
                                <a class="function" href="#SimstockDataframe.polygon_tolerance">polygon_tolerance</a>
                        </li>
                        <li>
                                <a class="function" href="#SimstockDataframe.polygon_simplification">polygon_simplification</a>
                        </li>
                        <li>
                                <a class="function" href="#SimstockDataframe.collinear_exterior">collinear_exterior</a>
                        </li>
                        <li>
                                <a class="function" href="#SimstockDataframe.preprocessing">preprocessing</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="function" href="#read_csv">read_csv</a>
            </li>
            <li>
                    <a class="function" href="#read_parquet">read_parquet</a>
            </li>
            <li>
                    <a class="function" href="#read_json">read_json</a>
            </li>
            <li>
                    <a class="function" href="#to_csv">to_csv</a>
            </li>
            <li>
                    <a class="function" href="#to_parquet">to_parquet</a>
            </li>
            <li>
                    <a class="function" href="#to_json">to_json</a>
            </li>
            <li>
                    <a class="class" href="#IDFcreator">IDFcreator</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#IDFcreator.__init__">IDFcreator</a>
                        </li>
                        <li>
                                <a class="function" href="#IDFcreator.get_df">get_df</a>
                        </li>
                        <li>
                                <a class="function" href="#IDFcreator.missing_columns">missing_columns</a>
                        </li>
                        <li>
                                <a class="function" href="#IDFcreator.move_towards_origin">move_towards_origin</a>
                        </li>
                        <li>
                                <a class="function" href="#IDFcreator.create_shading_objects">create_shading_objects</a>
                        </li>
                        <li>
                                <a class="function" href="#IDFcreator.create_thermal_zones">create_thermal_zones</a>
                        </li>
                        <li>
                                <a class="function" href="#IDFcreator.create_load_systems">create_load_systems</a>
                        </li>
                        <li>
                                <a class="function" href="#IDFcreator.save_to_file">save_to_file</a>
                        </li>
                        <li>
                                <a class="function" href="#IDFcreator.create_idf_file">create_idf_file</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="function" href="#create_idf">create_idf</a>
            </li>
            <li>
                    <a class="function" href="#plot">plot</a>
            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
<a href="./../src.html">src</a><wbr>.simstock    </h1>

                        <div class="docstring"><p>Package for creating <code>EnergyPlus</code> input files (IDF files) from geographic data. </p>

<h2 id="introduction">Introduction</h2>

<p><code>Simstock</code> is a project to allow easy data passing and processing to <code>EnergyPlus</code>. The package stores input data internally as a <code>SimstockDataFrame</code>. The package can perform various prepossing actions on this data, before outputting an IDF file for <code>EnergyPlus</code> simulations.</p>

<p>Documentation is available at <a href="x">placeholder.com</a>
(current release) and
<a href="x">Read the Docs</a>
(release and development versions).</p>

<p>This package is also available as a QGIS plugin. See <a href="x">placeholder.com</a> plugin installation and usage details. </p>

<h2 id="basic-usage">Basic usage</h2>

<p>Given a file <code>data.csv</code> containing <code>osgb</code> and <code>polygon</code> data, <code>Simstock</code> can be used to create an <code>IDF</code> file as follows:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">simstock</span> <span class="k">as</span> <span class="nn">sim</span>
<span class="gp">&gt;&gt;&gt; </span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Read in data and preprocess</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sdf</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;data.csv&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sdf</span><span class="o">.</span><span class="n">preprocessing</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Create IDF file</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sim</span><span class="o">.</span><span class="n">create_idf</span><span class="p">(</span><span class="n">sdf</span><span class="p">,</span> <span class="s2">&quot;sample.idf&quot;</span><span class="p">)</span>
</code></pre>
</div>

<p>This will create an <code>IDF</code> file using some default parameters and preprocessing techniques. For a finer grained control of the proprocessing and <code>IDF</code> creation, refer to <code>Advanced usage</code> and the API documentation below.</p>

<h2 id="installation-pending">Installation (pending)</h2>

<p><strong>Note: Simstock requires EnergyPlus to be installed.</strong></p>

<p>Simstock can be installed via your favourite package and environment manager:</p>

<p>Using poetry (recommended)</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">poetry</span> <span class="n">add</span> <span class="n">simstock</span>
</code></pre>
</div>

<p>Using pip: </p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">pip</span> <span class="n">install</span> <span class="n">simstock</span> 
</code></pre>
</div>

<p>Using conda:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">conda</span> <span class="n">install</span> <span class="n">simstock</span>
</code></pre>
</div>

<p>Simstock can then be used within a python environment via:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">simstock</span> <span class="k">as</span> <span class="nn">sim</span>
</code></pre>
</div>

<h2 id="advanced-usage">Advanced usage</h2>

<p><code>Simstock</code> allows fine grained control over the preprocessing and <code>IDF</code> file creation steps. Interally, <code>Simstock</code> is based around two objects: </p>

<ul>
<li>The <code><a href="#SimstockDataframe">SimstockDataframe</a></code> class.</li>
<li>The <code><a href="#IDFcreator">IDFcreator</a></code> class.</li>
</ul>

<p>The <code><a href="#SimstockDataframe">SimstockDataframe</a></code> object is responsible for reading in data and preprocessing it. The <code><a href="#IDFcreator">IDFcreator</a></code> object then computes various data needed for an EnergyPlus run. This data is then stored as an <code>IDF</code> file or an <code>idf</code> object for further use within Python. See the following code snippet as an example:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">simstock</span> <span class="k">as</span> <span class="nn">sim</span>
<span class="gp">&gt;&gt;&gt; </span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Read in data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sdf</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;data.csv&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Ensure exteriors and interiors are oriented correctly</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sdf</span><span class="o">.</span><span class="n">orientate_polygons</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Remove duplicate coordinates from polygons</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sdf</span><span class="o">.</span><span class="n">remove_duplicate_coords</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Check for polygons intersecting each other</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sdf</span><span class="o">.</span><span class="n">polygon_topology</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Assess which polygons need simplifying</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sdf</span><span class="o">.</span><span class="n">polygon_tolerace</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Simplify relevant polygons</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sdf</span><span class="o">.</span><span class="n">polygon_simplification</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Check again that polygons are not intersecting each other</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sdf</span><span class="o">.</span><span class="n">polygon_topology</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Remove collinear points, determine exterior surfaces coordinates</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sdf</span><span class="o">.</span><span class="n">collinear_exterior</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Final check that nothing is interecting after the above processing</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># It pays to repeatedly check this</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sdf</span><span class="o">.</span><span class="n">ploygon_topology</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># We now have proprocessed data ready to be turned into an IDF file</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># To turn it into an IDF file, we can either call create_idf,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># or instantiate an IDFcreator object for finer grained control:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ob</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">IDFcreator</span><span class="p">(</span><span class="n">sdf</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Move all objects towards origin</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ob</span><span class="o">.</span><span class="n">move_towards_origin</span><span class="p">(</span><span class="o">**</span><span class="n">idfkwargs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Create shading objects</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ob</span><span class="o">.</span><span class="n">create_shading_objects</span><span class="p">(</span><span class="o">**</span><span class="n">idfkwargs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Create thermal zones based on floor number</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ob</span><span class="o">.</span><span class="n">create_thermal_zones</span><span class="p">(</span><span class="o">**</span><span class="n">idfkwargs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Compute</span> <span class="n">ideal</span> <span class="n">load</span> <span class="n">systems</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ob</span><span class="o">.</span><span class="n">create_load_systems</span><span class="p">(</span><span class="o">**</span><span class="n">idfkwargs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># All relevant data for an E+ run have now been created</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># The results can be saved to a file:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ob</span><span class="o">.</span><span class="n">save_to_file</span><span class="p">(</span><span class="s2">&quot;output.idf&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Or kept as an eppy idf object for further processing:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">idf</span> <span class="o">=</span> <span class="n">ob</span><span class="o">.</span><span class="n">idf</span>
</code></pre>
</div>

<p>In all the obove function calls, the user can specify ket word arguments <code>kwargs</code> and <code>idfkwargs</code>. Refer to the detailed API documentation for a full list of arguments.</p>

<h2 id="dev-install">Dev install</h2>

<p>To install a developer's verion of Simstock, follow these steps:</p>

<ul>
<li>Install <code>poetry</code></li>
<li>Clone the simstock repository from <a href="x">github</a></li>
<li>In the base of the Simstock-Model repository, run <code>poetry install</code></li>
</ul>

<p>To then launch python in the command line, just run:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="go">~$ poetry run python</span>
</code></pre>
</div>
</div>

                        <input id="mod-simstock-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-simstock-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">  1</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">  2</span></a>
</span><span id="L-3"><a href="#L-3"><span class="linenos">  3</span></a><span class="sd">Package for creating ``EnergyPlus`` input files (IDF files) from geographic data. </span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">  4</span></a>
</span><span id="L-5"><a href="#L-5"><span class="linenos">  5</span></a><span class="sd">Introduction</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">  6</span></a><span class="sd">------------</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos">  7</span></a>
</span><span id="L-8"><a href="#L-8"><span class="linenos">  8</span></a><span class="sd">``Simstock`` is a project to allow easy data passing and processing to ``EnergyPlus``. The package stores input data internally as a ``SimstockDataFrame``. The package can perform various prepossing actions on this data, before outputting an IDF file for ``EnergyPlus`` simulations.</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos">  9</span></a>
</span><span id="L-10"><a href="#L-10"><span class="linenos"> 10</span></a>
</span><span id="L-11"><a href="#L-11"><span class="linenos"> 11</span></a><span class="sd">Documentation is available at [placeholder.com](x)</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos"> 12</span></a><span class="sd">(current release) and</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos"> 13</span></a><span class="sd">[Read the Docs](x)</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos"> 14</span></a><span class="sd">(release and development versions).</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos"> 15</span></a>
</span><span id="L-16"><a href="#L-16"><span class="linenos"> 16</span></a><span class="sd">This package is also available as a QGIS plugin. See [placeholder.com](x) plugin installation and usage details. </span>
</span><span id="L-17"><a href="#L-17"><span class="linenos"> 17</span></a>
</span><span id="L-18"><a href="#L-18"><span class="linenos"> 18</span></a><span class="sd">Basic usage</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos"> 19</span></a><span class="sd">-----------</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos"> 20</span></a>
</span><span id="L-21"><a href="#L-21"><span class="linenos"> 21</span></a><span class="sd">Given a file ``data.csv`` containing ``osgb`` and ``polygon`` data, ``Simstock`` can be used to create an ``IDF`` file as follows:</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos"> 22</span></a>
</span><span id="L-23"><a href="#L-23"><span class="linenos"> 23</span></a><span class="sd">&gt;&gt;&gt; import simstock as sim</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos"> 24</span></a><span class="sd">&gt;&gt;&gt; </span>
</span><span id="L-25"><a href="#L-25"><span class="linenos"> 25</span></a><span class="sd">&gt;&gt;&gt; # Read in data and preprocess</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos"> 26</span></a><span class="sd">&gt;&gt;&gt; sdf = sim.read_csv(&quot;data.csv&quot;)</span>
</span><span id="L-27"><a href="#L-27"><span class="linenos"> 27</span></a><span class="sd">&gt;&gt;&gt; sdf.preprocessing()</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos"> 28</span></a><span class="sd">&gt;&gt;&gt; </span>
</span><span id="L-29"><a href="#L-29"><span class="linenos"> 29</span></a><span class="sd">&gt;&gt;&gt; # Create IDF file</span>
</span><span id="L-30"><a href="#L-30"><span class="linenos"> 30</span></a><span class="sd">&gt;&gt;&gt; sim.create_idf(sdf, &quot;sample.idf&quot;)</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos"> 31</span></a>
</span><span id="L-32"><a href="#L-32"><span class="linenos"> 32</span></a><span class="sd">This will create an ``IDF`` file using some default parameters and preprocessing techniques. For a finer grained control of the proprocessing and ``IDF`` creation, refer to ``Advanced usage`` and the API documentation below.</span>
</span><span id="L-33"><a href="#L-33"><span class="linenos"> 33</span></a>
</span><span id="L-34"><a href="#L-34"><span class="linenos"> 34</span></a>
</span><span id="L-35"><a href="#L-35"><span class="linenos"> 35</span></a><span class="sd">Installation (pending)</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos"> 36</span></a><span class="sd">----------------------</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos"> 37</span></a>
</span><span id="L-38"><a href="#L-38"><span class="linenos"> 38</span></a><span class="sd">**Note: Simstock requires EnergyPlus to be installed.**</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos"> 39</span></a>
</span><span id="L-40"><a href="#L-40"><span class="linenos"> 40</span></a><span class="sd">Simstock can be installed via your favourite package and environment manager:</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos"> 41</span></a>
</span><span id="L-42"><a href="#L-42"><span class="linenos"> 42</span></a><span class="sd">Using poetry (recommended)</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos"> 43</span></a><span class="sd">&gt;&gt;&gt; poetry add simstock</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos"> 44</span></a>
</span><span id="L-45"><a href="#L-45"><span class="linenos"> 45</span></a><span class="sd">Using pip: </span>
</span><span id="L-46"><a href="#L-46"><span class="linenos"> 46</span></a><span class="sd">&gt;&gt;&gt; pip install simstock </span>
</span><span id="L-47"><a href="#L-47"><span class="linenos"> 47</span></a>
</span><span id="L-48"><a href="#L-48"><span class="linenos"> 48</span></a><span class="sd">Using conda:</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos"> 49</span></a><span class="sd">&gt;&gt;&gt; conda install simstock</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos"> 50</span></a>
</span><span id="L-51"><a href="#L-51"><span class="linenos"> 51</span></a>
</span><span id="L-52"><a href="#L-52"><span class="linenos"> 52</span></a><span class="sd">Simstock can then be used within a python environment via:</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos"> 53</span></a><span class="sd">&gt;&gt;&gt; import simstock as sim</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos"> 54</span></a>
</span><span id="L-55"><a href="#L-55"><span class="linenos"> 55</span></a>
</span><span id="L-56"><a href="#L-56"><span class="linenos"> 56</span></a>
</span><span id="L-57"><a href="#L-57"><span class="linenos"> 57</span></a><span class="sd">Advanced usage</span>
</span><span id="L-58"><a href="#L-58"><span class="linenos"> 58</span></a><span class="sd">--------------</span>
</span><span id="L-59"><a href="#L-59"><span class="linenos"> 59</span></a>
</span><span id="L-60"><a href="#L-60"><span class="linenos"> 60</span></a><span class="sd">``Simstock`` allows fine grained control over the preprocessing and ``IDF`` file creation steps. Interally, ``Simstock`` is based around two objects: </span>
</span><span id="L-61"><a href="#L-61"><span class="linenos"> 61</span></a><span class="sd">- The ``SimstockDataframe`` class.</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos"> 62</span></a><span class="sd">- The ``IDFcreator`` class.</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos"> 63</span></a>
</span><span id="L-64"><a href="#L-64"><span class="linenos"> 64</span></a><span class="sd">The ``SimstockDataframe`` object is responsible for reading in data and preprocessing it. The ``IDFcreator`` object then computes various data needed for an EnergyPlus run. This data is then stored as an ``IDF`` file or an ``idf`` object for further use within Python. See the following code snippet as an example:</span>
</span><span id="L-65"><a href="#L-65"><span class="linenos"> 65</span></a>
</span><span id="L-66"><a href="#L-66"><span class="linenos"> 66</span></a><span class="sd">&gt;&gt;&gt; import simstock as sim</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos"> 67</span></a><span class="sd">&gt;&gt;&gt; </span>
</span><span id="L-68"><a href="#L-68"><span class="linenos"> 68</span></a><span class="sd">&gt;&gt;&gt; # Read in data</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos"> 69</span></a><span class="sd">&gt;&gt;&gt; sdf = sim.read_csv(&quot;data.csv&quot;)</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos"> 70</span></a><span class="sd">&gt;&gt;&gt; </span>
</span><span id="L-71"><a href="#L-71"><span class="linenos"> 71</span></a><span class="sd">&gt;&gt;&gt; # Ensure exteriors and interiors are oriented correctly</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos"> 72</span></a><span class="sd">&gt;&gt;&gt; sdf.orientate_polygons(**kwargs)</span>
</span><span id="L-73"><a href="#L-73"><span class="linenos"> 73</span></a><span class="sd">&gt;&gt;&gt; </span>
</span><span id="L-74"><a href="#L-74"><span class="linenos"> 74</span></a><span class="sd">&gt;&gt;&gt; # Remove duplicate coordinates from polygons</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos"> 75</span></a><span class="sd">&gt;&gt;&gt; sdf.remove_duplicate_coords(**kwargs)</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos"> 76</span></a><span class="sd">&gt;&gt;&gt; </span>
</span><span id="L-77"><a href="#L-77"><span class="linenos"> 77</span></a><span class="sd">&gt;&gt;&gt; # Check for polygons intersecting each other</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos"> 78</span></a><span class="sd">&gt;&gt;&gt; sdf.polygon_topology(**kwargs)</span>
</span><span id="L-79"><a href="#L-79"><span class="linenos"> 79</span></a><span class="sd">&gt;&gt;&gt; </span>
</span><span id="L-80"><a href="#L-80"><span class="linenos"> 80</span></a><span class="sd">&gt;&gt;&gt; # Assess which polygons need simplifying</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos"> 81</span></a><span class="sd">&gt;&gt;&gt; sdf.polygon_tolerace(**kwargs)</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos"> 82</span></a><span class="sd">&gt;&gt;&gt; </span>
</span><span id="L-83"><a href="#L-83"><span class="linenos"> 83</span></a><span class="sd">&gt;&gt;&gt; # Simplify relevant polygons</span>
</span><span id="L-84"><a href="#L-84"><span class="linenos"> 84</span></a><span class="sd">&gt;&gt;&gt; sdf.polygon_simplification(**kwargs)</span>
</span><span id="L-85"><a href="#L-85"><span class="linenos"> 85</span></a><span class="sd">&gt;&gt;&gt; </span>
</span><span id="L-86"><a href="#L-86"><span class="linenos"> 86</span></a><span class="sd">&gt;&gt;&gt; # Check again that polygons are not intersecting each other</span>
</span><span id="L-87"><a href="#L-87"><span class="linenos"> 87</span></a><span class="sd">&gt;&gt;&gt; sdf.polygon_topology(**kwargs)</span>
</span><span id="L-88"><a href="#L-88"><span class="linenos"> 88</span></a><span class="sd">&gt;&gt;&gt; </span>
</span><span id="L-89"><a href="#L-89"><span class="linenos"> 89</span></a><span class="sd">&gt;&gt;&gt; # Remove collinear points, determine exterior surfaces coordinates</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos"> 90</span></a><span class="sd">&gt;&gt;&gt; sdf.collinear_exterior(**kwargs)</span>
</span><span id="L-91"><a href="#L-91"><span class="linenos"> 91</span></a><span class="sd">&gt;&gt;&gt; </span>
</span><span id="L-92"><a href="#L-92"><span class="linenos"> 92</span></a><span class="sd">&gt;&gt;&gt; # Final check that nothing is interecting after the above processing</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos"> 93</span></a><span class="sd">&gt;&gt;&gt; # It pays to repeatedly check this</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos"> 94</span></a><span class="sd">&gt;&gt;&gt; sdf.ploygon_topology(**kwargs)</span>
</span><span id="L-95"><a href="#L-95"><span class="linenos"> 95</span></a><span class="sd">&gt;&gt;&gt; </span>
</span><span id="L-96"><a href="#L-96"><span class="linenos"> 96</span></a><span class="sd">&gt;&gt;&gt; # We now have proprocessed data ready to be turned into an IDF file</span>
</span><span id="L-97"><a href="#L-97"><span class="linenos"> 97</span></a><span class="sd">&gt;&gt;&gt; # To turn it into an IDF file, we can either call create_idf,</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos"> 98</span></a><span class="sd">&gt;&gt;&gt; # or instantiate an IDFcreator object for finer grained control:</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos"> 99</span></a><span class="sd">&gt;&gt;&gt; ob = sim.IDFcreator(sdf)</span>
</span><span id="L-100"><a href="#L-100"><span class="linenos">100</span></a><span class="sd">&gt;&gt;&gt; </span>
</span><span id="L-101"><a href="#L-101"><span class="linenos">101</span></a><span class="sd">&gt;&gt;&gt; # Move all objects towards origin</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos">102</span></a><span class="sd">&gt;&gt;&gt; ob.move_towards_origin(**idfkwargs)</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos">103</span></a><span class="sd">&gt;&gt;&gt; </span>
</span><span id="L-104"><a href="#L-104"><span class="linenos">104</span></a><span class="sd">&gt;&gt;&gt; # Create shading objects</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos">105</span></a><span class="sd">&gt;&gt;&gt; ob.create_shading_objects(**idfkwargs)</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos">106</span></a><span class="sd">&gt;&gt;&gt; </span>
</span><span id="L-107"><a href="#L-107"><span class="linenos">107</span></a><span class="sd">&gt;&gt;&gt; # Create thermal zones based on floor number</span>
</span><span id="L-108"><a href="#L-108"><span class="linenos">108</span></a><span class="sd">&gt;&gt;&gt; ob.create_thermal_zones(**idfkwargs)</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos">109</span></a><span class="sd">&gt;&gt;&gt; </span>
</span><span id="L-110"><a href="#L-110"><span class="linenos">110</span></a><span class="sd">&gt;&gt;&gt; Compute ideal load systems</span>
</span><span id="L-111"><a href="#L-111"><span class="linenos">111</span></a><span class="sd">&gt;&gt;&gt; ob.create_load_systems(**idfkwargs)</span>
</span><span id="L-112"><a href="#L-112"><span class="linenos">112</span></a><span class="sd">&gt;&gt;&gt; </span>
</span><span id="L-113"><a href="#L-113"><span class="linenos">113</span></a><span class="sd">&gt;&gt;&gt; # All relevant data for an E+ run have now been created</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos">114</span></a><span class="sd">&gt;&gt;&gt; # The results can be saved to a file:</span>
</span><span id="L-115"><a href="#L-115"><span class="linenos">115</span></a><span class="sd">&gt;&gt;&gt; ob.save_to_file(&quot;output.idf&quot;)</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos">116</span></a><span class="sd">&gt;&gt;&gt; # Or kept as an eppy idf object for further processing:</span>
</span><span id="L-117"><a href="#L-117"><span class="linenos">117</span></a><span class="sd">&gt;&gt;&gt; idf = ob.idf</span>
</span><span id="L-118"><a href="#L-118"><span class="linenos">118</span></a>
</span><span id="L-119"><a href="#L-119"><span class="linenos">119</span></a><span class="sd">In all the obove function calls, the user can specify ket word arguments ``kwargs`` and ``idfkwargs``. Refer to the detailed API documentation for a full list of arguments.</span>
</span><span id="L-120"><a href="#L-120"><span class="linenos">120</span></a>
</span><span id="L-121"><a href="#L-121"><span class="linenos">121</span></a>
</span><span id="L-122"><a href="#L-122"><span class="linenos">122</span></a>
</span><span id="L-123"><a href="#L-123"><span class="linenos">123</span></a><span class="sd">Dev install</span>
</span><span id="L-124"><a href="#L-124"><span class="linenos">124</span></a><span class="sd">-----------</span>
</span><span id="L-125"><a href="#L-125"><span class="linenos">125</span></a>
</span><span id="L-126"><a href="#L-126"><span class="linenos">126</span></a><span class="sd">To install a developer&#39;s verion of Simstock, follow these steps:</span>
</span><span id="L-127"><a href="#L-127"><span class="linenos">127</span></a><span class="sd">- Install ``poetry``</span>
</span><span id="L-128"><a href="#L-128"><span class="linenos">128</span></a><span class="sd">- Clone the simstock repository from [github](x)</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos">129</span></a><span class="sd">- In the base of the Simstock-Model repository, run ``poetry install``</span>
</span><span id="L-130"><a href="#L-130"><span class="linenos">130</span></a>
</span><span id="L-131"><a href="#L-131"><span class="linenos">131</span></a><span class="sd">To then launch python in the command line, just run:</span>
</span><span id="L-132"><a href="#L-132"><span class="linenos">132</span></a>
</span><span id="L-133"><a href="#L-133"><span class="linenos">133</span></a><span class="sd">```console</span>
</span><span id="L-134"><a href="#L-134"><span class="linenos">134</span></a><span class="sd">~$ poetry run python</span>
</span><span id="L-135"><a href="#L-135"><span class="linenos">135</span></a><span class="sd">```</span>
</span><span id="L-136"><a href="#L-136"><span class="linenos">136</span></a>
</span><span id="L-137"><a href="#L-137"><span class="linenos">137</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-138"><a href="#L-138"><span class="linenos">138</span></a>
</span><span id="L-139"><a href="#L-139"><span class="linenos">139</span></a><span class="kn">from</span> <span class="nn">simstock.io</span> <span class="kn">import</span> <span class="p">(</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos">140</span></a>    <span class="n">read_csv</span><span class="p">,</span>
</span><span id="L-141"><a href="#L-141"><span class="linenos">141</span></a>    <span class="n">read_parquet</span><span class="p">,</span>
</span><span id="L-142"><a href="#L-142"><span class="linenos">142</span></a>    <span class="n">read_json</span><span class="p">,</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos">143</span></a>    <span class="n">to_csv</span><span class="p">,</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos">144</span></a>    <span class="n">to_parquet</span><span class="p">,</span>
</span><span id="L-145"><a href="#L-145"><span class="linenos">145</span></a>    <span class="n">to_json</span>
</span><span id="L-146"><a href="#L-146"><span class="linenos">146</span></a><span class="p">)</span>
</span><span id="L-147"><a href="#L-147"><span class="linenos">147</span></a><span class="kn">from</span> <span class="nn">simstock.base</span> <span class="kn">import</span> <span class="p">(</span>
</span><span id="L-148"><a href="#L-148"><span class="linenos">148</span></a>    <span class="n">SimstockDataframe</span><span class="p">,</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos">149</span></a>    <span class="n">IDFcreator</span><span class="p">,</span>
</span><span id="L-150"><a href="#L-150"><span class="linenos">150</span></a>    <span class="n">create_idf</span>
</span><span id="L-151"><a href="#L-151"><span class="linenos">151</span></a><span class="p">)</span>
</span><span id="L-152"><a href="#L-152"><span class="linenos">152</span></a><span class="kn">from</span> <span class="nn">simstock.plotting</span> <span class="kn">import</span> <span class="p">(</span>
</span><span id="L-153"><a href="#L-153"><span class="linenos">153</span></a>    <span class="n">plot</span>
</span><span id="L-154"><a href="#L-154"><span class="linenos">154</span></a><span class="p">)</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos">155</span></a>
</span><span id="L-156"><a href="#L-156"><span class="linenos">156</span></a>
</span><span id="L-157"><a href="#L-157"><span class="linenos">157</span></a><span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="L-158"><a href="#L-158"><span class="linenos">158</span></a>    <span class="s2">&quot;SimstockDataframe&quot;</span><span class="p">,</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos">159</span></a>    <span class="s2">&quot;read_csv&quot;</span><span class="p">,</span>
</span><span id="L-160"><a href="#L-160"><span class="linenos">160</span></a>    <span class="s2">&quot;read_parquet&quot;</span><span class="p">,</span>
</span><span id="L-161"><a href="#L-161"><span class="linenos">161</span></a>    <span class="s2">&quot;read_json&quot;</span><span class="p">,</span>
</span><span id="L-162"><a href="#L-162"><span class="linenos">162</span></a>    <span class="s2">&quot;to_csv&quot;</span><span class="p">,</span>
</span><span id="L-163"><a href="#L-163"><span class="linenos">163</span></a>    <span class="s2">&quot;to_parquet&quot;</span><span class="p">,</span>
</span><span id="L-164"><a href="#L-164"><span class="linenos">164</span></a>    <span class="s2">&quot;to_json&quot;</span><span class="p">,</span>
</span><span id="L-165"><a href="#L-165"><span class="linenos">165</span></a>    <span class="s2">&quot;IDFcreator&quot;</span><span class="p">,</span>
</span><span id="L-166"><a href="#L-166"><span class="linenos">166</span></a>    <span class="s2">&quot;create_idf&quot;</span><span class="p">,</span>
</span><span id="L-167"><a href="#L-167"><span class="linenos">167</span></a>    <span class="s2">&quot;plot&quot;</span>
</span><span id="L-168"><a href="#L-168"><span class="linenos">168</span></a>    <span class="p">]</span>
</span></pre></div>


            </section>
                <section id="SimstockDataframe">
                            <input id="SimstockDataframe-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">SimstockDataframe</span>:

                <label class="view-source-button" for="SimstockDataframe-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SimstockDataframe"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SimstockDataframe-30"><a href="#SimstockDataframe-30"><span class="linenos"> 30</span></a><span class="k">class</span> <span class="nc">SimstockDataframe</span><span class="p">:</span>
</span><span id="SimstockDataframe-31"><a href="#SimstockDataframe-31"><span class="linenos"> 31</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SimstockDataframe-32"><a href="#SimstockDataframe-32"><span class="linenos"> 32</span></a><span class="sd">    A ``SimstockDataframe`` is an object used internally by simstock to represent all input data. It behaves the in the same way as a Pandas data frame, but with some key additional methods to process the data for EnergyPlus.</span>
</span><span id="SimstockDataframe-33"><a href="#SimstockDataframe-33"><span class="linenos"> 33</span></a>
</span><span id="SimstockDataframe-34"><a href="#SimstockDataframe-34"><span class="linenos"> 34</span></a><span class="sd">    In order to be a valid ``SimstockDataframe``, there must be one column names ``polygon`` that contains geometric data.</span>
</span><span id="SimstockDataframe-35"><a href="#SimstockDataframe-35"><span class="linenos"> 35</span></a>
</span><span id="SimstockDataframe-36"><a href="#SimstockDataframe-36"><span class="linenos"> 36</span></a><span class="sd">    Additional column names are: </span>
</span><span id="SimstockDataframe-37"><a href="#SimstockDataframe-37"><span class="linenos"> 37</span></a><span class="sd">    - ``osgb``</span>
</span><span id="SimstockDataframe-38"><a href="#SimstockDataframe-38"><span class="linenos"> 38</span></a><span class="sd">    - ``shading``</span>
</span><span id="SimstockDataframe-39"><a href="#SimstockDataframe-39"><span class="linenos"> 39</span></a><span class="sd">    - ``height``</span>
</span><span id="SimstockDataframe-40"><a href="#SimstockDataframe-40"><span class="linenos"> 40</span></a><span class="sd">    - ``wwr``</span>
</span><span id="SimstockDataframe-41"><a href="#SimstockDataframe-41"><span class="linenos"> 41</span></a><span class="sd">    - ``nofloors``</span>
</span><span id="SimstockDataframe-42"><a href="#SimstockDataframe-42"><span class="linenos"> 42</span></a><span class="sd">    - ``construction``</span>
</span><span id="SimstockDataframe-43"><a href="#SimstockDataframe-43"><span class="linenos"> 43</span></a><span class="sd">    - ``interiors``</span>
</span><span id="SimstockDataframe-44"><a href="#SimstockDataframe-44"><span class="linenos"> 44</span></a>
</span><span id="SimstockDataframe-45"><a href="#SimstockDataframe-45"><span class="linenos"> 45</span></a>
</span><span id="SimstockDataframe-46"><a href="#SimstockDataframe-46"><span class="linenos"> 46</span></a><span class="sd">    Parameters</span>
</span><span id="SimstockDataframe-47"><a href="#SimstockDataframe-47"><span class="linenos"> 47</span></a><span class="sd">    ----------</span>
</span><span id="SimstockDataframe-48"><a href="#SimstockDataframe-48"><span class="linenos"> 48</span></a><span class="sd">    ``data : Any``</span>
</span><span id="SimstockDataframe-49"><a href="#SimstockDataframe-49"><span class="linenos"> 49</span></a><span class="sd">        The polygon data together with ``osgb`` data etc.</span>
</span><span id="SimstockDataframe-50"><a href="#SimstockDataframe-50"><span class="linenos"> 50</span></a>
</span><span id="SimstockDataframe-51"><a href="#SimstockDataframe-51"><span class="linenos"> 51</span></a><span class="sd">    ``index : array-like or Index``</span>
</span><span id="SimstockDataframe-52"><a href="#SimstockDataframe-52"><span class="linenos"> 52</span></a><span class="sd">        The index for the SimstockSeries.</span>
</span><span id="SimstockDataframe-53"><a href="#SimstockDataframe-53"><span class="linenos"> 53</span></a>
</span><span id="SimstockDataframe-54"><a href="#SimstockDataframe-54"><span class="linenos"> 54</span></a><span class="sd">    ``tol : float``</span>
</span><span id="SimstockDataframe-55"><a href="#SimstockDataframe-55"><span class="linenos"> 55</span></a><span class="sd">        The tolerance to apply when assessing polygon intersections.</span>
</span><span id="SimstockDataframe-56"><a href="#SimstockDataframe-56"><span class="linenos"> 56</span></a>
</span><span id="SimstockDataframe-57"><a href="#SimstockDataframe-57"><span class="linenos"> 57</span></a><span class="sd">    Usage example</span>
</span><span id="SimstockDataframe-58"><a href="#SimstockDataframe-58"><span class="linenos"> 58</span></a><span class="sd">    -------------</span>
</span><span id="SimstockDataframe-59"><a href="#SimstockDataframe-59"><span class="linenos"> 59</span></a><span class="sd">    &gt;&gt;&gt; import simstock as sim</span>
</span><span id="SimstockDataframe-60"><a href="#SimstockDataframe-60"><span class="linenos"> 60</span></a><span class="sd">    &gt;&gt;&gt; sdf = sim.read_csv(&quot;text.csv&quot;)</span>
</span><span id="SimstockDataframe-61"><a href="#SimstockDataframe-61"><span class="linenos"> 61</span></a><span class="sd">    &gt;&gt;&gt; </span>
</span><span id="SimstockDataframe-62"><a href="#SimstockDataframe-62"><span class="linenos"> 62</span></a><span class="sd">    &gt;&gt;&gt; # Access data in the smae way as a pandas dataframe:</span>
</span><span id="SimstockDataframe-63"><a href="#SimstockDataframe-63"><span class="linenos"> 63</span></a><span class="sd">    &gt;&gt;&gt; print(sdf.columns)</span>
</span><span id="SimstockDataframe-64"><a href="#SimstockDataframe-64"><span class="linenos"> 64</span></a><span class="sd">    Index([&#39;polygon&#39;, &#39;osgb&#39;, &#39;shading&#39;, &#39;height&#39;, &#39;wwr&#39;, &#39;nofloors&#39;,</span>
</span><span id="SimstockDataframe-65"><a href="#SimstockDataframe-65"><span class="linenos"> 65</span></a><span class="sd">       &#39;construction&#39;, &#39;interiors&#39;],</span>
</span><span id="SimstockDataframe-66"><a href="#SimstockDataframe-66"><span class="linenos"> 66</span></a><span class="sd">      dtype=&#39;object&#39;)</span>
</span><span id="SimstockDataframe-67"><a href="#SimstockDataframe-67"><span class="linenos"> 67</span></a><span class="sd">    &gt;&gt;&gt; </span>
</span><span id="SimstockDataframe-68"><a href="#SimstockDataframe-68"><span class="linenos"> 68</span></a><span class="sd">    &gt;&gt;&gt; print(sdf.loc[sdf[&quot;osgb&quot;]==&quot;osgb1000005307038&quot;, &quot;polygon&quot;])</span>
</span><span id="SimstockDataframe-69"><a href="#SimstockDataframe-69"><span class="linenos"> 69</span></a><span class="sd">    POLYGON ((528883.55 186137, 528878.05 186145.5...</span>
</span><span id="SimstockDataframe-70"><a href="#SimstockDataframe-70"><span class="linenos"> 70</span></a><span class="sd">    Name: polygon, dtype: object</span>
</span><span id="SimstockDataframe-71"><a href="#SimstockDataframe-71"><span class="linenos"> 71</span></a><span class="sd">    &gt;&gt;&gt; </span>
</span><span id="SimstockDataframe-72"><a href="#SimstockDataframe-72"><span class="linenos"> 72</span></a><span class="sd">    &gt;&gt;&gt; # Perform preprocessing</span>
</span><span id="SimstockDataframe-73"><a href="#SimstockDataframe-73"><span class="linenos"> 73</span></a><span class="sd">    &gt;&gt;&gt; sdf.preprocessing()</span>
</span><span id="SimstockDataframe-74"><a href="#SimstockDataframe-74"><span class="linenos"> 74</span></a><span class="sd">    </span>
</span><span id="SimstockDataframe-75"><a href="#SimstockDataframe-75"><span class="linenos"> 75</span></a>
</span><span id="SimstockDataframe-76"><a href="#SimstockDataframe-76"><span class="linenos"> 76</span></a><span class="sd">    Attributes</span>
</span><span id="SimstockDataframe-77"><a href="#SimstockDataframe-77"><span class="linenos"> 77</span></a><span class="sd">    ----------</span>
</span><span id="SimstockDataframe-78"><a href="#SimstockDataframe-78"><span class="linenos"> 78</span></a>
</span><span id="SimstockDataframe-79"><a href="#SimstockDataframe-79"><span class="linenos"> 79</span></a><span class="sd">    ``is_ccw : bool or list&lt;bool&gt;``</span>
</span><span id="SimstockDataframe-80"><a href="#SimstockDataframe-80"><span class="linenos"> 80</span></a>
</span><span id="SimstockDataframe-81"><a href="#SimstockDataframe-81"><span class="linenos"> 81</span></a><span class="sd">    Are the geometries counter-clockwise.</span>
</span><span id="SimstockDataframe-82"><a href="#SimstockDataframe-82"><span class="linenos"> 82</span></a><span class="sd">    </span>
</span><span id="SimstockDataframe-83"><a href="#SimstockDataframe-83"><span class="linenos"> 83</span></a><span class="sd">    ``is_exterior_ccw : bool or list&lt;bool&gt;``</span>
</span><span id="SimstockDataframe-84"><a href="#SimstockDataframe-84"><span class="linenos"> 84</span></a>
</span><span id="SimstockDataframe-85"><a href="#SimstockDataframe-85"><span class="linenos"> 85</span></a><span class="sd">    Are the exterior perimeters counter-clockwise.</span>
</span><span id="SimstockDataframe-86"><a href="#SimstockDataframe-86"><span class="linenos"> 86</span></a><span class="sd">    </span>
</span><span id="SimstockDataframe-87"><a href="#SimstockDataframe-87"><span class="linenos"> 87</span></a><span class="sd">    ``is_valid : bool or list&lt;bool&gt;`` </span>
</span><span id="SimstockDataframe-88"><a href="#SimstockDataframe-88"><span class="linenos"> 88</span></a>
</span><span id="SimstockDataframe-89"><a href="#SimstockDataframe-89"><span class="linenos"> 89</span></a><span class="sd">    Are the geometries valid objects.</span>
</span><span id="SimstockDataframe-90"><a href="#SimstockDataframe-90"><span class="linenos"> 90</span></a>
</span><span id="SimstockDataframe-91"><a href="#SimstockDataframe-91"><span class="linenos"> 91</span></a><span class="sd">    ``length : int``</span>
</span><span id="SimstockDataframe-92"><a href="#SimstockDataframe-92"><span class="linenos"> 92</span></a>
</span><span id="SimstockDataframe-93"><a href="#SimstockDataframe-93"><span class="linenos"> 93</span></a><span class="sd">    The length of the data (axis=0).</span>
</span><span id="SimstockDataframe-94"><a href="#SimstockDataframe-94"><span class="linenos"> 94</span></a><span class="sd">    </span>
</span><span id="SimstockDataframe-95"><a href="#SimstockDataframe-95"><span class="linenos"> 95</span></a><span class="sd">    </span>
</span><span id="SimstockDataframe-96"><a href="#SimstockDataframe-96"><span class="linenos"> 96</span></a><span class="sd">    Methods</span>
</span><span id="SimstockDataframe-97"><a href="#SimstockDataframe-97"><span class="linenos"> 97</span></a><span class="sd">    -------</span>
</span><span id="SimstockDataframe-98"><a href="#SimstockDataframe-98"><span class="linenos"> 98</span></a>
</span><span id="SimstockDataframe-99"><a href="#SimstockDataframe-99"><span class="linenos"> 99</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="SimstockDataframe-100"><a href="#SimstockDataframe-100"><span class="linenos">100</span></a>
</span><span id="SimstockDataframe-101"><a href="#SimstockDataframe-101"><span class="linenos">101</span></a>    <span class="n">tol</span> <span class="o">=</span> <span class="mf">0.1</span>
</span><span id="SimstockDataframe-102"><a href="#SimstockDataframe-102"><span class="linenos">102</span></a>
</span><span id="SimstockDataframe-103"><a href="#SimstockDataframe-103"><span class="linenos">103</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputobject</span> <span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SimstockDataframe-104"><a href="#SimstockDataframe-104"><span class="linenos">104</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SimstockDataframe-105"><a href="#SimstockDataframe-105"><span class="linenos">105</span></a><span class="sd">        Initialisation function for SimstockDataframe</span>
</span><span id="SimstockDataframe-106"><a href="#SimstockDataframe-106"><span class="linenos">106</span></a>
</span><span id="SimstockDataframe-107"><a href="#SimstockDataframe-107"><span class="linenos">107</span></a><span class="sd">        Parameters</span>
</span><span id="SimstockDataframe-108"><a href="#SimstockDataframe-108"><span class="linenos">108</span></a><span class="sd">        ----------</span>
</span><span id="SimstockDataframe-109"><a href="#SimstockDataframe-109"><span class="linenos">109</span></a>
</span><span id="SimstockDataframe-110"><a href="#SimstockDataframe-110"><span class="linenos">110</span></a><span class="sd">        ``inputdata : Any``</span>
</span><span id="SimstockDataframe-111"><a href="#SimstockDataframe-111"><span class="linenos">111</span></a>
</span><span id="SimstockDataframe-112"><a href="#SimstockDataframe-112"><span class="linenos">112</span></a><span class="sd">        Can be a dictionary or a Pandas dataframe.</span>
</span><span id="SimstockDataframe-113"><a href="#SimstockDataframe-113"><span class="linenos">113</span></a><span class="sd">        This input data must include data fields ``osgb``, ``shading``, ``height``, ``wwr``, ``nofloors``, ``construction``, ``interiors``</span>
</span><span id="SimstockDataframe-114"><a href="#SimstockDataframe-114"><span class="linenos">114</span></a>
</span><span id="SimstockDataframe-115"><a href="#SimstockDataframe-115"><span class="linenos">115</span></a><span class="sd">        ``kwargs : dict``</span>
</span><span id="SimstockDataframe-116"><a href="#SimstockDataframe-116"><span class="linenos">116</span></a>
</span><span id="SimstockDataframe-117"><a href="#SimstockDataframe-117"><span class="linenos">117</span></a><span class="sd">        Dictionary of key-words arguments, see Simstockbase for full list of recognised key word arguments.</span>
</span><span id="SimstockDataframe-118"><a href="#SimstockDataframe-118"><span class="linenos">118</span></a>
</span><span id="SimstockDataframe-119"><a href="#SimstockDataframe-119"><span class="linenos">119</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SimstockDataframe-120"><a href="#SimstockDataframe-120"><span class="linenos">120</span></a>        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span> 
</span><span id="SimstockDataframe-121"><a href="#SimstockDataframe-121"><span class="linenos">121</span></a>
</span><span id="SimstockDataframe-122"><a href="#SimstockDataframe-122"><span class="linenos">122</span></a>        <span class="c1"># If it is already a valid simstock dataframe</span>
</span><span id="SimstockDataframe-123"><a href="#SimstockDataframe-123"><span class="linenos">123</span></a>        <span class="c1"># then nothing further needs to be done</span>
</span><span id="SimstockDataframe-124"><a href="#SimstockDataframe-124"><span class="linenos">124</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">inputobject</span><span class="p">,</span> <span class="n">SimstockDataframe</span><span class="p">):</span>
</span><span id="SimstockDataframe-125"><a href="#SimstockDataframe-125"><span class="linenos">125</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_df</span> <span class="o">=</span> <span class="n">inputobject</span><span class="o">.</span><span class="n">_df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="SimstockDataframe-126"><a href="#SimstockDataframe-126"><span class="linenos">126</span></a>            <span class="k">return</span>
</span><span id="SimstockDataframe-127"><a href="#SimstockDataframe-127"><span class="linenos">127</span></a>            
</span><span id="SimstockDataframe-128"><a href="#SimstockDataframe-128"><span class="linenos">128</span></a>        <span class="c1"># If it is not already a pandas dataframe, then</span>
</span><span id="SimstockDataframe-129"><a href="#SimstockDataframe-129"><span class="linenos">129</span></a>        <span class="c1"># try and turn it into one</span>
</span><span id="SimstockDataframe-130"><a href="#SimstockDataframe-130"><span class="linenos">130</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">inputobject</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">):</span>
</span><span id="SimstockDataframe-131"><a href="#SimstockDataframe-131"><span class="linenos">131</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="SimstockDataframe-132"><a href="#SimstockDataframe-132"><span class="linenos">132</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">inputobject</span><span class="p">)</span>
</span><span id="SimstockDataframe-133"><a href="#SimstockDataframe-133"><span class="linenos">133</span></a>            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
</span><span id="SimstockDataframe-134"><a href="#SimstockDataframe-134"><span class="linenos">134</span></a>                <span class="n">errmsg</span> <span class="o">=</span> <span class="s2">&quot;Unable to create data frame from input data.&quot;</span>
</span><span id="SimstockDataframe-135"><a href="#SimstockDataframe-135"><span class="linenos">135</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">errmsg</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">exc</span>
</span><span id="SimstockDataframe-136"><a href="#SimstockDataframe-136"><span class="linenos">136</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="SimstockDataframe-137"><a href="#SimstockDataframe-137"><span class="linenos">137</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_df</span> <span class="o">=</span> <span class="n">inputobject</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="SimstockDataframe-138"><a href="#SimstockDataframe-138"><span class="linenos">138</span></a>
</span><span id="SimstockDataframe-139"><a href="#SimstockDataframe-139"><span class="linenos">139</span></a>        <span class="c1"># Check that an osgb column exists</span>
</span><span id="SimstockDataframe-140"><a href="#SimstockDataframe-140"><span class="linenos">140</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_validate_osgb_column</span><span class="p">()</span>
</span><span id="SimstockDataframe-141"><a href="#SimstockDataframe-141"><span class="linenos">141</span></a>
</span><span id="SimstockDataframe-142"><a href="#SimstockDataframe-142"><span class="linenos">142</span></a>        <span class="c1"># Check that the polygon column exists</span>
</span><span id="SimstockDataframe-143"><a href="#SimstockDataframe-143"><span class="linenos">143</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_validate_polygon_column</span><span class="p">()</span> 
</span><span id="SimstockDataframe-144"><a href="#SimstockDataframe-144"><span class="linenos">144</span></a>
</span><span id="SimstockDataframe-145"><a href="#SimstockDataframe-145"><span class="linenos">145</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_add_interiors_column</span><span class="p">()</span>
</span><span id="SimstockDataframe-146"><a href="#SimstockDataframe-146"><span class="linenos">146</span></a>
</span><span id="SimstockDataframe-147"><a href="#SimstockDataframe-147"><span class="linenos">147</span></a>
</span><span id="SimstockDataframe-148"><a href="#SimstockDataframe-148"><span class="linenos">148</span></a>    <span class="k">def</span> <span class="fm">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span> <span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="SimstockDataframe-149"><a href="#SimstockDataframe-149"><span class="linenos">149</span></a>        <span class="k">if</span> <span class="n">attr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">:</span>
</span><span id="SimstockDataframe-150"><a href="#SimstockDataframe-150"><span class="linenos">150</span></a>            <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">)</span>
</span><span id="SimstockDataframe-151"><a href="#SimstockDataframe-151"><span class="linenos">151</span></a>        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">,</span> <span class="n">attr</span><span class="p">)</span>
</span><span id="SimstockDataframe-152"><a href="#SimstockDataframe-152"><span class="linenos">152</span></a>
</span><span id="SimstockDataframe-153"><a href="#SimstockDataframe-153"><span class="linenos">153</span></a>    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span> <span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="SimstockDataframe-154"><a href="#SimstockDataframe-154"><span class="linenos">154</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="n">item</span><span class="p">]</span>
</span><span id="SimstockDataframe-155"><a href="#SimstockDataframe-155"><span class="linenos">155</span></a>
</span><span id="SimstockDataframe-156"><a href="#SimstockDataframe-156"><span class="linenos">156</span></a>    <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span> <span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">data</span> <span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SimstockDataframe-157"><a href="#SimstockDataframe-157"><span class="linenos">157</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="n">item</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>
</span><span id="SimstockDataframe-158"><a href="#SimstockDataframe-158"><span class="linenos">158</span></a>
</span><span id="SimstockDataframe-159"><a href="#SimstockDataframe-159"><span class="linenos">159</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="SimstockDataframe-160"><a href="#SimstockDataframe-160"><span class="linenos">160</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>
</span><span id="SimstockDataframe-161"><a href="#SimstockDataframe-161"><span class="linenos">161</span></a>
</span><span id="SimstockDataframe-162"><a href="#SimstockDataframe-162"><span class="linenos">162</span></a>    <span class="c1"># Replace this with a modified call down to pandas __repr__. </span>
</span><span id="SimstockDataframe-163"><a href="#SimstockDataframe-163"><span class="linenos">163</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="SimstockDataframe-164"><a href="#SimstockDataframe-164"><span class="linenos">164</span></a>        <span class="k">return</span> <span class="s2">&quot;SimstockDataframe()&quot;</span>
</span><span id="SimstockDataframe-165"><a href="#SimstockDataframe-165"><span class="linenos">165</span></a>    
</span><span id="SimstockDataframe-166"><a href="#SimstockDataframe-166"><span class="linenos">166</span></a>    <span class="k">def</span> <span class="nf">_validate_osgb_column</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SimstockDataframe-167"><a href="#SimstockDataframe-167"><span class="linenos">167</span></a>        <span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="n">e</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">casefold</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;osgb&quot;</span><span class="p">]</span>
</span><span id="SimstockDataframe-168"><a href="#SimstockDataframe-168"><span class="linenos">168</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">cols</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="SimstockDataframe-169"><a href="#SimstockDataframe-169"><span class="linenos">169</span></a>            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="s2">&quot;No </span><span class="se">\&quot;</span><span class="s2">osgb</span><span class="se">\&quot;</span><span class="s2"> column dectected!</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="SimstockDataframe-170"><a href="#SimstockDataframe-170"><span class="linenos">170</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="n">cols</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">:</span> <span class="s2">&quot;osgb&quot;</span><span class="p">})</span>
</span><span id="SimstockDataframe-171"><a href="#SimstockDataframe-171"><span class="linenos">171</span></a>
</span><span id="SimstockDataframe-172"><a href="#SimstockDataframe-172"><span class="linenos">172</span></a>    <span class="k">def</span> <span class="nf">_validate_polygon_column</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SimstockDataframe-173"><a href="#SimstockDataframe-173"><span class="linenos">173</span></a>        <span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="n">e</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">casefold</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;polygon&quot;</span><span class="p">]</span>
</span><span id="SimstockDataframe-174"><a href="#SimstockDataframe-174"><span class="linenos">174</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">cols</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="SimstockDataframe-175"><a href="#SimstockDataframe-175"><span class="linenos">175</span></a>            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="s2">&quot;No </span><span class="se">\&quot;</span><span class="s2">polygon</span><span class="se">\&quot;</span><span class="s2"> column dectected!</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="SimstockDataframe-176"><a href="#SimstockDataframe-176"><span class="linenos">176</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="SimstockDataframe-177"><a href="#SimstockDataframe-177"><span class="linenos">177</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="n">cols</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">_series_serialiser</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="n">cols</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
</span><span id="SimstockDataframe-178"><a href="#SimstockDataframe-178"><span class="linenos">178</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="n">cols</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">:</span> <span class="s2">&quot;polygon&quot;</span><span class="p">})</span> 
</span><span id="SimstockDataframe-179"><a href="#SimstockDataframe-179"><span class="linenos">179</span></a>            <span class="k">return</span> 
</span><span id="SimstockDataframe-180"><a href="#SimstockDataframe-180"><span class="linenos">180</span></a>        <span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
</span><span id="SimstockDataframe-181"><a href="#SimstockDataframe-181"><span class="linenos">181</span></a>            <span class="n">errmsg</span> <span class="o">=</span> <span class="s2">&quot;Unable to find valid shapely data in </span><span class="se">\&quot;</span><span class="s2">polygon</span><span class="se">\&quot;\n</span><span class="s2">&quot;</span>
</span><span id="SimstockDataframe-182"><a href="#SimstockDataframe-182"><span class="linenos">182</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">errmsg</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">exc</span>
</span><span id="SimstockDataframe-183"><a href="#SimstockDataframe-183"><span class="linenos">183</span></a>        
</span><span id="SimstockDataframe-184"><a href="#SimstockDataframe-184"><span class="linenos">184</span></a>    <span class="k">def</span> <span class="nf">_add_interiors_column</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SimstockDataframe-185"><a href="#SimstockDataframe-185"><span class="linenos">185</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;interiors&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;polygon&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">algs</span><span class="o">.</span><span class="n">_has_interior</span><span class="p">)</span>
</span><span id="SimstockDataframe-186"><a href="#SimstockDataframe-186"><span class="linenos">186</span></a>    
</span><span id="SimstockDataframe-187"><a href="#SimstockDataframe-187"><span class="linenos">187</span></a>    <span class="nd">@property</span>
</span><span id="SimstockDataframe-188"><a href="#SimstockDataframe-188"><span class="linenos">188</span></a>    <span class="k">def</span> <span class="nf">is_ccw</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">bool</span><span class="p">]:</span>
</span><span id="SimstockDataframe-189"><a href="#SimstockDataframe-189"><span class="linenos">189</span></a>        <span class="k">return</span> <span class="n">shp</span><span class="o">.</span><span class="n">is_ccw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;polygon&#39;</span><span class="p">])</span>
</span><span id="SimstockDataframe-190"><a href="#SimstockDataframe-190"><span class="linenos">190</span></a>    
</span><span id="SimstockDataframe-191"><a href="#SimstockDataframe-191"><span class="linenos">191</span></a>    <span class="nd">@property</span>
</span><span id="SimstockDataframe-192"><a href="#SimstockDataframe-192"><span class="linenos">192</span></a>    <span class="k">def</span> <span class="nf">is_exterior_ccw</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">bool</span><span class="p">]:</span>
</span><span id="SimstockDataframe-193"><a href="#SimstockDataframe-193"><span class="linenos">193</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;polygon&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">algs</span><span class="o">.</span><span class="n">_is_exterior_ccw</span><span class="p">)</span>
</span><span id="SimstockDataframe-194"><a href="#SimstockDataframe-194"><span class="linenos">194</span></a>    
</span><span id="SimstockDataframe-195"><a href="#SimstockDataframe-195"><span class="linenos">195</span></a>    <span class="nd">@property</span>
</span><span id="SimstockDataframe-196"><a href="#SimstockDataframe-196"><span class="linenos">196</span></a>    <span class="k">def</span> <span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">bool</span><span class="p">]:</span>
</span><span id="SimstockDataframe-197"><a href="#SimstockDataframe-197"><span class="linenos">197</span></a>        <span class="k">return</span> <span class="n">shp</span><span class="o">.</span><span class="n">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;polygon&#39;</span><span class="p">])</span>
</span><span id="SimstockDataframe-198"><a href="#SimstockDataframe-198"><span class="linenos">198</span></a>    
</span><span id="SimstockDataframe-199"><a href="#SimstockDataframe-199"><span class="linenos">199</span></a>    <span class="nd">@property</span>
</span><span id="SimstockDataframe-200"><a href="#SimstockDataframe-200"><span class="linenos">200</span></a>    <span class="k">def</span> <span class="nf">length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="SimstockDataframe-201"><a href="#SimstockDataframe-201"><span class="linenos">201</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="o">.</span><span class="fm">__len__</span><span class="p">()</span>
</span><span id="SimstockDataframe-202"><a href="#SimstockDataframe-202"><span class="linenos">202</span></a>    
</span><span id="SimstockDataframe-203"><a href="#SimstockDataframe-203"><span class="linenos">203</span></a>    <span class="k">def</span> <span class="nf">orientate_polygons</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SimstockDataframe-204"><a href="#SimstockDataframe-204"><span class="linenos">204</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SimstockDataframe-205"><a href="#SimstockDataframe-205"><span class="linenos">205</span></a><span class="sd">        Function to ensure that polygon exteriors and interiors </span>
</span><span id="SimstockDataframe-206"><a href="#SimstockDataframe-206"><span class="linenos">206</span></a><span class="sd">        are correctly orientated clockwise/anti-clockwise.</span>
</span><span id="SimstockDataframe-207"><a href="#SimstockDataframe-207"><span class="linenos">207</span></a>
</span><span id="SimstockDataframe-208"><a href="#SimstockDataframe-208"><span class="linenos">208</span></a><span class="sd">        Parameters</span>
</span><span id="SimstockDataframe-209"><a href="#SimstockDataframe-209"><span class="linenos">209</span></a><span class="sd">        ----------</span>
</span><span id="SimstockDataframe-210"><a href="#SimstockDataframe-210"><span class="linenos">210</span></a>
</span><span id="SimstockDataframe-211"><a href="#SimstockDataframe-211"><span class="linenos">211</span></a><span class="sd">        ``kwargs : dict``</span>
</span><span id="SimstockDataframe-212"><a href="#SimstockDataframe-212"><span class="linenos">212</span></a>
</span><span id="SimstockDataframe-213"><a href="#SimstockDataframe-213"><span class="linenos">213</span></a><span class="sd">        Dictionary of key-words arguments, see Simstockbase for full list of recognised key word arguments.</span>
</span><span id="SimstockDataframe-214"><a href="#SimstockDataframe-214"><span class="linenos">214</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SimstockDataframe-215"><a href="#SimstockDataframe-215"><span class="linenos">215</span></a>        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="SimstockDataframe-216"><a href="#SimstockDataframe-216"><span class="linenos">216</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;polygon&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;polygon&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">algs</span><span class="o">.</span><span class="n">_orientate</span><span class="p">)</span>
</span><span id="SimstockDataframe-217"><a href="#SimstockDataframe-217"><span class="linenos">217</span></a>
</span><span id="SimstockDataframe-218"><a href="#SimstockDataframe-218"><span class="linenos">218</span></a>    <span class="k">def</span> <span class="nf">remove_duplicate_coords</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SimstockDataframe-219"><a href="#SimstockDataframe-219"><span class="linenos">219</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SimstockDataframe-220"><a href="#SimstockDataframe-220"><span class="linenos">220</span></a><span class="sd">        Function to remove duplicated coordinates from polygons, while ensuring the polygons remain valid shapely objects.</span>
</span><span id="SimstockDataframe-221"><a href="#SimstockDataframe-221"><span class="linenos">221</span></a>
</span><span id="SimstockDataframe-222"><a href="#SimstockDataframe-222"><span class="linenos">222</span></a><span class="sd">        Parameters</span>
</span><span id="SimstockDataframe-223"><a href="#SimstockDataframe-223"><span class="linenos">223</span></a><span class="sd">        ----------</span>
</span><span id="SimstockDataframe-224"><a href="#SimstockDataframe-224"><span class="linenos">224</span></a>
</span><span id="SimstockDataframe-225"><a href="#SimstockDataframe-225"><span class="linenos">225</span></a><span class="sd">        ``kwargs : dict``</span>
</span><span id="SimstockDataframe-226"><a href="#SimstockDataframe-226"><span class="linenos">226</span></a>
</span><span id="SimstockDataframe-227"><a href="#SimstockDataframe-227"><span class="linenos">227</span></a><span class="sd">        Dictionary of key-words arguments, see Simstockbase for full list of recognised key word arguments.</span>
</span><span id="SimstockDataframe-228"><a href="#SimstockDataframe-228"><span class="linenos">228</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SimstockDataframe-229"><a href="#SimstockDataframe-229"><span class="linenos">229</span></a>        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="SimstockDataframe-230"><a href="#SimstockDataframe-230"><span class="linenos">230</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;polygon&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;polygon&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span>
</span><span id="SimstockDataframe-231"><a href="#SimstockDataframe-231"><span class="linenos">231</span></a>            <span class="n">algs</span><span class="o">.</span><span class="n">_remove_duplicate_coords</span>
</span><span id="SimstockDataframe-232"><a href="#SimstockDataframe-232"><span class="linenos">232</span></a>            <span class="p">)</span>
</span><span id="SimstockDataframe-233"><a href="#SimstockDataframe-233"><span class="linenos">233</span></a>
</span><span id="SimstockDataframe-234"><a href="#SimstockDataframe-234"><span class="linenos">234</span></a>    <span class="k">def</span> <span class="nf">polygon_topology</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SimstockDataframe-235"><a href="#SimstockDataframe-235"><span class="linenos">235</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SimstockDataframe-236"><a href="#SimstockDataframe-236"><span class="linenos">236</span></a><span class="sd">        Function that checks whether polygons are touching or interecting each other. If any intersections are deteced, an error is thrown. </span>
</span><span id="SimstockDataframe-237"><a href="#SimstockDataframe-237"><span class="linenos">237</span></a>
</span><span id="SimstockDataframe-238"><a href="#SimstockDataframe-238"><span class="linenos">238</span></a><span class="sd">        This function adds an additonal column to the SimstockDataframe called ``touching``. The i*th* entry in ``touching`` lists the ``osbg`` values of all polygons touching the polygon in row i.</span>
</span><span id="SimstockDataframe-239"><a href="#SimstockDataframe-239"><span class="linenos">239</span></a>
</span><span id="SimstockDataframe-240"><a href="#SimstockDataframe-240"><span class="linenos">240</span></a><span class="sd">        Parameters</span>
</span><span id="SimstockDataframe-241"><a href="#SimstockDataframe-241"><span class="linenos">241</span></a><span class="sd">        ----------</span>
</span><span id="SimstockDataframe-242"><a href="#SimstockDataframe-242"><span class="linenos">242</span></a>
</span><span id="SimstockDataframe-243"><a href="#SimstockDataframe-243"><span class="linenos">243</span></a><span class="sd">        ``kwargs : dict``</span>
</span><span id="SimstockDataframe-244"><a href="#SimstockDataframe-244"><span class="linenos">244</span></a>
</span><span id="SimstockDataframe-245"><a href="#SimstockDataframe-245"><span class="linenos">245</span></a><span class="sd">        Dictionary of key-words arguments, see Simstockbase for full list of recognised key word arguments.</span>
</span><span id="SimstockDataframe-246"><a href="#SimstockDataframe-246"><span class="linenos">246</span></a>
</span><span id="SimstockDataframe-247"><a href="#SimstockDataframe-247"><span class="linenos">247</span></a><span class="sd">        Raises</span>
</span><span id="SimstockDataframe-248"><a href="#SimstockDataframe-248"><span class="linenos">248</span></a><span class="sd">        ------</span>
</span><span id="SimstockDataframe-249"><a href="#SimstockDataframe-249"><span class="linenos">249</span></a>
</span><span id="SimstockDataframe-250"><a href="#SimstockDataframe-250"><span class="linenos">250</span></a><span class="sd">        ``ValueError`` </span>
</span><span id="SimstockDataframe-251"><a href="#SimstockDataframe-251"><span class="linenos">251</span></a>
</span><span id="SimstockDataframe-252"><a href="#SimstockDataframe-252"><span class="linenos">252</span></a><span class="sd">        If any polygons are touching.</span>
</span><span id="SimstockDataframe-253"><a href="#SimstockDataframe-253"><span class="linenos">253</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SimstockDataframe-254"><a href="#SimstockDataframe-254"><span class="linenos">254</span></a>        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="SimstockDataframe-255"><a href="#SimstockDataframe-255"><span class="linenos">255</span></a>        <span class="n">length_range</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="o">.</span><span class="fm">__len__</span><span class="p">())</span>
</span><span id="SimstockDataframe-256"><a href="#SimstockDataframe-256"><span class="linenos">256</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;touching&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([]</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">length_range</span><span class="p">)</span>
</span><span id="SimstockDataframe-257"><a href="#SimstockDataframe-257"><span class="linenos">257</span></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">combinations</span><span class="p">(</span><span class="n">length_range</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
</span><span id="SimstockDataframe-258"><a href="#SimstockDataframe-258"><span class="linenos">258</span></a>            <span class="n">poly_i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;polygon&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span>
</span><span id="SimstockDataframe-259"><a href="#SimstockDataframe-259"><span class="linenos">259</span></a>            <span class="n">poly_j</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;polygon&#39;</span><span class="p">][</span><span class="n">j</span><span class="p">]</span>
</span><span id="SimstockDataframe-260"><a href="#SimstockDataframe-260"><span class="linenos">260</span></a>            <span class="n">osgb_i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;osgb&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span>
</span><span id="SimstockDataframe-261"><a href="#SimstockDataframe-261"><span class="linenos">261</span></a>            <span class="n">osgb_j</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;osgb&#39;</span><span class="p">][</span><span class="n">j</span><span class="p">]</span>
</span><span id="SimstockDataframe-262"><a href="#SimstockDataframe-262"><span class="linenos">262</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="SimstockDataframe-263"><a href="#SimstockDataframe-263"><span class="linenos">263</span></a>                <span class="k">if</span> <span class="n">algs</span><span class="o">.</span><span class="n">_is_touching</span><span class="p">(</span><span class="n">poly_i</span><span class="p">,</span> <span class="n">poly_j</span><span class="p">):</span>
</span><span id="SimstockDataframe-264"><a href="#SimstockDataframe-264"><span class="linenos">264</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;touching&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">osgb_j</span><span class="p">)</span>
</span><span id="SimstockDataframe-265"><a href="#SimstockDataframe-265"><span class="linenos">265</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;touching&#39;</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">osgb_i</span><span class="p">)</span>
</span><span id="SimstockDataframe-266"><a href="#SimstockDataframe-266"><span class="linenos">266</span></a>            <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
</span><span id="SimstockDataframe-267"><a href="#SimstockDataframe-267"><span class="linenos">267</span></a>                <span class="n">errmsg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Warning: OSGB </span><span class="si">{</span><span class="n">osgb_i</span><span class="si">}</span><span class="s2"> intersects </span><span class="si">{</span><span class="n">osgb_j</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="SimstockDataframe-268"><a href="#SimstockDataframe-268"><span class="linenos">268</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">errmsg</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">exc</span>
</span><span id="SimstockDataframe-269"><a href="#SimstockDataframe-269"><span class="linenos">269</span></a>
</span><span id="SimstockDataframe-270"><a href="#SimstockDataframe-270"><span class="linenos">270</span></a>    <span class="k">def</span> <span class="nf">polygon_tolerance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SimstockDataframe-271"><a href="#SimstockDataframe-271"><span class="linenos">271</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SimstockDataframe-272"><a href="#SimstockDataframe-272"><span class="linenos">272</span></a><span class="sd">        A function to assess which polygons need simplifying, based on a user-specifed tolerance. This can be set via ``tol`` in ``kwargs``. </span>
</span><span id="SimstockDataframe-273"><a href="#SimstockDataframe-273"><span class="linenos">273</span></a>
</span><span id="SimstockDataframe-274"><a href="#SimstockDataframe-274"><span class="linenos">274</span></a><span class="sd">        This function adds a boolean column named ``simplify`` which specifies whether each polygon needs simplifying or not, based on the tolerance.</span>
</span><span id="SimstockDataframe-275"><a href="#SimstockDataframe-275"><span class="linenos">275</span></a>
</span><span id="SimstockDataframe-276"><a href="#SimstockDataframe-276"><span class="linenos">276</span></a><span class="sd">        Parameters</span>
</span><span id="SimstockDataframe-277"><a href="#SimstockDataframe-277"><span class="linenos">277</span></a><span class="sd">        ----------</span>
</span><span id="SimstockDataframe-278"><a href="#SimstockDataframe-278"><span class="linenos">278</span></a>
</span><span id="SimstockDataframe-279"><a href="#SimstockDataframe-279"><span class="linenos">279</span></a><span class="sd">        ``kwargs : dict``</span>
</span><span id="SimstockDataframe-280"><a href="#SimstockDataframe-280"><span class="linenos">280</span></a>
</span><span id="SimstockDataframe-281"><a href="#SimstockDataframe-281"><span class="linenos">281</span></a><span class="sd">        Dictionary of key-words arguments, see Simstockbase for full list of recognised key word arguments.</span>
</span><span id="SimstockDataframe-282"><a href="#SimstockDataframe-282"><span class="linenos">282</span></a>
</span><span id="SimstockDataframe-283"><a href="#SimstockDataframe-283"><span class="linenos">283</span></a><span class="sd">        Example</span>
</span><span id="SimstockDataframe-284"><a href="#SimstockDataframe-284"><span class="linenos">284</span></a><span class="sd">        -------</span>
</span><span id="SimstockDataframe-285"><a href="#SimstockDataframe-285"><span class="linenos">285</span></a>
</span><span id="SimstockDataframe-286"><a href="#SimstockDataframe-286"><span class="linenos">286</span></a><span class="sd">        &gt;&gt;&gt; sdf.polygon_toerance(tol=0.1)</span>
</span><span id="SimstockDataframe-287"><a href="#SimstockDataframe-287"><span class="linenos">287</span></a>
</span><span id="SimstockDataframe-288"><a href="#SimstockDataframe-288"><span class="linenos">288</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SimstockDataframe-289"><a href="#SimstockDataframe-289"><span class="linenos">289</span></a>        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="SimstockDataframe-290"><a href="#SimstockDataframe-290"><span class="linenos">290</span></a>        <span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">algs</span><span class="o">.</span><span class="n">_poly_tol</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tol</span><span class="p">)</span>
</span><span id="SimstockDataframe-291"><a href="#SimstockDataframe-291"><span class="linenos">291</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;simplify&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;polygon&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</span><span id="SimstockDataframe-292"><a href="#SimstockDataframe-292"><span class="linenos">292</span></a>
</span><span id="SimstockDataframe-293"><a href="#SimstockDataframe-293"><span class="linenos">293</span></a>    <span class="k">def</span> <span class="nf">_polygon_within_hole</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SimstockDataframe-294"><a href="#SimstockDataframe-294"><span class="linenos">294</span></a>        <span class="n">length_range</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="o">.</span><span class="fm">__len__</span><span class="p">())</span>
</span><span id="SimstockDataframe-295"><a href="#SimstockDataframe-295"><span class="linenos">295</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;poly_within_hole&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([]</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">length_range</span><span class="p">)</span>
</span><span id="SimstockDataframe-296"><a href="#SimstockDataframe-296"><span class="linenos">296</span></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">product</span><span class="p">(</span><span class="n">length_range</span><span class="p">,</span> <span class="n">length_range</span><span class="p">):</span>
</span><span id="SimstockDataframe-297"><a href="#SimstockDataframe-297"><span class="linenos">297</span></a>            <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="n">j</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;interiors&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]:</span>
</span><span id="SimstockDataframe-298"><a href="#SimstockDataframe-298"><span class="linenos">298</span></a>                <span class="n">touches</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;osgb&#39;</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;touching&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span>
</span><span id="SimstockDataframe-299"><a href="#SimstockDataframe-299"><span class="linenos">299</span></a>                <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;polygon&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">interiors</span><span class="p">:</span>
</span><span id="SimstockDataframe-300"><a href="#SimstockDataframe-300"><span class="linenos">300</span></a>                    <span class="n">item_poly</span> <span class="o">=</span> <span class="n">Polygon</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">coords</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="SimstockDataframe-301"><a href="#SimstockDataframe-301"><span class="linenos">301</span></a>                    <span class="k">if</span> <span class="n">item_poly</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;polygon&#39;</span><span class="p">][</span><span class="n">j</span><span class="p">])</span> <span class="ow">and</span> <span class="n">touches</span><span class="p">:</span>
</span><span id="SimstockDataframe-302"><a href="#SimstockDataframe-302"><span class="linenos">302</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;poly_within_hole&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="SimstockDataframe-303"><a href="#SimstockDataframe-303"><span class="linenos">303</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;osgb&#39;</span><span class="p">][</span><span class="n">j</span><span class="p">]</span>
</span><span id="SimstockDataframe-304"><a href="#SimstockDataframe-304"><span class="linenos">304</span></a>                            <span class="p">)</span>
</span><span id="SimstockDataframe-305"><a href="#SimstockDataframe-305"><span class="linenos">305</span></a>                       
</span><span id="SimstockDataframe-306"><a href="#SimstockDataframe-306"><span class="linenos">306</span></a>    <span class="k">def</span> <span class="nf">_polygon_buffer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SimstockDataframe-307"><a href="#SimstockDataframe-307"><span class="linenos">307</span></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">polygon</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;polygon&#39;</span><span class="p">]):</span>
</span><span id="SimstockDataframe-308"><a href="#SimstockDataframe-308"><span class="linenos">308</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">polygon</span><span class="o">.</span><span class="n">is_valid</span><span class="p">:</span>
</span><span id="SimstockDataframe-309"><a href="#SimstockDataframe-309"><span class="linenos">309</span></a>                <span class="n">new_polygon</span> <span class="o">=</span> <span class="n">polygon</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="SimstockDataframe-310"><a href="#SimstockDataframe-310"><span class="linenos">310</span></a>                <span class="n">new_coords</span><span class="p">,</span> <span class="n">removed_coords</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
</span><span id="SimstockDataframe-311"><a href="#SimstockDataframe-311"><span class="linenos">311</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;touching&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]:</span>
</span><span id="SimstockDataframe-312"><a href="#SimstockDataframe-312"><span class="linenos">312</span></a>                    <span class="n">new_coords</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
</span><span id="SimstockDataframe-313"><a href="#SimstockDataframe-313"><span class="linenos">313</span></a>                        <span class="nb">set</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">new_polygon</span><span class="o">.</span><span class="n">exterior</span><span class="o">.</span><span class="n">coords</span><span class="p">))</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">polygon</span><span class="o">.</span><span class="n">exterior</span><span class="o">.</span><span class="n">coords</span><span class="p">)))</span>
</span><span id="SimstockDataframe-314"><a href="#SimstockDataframe-314"><span class="linenos">314</span></a>                    <span class="n">removed_coords</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
</span><span id="SimstockDataframe-315"><a href="#SimstockDataframe-315"><span class="linenos">315</span></a>                        <span class="nb">set</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">polygon</span><span class="o">.</span><span class="n">exterior</span><span class="o">.</span><span class="n">coords</span><span class="p">))</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">new_polygon</span><span class="o">.</span><span class="n">exterior</span><span class="o">.</span><span class="n">coords</span><span class="p">)))</span>
</span><span id="SimstockDataframe-316"><a href="#SimstockDataframe-316"><span class="linenos">316</span></a>                <span class="k">if</span> <span class="n">new_coords</span><span class="p">:</span>
</span><span id="SimstockDataframe-317"><a href="#SimstockDataframe-317"><span class="linenos">317</span></a>                    <span class="k">for</span> <span class="n">osgb_touching</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;touching&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]:</span>
</span><span id="SimstockDataframe-318"><a href="#SimstockDataframe-318"><span class="linenos">318</span></a>                        <span class="n">t_poly</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
</span><span id="SimstockDataframe-319"><a href="#SimstockDataframe-319"><span class="linenos">319</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;osbg&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">osgb_touching</span><span class="p">,</span> <span class="s1">&#39;polygon&#39;</span>
</span><span id="SimstockDataframe-320"><a href="#SimstockDataframe-320"><span class="linenos">320</span></a>                                <span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="SimstockDataframe-321"><a href="#SimstockDataframe-321"><span class="linenos">321</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
</span><span id="SimstockDataframe-322"><a href="#SimstockDataframe-322"><span class="linenos">322</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;osgb&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">osgb_touching</span><span class="p">,</span> <span class="s1">&#39;polygon&#39;</span>
</span><span id="SimstockDataframe-323"><a href="#SimstockDataframe-323"><span class="linenos">323</span></a>                            <span class="p">]</span> <span class="o">=</span> <span class="n">algs</span><span class="o">.</span><span class="n">_buffered_polygon</span><span class="p">(</span><span class="n">t_poly</span><span class="p">,</span> <span class="n">new_coords</span><span class="p">,</span> <span class="n">removed_coords</span><span class="p">)</span>
</span><span id="SimstockDataframe-324"><a href="#SimstockDataframe-324"><span class="linenos">324</span></a>
</span><span id="SimstockDataframe-325"><a href="#SimstockDataframe-325"><span class="linenos">325</span></a>    <span class="c1"># This function seems redundant                   </span>
</span><span id="SimstockDataframe-326"><a href="#SimstockDataframe-326"><span class="linenos">326</span></a>    <span class="k">def</span> <span class="nf">_touching_poly</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">osgb</span> <span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">polygon</span> <span class="p">:</span> <span class="n">Polygon</span><span class="p">,</span> 
</span><span id="SimstockDataframe-327"><a href="#SimstockDataframe-327"><span class="linenos">327</span></a>                       <span class="n">osgb_list</span> <span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> 
</span><span id="SimstockDataframe-328"><a href="#SimstockDataframe-328"><span class="linenos">328</span></a>                       <span class="n">osgb_touching</span> <span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="SimstockDataframe-329"><a href="#SimstockDataframe-329"><span class="linenos">329</span></a>        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">osgb_list</span><span class="p">:</span>
</span><span id="SimstockDataframe-330"><a href="#SimstockDataframe-330"><span class="linenos">330</span></a>            <span class="k">if</span> <span class="n">t</span> <span class="o">!=</span> <span class="n">osgb</span><span class="p">:</span>
</span><span id="SimstockDataframe-331"><a href="#SimstockDataframe-331"><span class="linenos">331</span></a>                <span class="c1"># Not sure this if is necessary</span>
</span><span id="SimstockDataframe-332"><a href="#SimstockDataframe-332"><span class="linenos">332</span></a>                <span class="n">t_polygon</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;osgb&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">t</span><span class="p">,</span> <span class="s1">&#39;polygon&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="SimstockDataframe-333"><a href="#SimstockDataframe-333"><span class="linenos">333</span></a>                <span class="k">if</span> <span class="n">t_polygon</span><span class="p">:</span>
</span><span id="SimstockDataframe-334"><a href="#SimstockDataframe-334"><span class="linenos">334</span></a>                    <span class="k">if</span> <span class="n">polygon</span><span class="o">.</span><span class="n">touches</span><span class="p">(</span><span class="n">t_polygon</span><span class="p">):</span>
</span><span id="SimstockDataframe-335"><a href="#SimstockDataframe-335"><span class="linenos">335</span></a>                        <span class="n">osgb_touching</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</span><span id="SimstockDataframe-336"><a href="#SimstockDataframe-336"><span class="linenos">336</span></a>        <span class="k">return</span> <span class="n">osgb_touching</span>
</span><span id="SimstockDataframe-337"><a href="#SimstockDataframe-337"><span class="linenos">337</span></a>                        
</span><span id="SimstockDataframe-338"><a href="#SimstockDataframe-338"><span class="linenos">338</span></a>    <span class="k">def</span> <span class="nf">_polygon_simplify</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SimstockDataframe-339"><a href="#SimstockDataframe-339"><span class="linenos">339</span></a>        <span class="n">osgb_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;osgb&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</span><span id="SimstockDataframe-340"><a href="#SimstockDataframe-340"><span class="linenos">340</span></a>        <span class="k">for</span> <span class="n">osgb</span> <span class="ow">in</span> <span class="n">osgb_list</span><span class="p">:</span>
</span><span id="SimstockDataframe-341"><a href="#SimstockDataframe-341"><span class="linenos">341</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;osgb&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">osgb</span><span class="p">,</span> <span class="s1">&#39;simplify&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
</span><span id="SimstockDataframe-342"><a href="#SimstockDataframe-342"><span class="linenos">342</span></a>                <span class="n">osgb_touching</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
</span><span id="SimstockDataframe-343"><a href="#SimstockDataframe-343"><span class="linenos">343</span></a>                <span class="n">polygon</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
</span><span id="SimstockDataframe-344"><a href="#SimstockDataframe-344"><span class="linenos">344</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;osgb&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">osgb</span><span class="p">,</span> <span class="s1">&#39;polygon&#39;</span>
</span><span id="SimstockDataframe-345"><a href="#SimstockDataframe-345"><span class="linenos">345</span></a>                    <span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="SimstockDataframe-346"><a href="#SimstockDataframe-346"><span class="linenos">346</span></a>                <span class="c1"># Not sure if this if statement is necessary</span>
</span><span id="SimstockDataframe-347"><a href="#SimstockDataframe-347"><span class="linenos">347</span></a>                <span class="k">if</span> <span class="n">polygon</span><span class="p">:</span>
</span><span id="SimstockDataframe-348"><a href="#SimstockDataframe-348"><span class="linenos">348</span></a>                    <span class="c1"># This could be done better: </span>
</span><span id="SimstockDataframe-349"><a href="#SimstockDataframe-349"><span class="linenos">349</span></a>                    <span class="c1"># no need to be passing around the osgb list</span>
</span><span id="SimstockDataframe-350"><a href="#SimstockDataframe-350"><span class="linenos">350</span></a>                    <span class="n">osgb_touching</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_touching_poly</span><span class="p">(</span>
</span><span id="SimstockDataframe-351"><a href="#SimstockDataframe-351"><span class="linenos">351</span></a>                        <span class="n">osgb</span><span class="p">,</span> <span class="n">polygon</span><span class="p">,</span> <span class="n">osgb_list</span><span class="p">,</span> <span class="n">osgb_touching</span>
</span><span id="SimstockDataframe-352"><a href="#SimstockDataframe-352"><span class="linenos">352</span></a>                        <span class="p">)</span>
</span><span id="SimstockDataframe-353"><a href="#SimstockDataframe-353"><span class="linenos">353</span></a>                    <span class="c1"># OSGB touching could be stored as a class variable,</span>
</span><span id="SimstockDataframe-354"><a href="#SimstockDataframe-354"><span class="linenos">354</span></a>                    <span class="c1"># it is also in the dataframe already. The variable</span>
</span><span id="SimstockDataframe-355"><a href="#SimstockDataframe-355"><span class="linenos">355</span></a>                    <span class="c1"># osgb in this function should therefore be deprecated.</span>
</span><span id="SimstockDataframe-356"><a href="#SimstockDataframe-356"><span class="linenos">356</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_df</span> <span class="o">=</span> <span class="n">smpl</span><span class="o">.</span><span class="n">_polygon_simplifying</span><span class="p">(</span>
</span><span id="SimstockDataframe-357"><a href="#SimstockDataframe-357"><span class="linenos">357</span></a>                        <span class="n">polygon</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">,</span> <span class="n">osgb</span><span class="p">,</span> <span class="n">osgb_touching</span>
</span><span id="SimstockDataframe-358"><a href="#SimstockDataframe-358"><span class="linenos">358</span></a>                        <span class="p">)</span>
</span><span id="SimstockDataframe-359"><a href="#SimstockDataframe-359"><span class="linenos">359</span></a>                        
</span><span id="SimstockDataframe-360"><a href="#SimstockDataframe-360"><span class="linenos">360</span></a>    <span class="k">def</span> <span class="nf">polygon_simplification</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SimstockDataframe-361"><a href="#SimstockDataframe-361"><span class="linenos">361</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SimstockDataframe-362"><a href="#SimstockDataframe-362"><span class="linenos">362</span></a><span class="sd">        Function that simplifies polygons, by e.g. exploiting transitivity of points and merging points within tolerances. </span>
</span><span id="SimstockDataframe-363"><a href="#SimstockDataframe-363"><span class="linenos">363</span></a>
</span><span id="SimstockDataframe-364"><a href="#SimstockDataframe-364"><span class="linenos">364</span></a><span class="sd">        Parameters</span>
</span><span id="SimstockDataframe-365"><a href="#SimstockDataframe-365"><span class="linenos">365</span></a><span class="sd">        ----------</span>
</span><span id="SimstockDataframe-366"><a href="#SimstockDataframe-366"><span class="linenos">366</span></a>
</span><span id="SimstockDataframe-367"><a href="#SimstockDataframe-367"><span class="linenos">367</span></a><span class="sd">        ``kwargs : dict``</span>
</span><span id="SimstockDataframe-368"><a href="#SimstockDataframe-368"><span class="linenos">368</span></a>
</span><span id="SimstockDataframe-369"><a href="#SimstockDataframe-369"><span class="linenos">369</span></a><span class="sd">        Dictionary of key-words arguments, see Simstockbase for full list of recognised key word arguments.</span>
</span><span id="SimstockDataframe-370"><a href="#SimstockDataframe-370"><span class="linenos">370</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SimstockDataframe-371"><a href="#SimstockDataframe-371"><span class="linenos">371</span></a>        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="SimstockDataframe-372"><a href="#SimstockDataframe-372"><span class="linenos">372</span></a>        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;simplify&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="SimstockDataframe-373"><a href="#SimstockDataframe-373"><span class="linenos">373</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_polygon_within_hole</span><span class="p">()</span>
</span><span id="SimstockDataframe-374"><a href="#SimstockDataframe-374"><span class="linenos">374</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_polygon_simplify</span><span class="p">()</span>
</span><span id="SimstockDataframe-375"><a href="#SimstockDataframe-375"><span class="linenos">375</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
</span><span id="SimstockDataframe-376"><a href="#SimstockDataframe-376"><span class="linenos">376</span></a>                <span class="o">~</span><span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;polygon&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="kc">False</span><span class="p">])</span>
</span><span id="SimstockDataframe-377"><a href="#SimstockDataframe-377"><span class="linenos">377</span></a>                <span class="p">]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="SimstockDataframe-378"><a href="#SimstockDataframe-378"><span class="linenos">378</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_polygon_buffer</span><span class="p">()</span>
</span><span id="SimstockDataframe-379"><a href="#SimstockDataframe-379"><span class="linenos">379</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">polygon_tolerance</span><span class="p">()</span>
</span><span id="SimstockDataframe-380"><a href="#SimstockDataframe-380"><span class="linenos">380</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;simplify&#39;</span><span class="p">,</span> <span class="s1">&#39;poly_within_hole&#39;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="SimstockDataframe-381"><a href="#SimstockDataframe-381"><span class="linenos">381</span></a>
</span><span id="SimstockDataframe-382"><a href="#SimstockDataframe-382"><span class="linenos">382</span></a>    <span class="c1"># This could be refactored as a map</span>
</span><span id="SimstockDataframe-383"><a href="#SimstockDataframe-383"><span class="linenos">383</span></a>    <span class="k">def</span> <span class="nf">collinear_exterior</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SimstockDataframe-384"><a href="#SimstockDataframe-384"><span class="linenos">384</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SimstockDataframe-385"><a href="#SimstockDataframe-385"><span class="linenos">385</span></a><span class="sd">        Function that removes collinear points from polygons and determines exterior surfaces.</span>
</span><span id="SimstockDataframe-386"><a href="#SimstockDataframe-386"><span class="linenos">386</span></a>
</span><span id="SimstockDataframe-387"><a href="#SimstockDataframe-387"><span class="linenos">387</span></a><span class="sd">        Parameters</span>
</span><span id="SimstockDataframe-388"><a href="#SimstockDataframe-388"><span class="linenos">388</span></a><span class="sd">        ----------</span>
</span><span id="SimstockDataframe-389"><a href="#SimstockDataframe-389"><span class="linenos">389</span></a>
</span><span id="SimstockDataframe-390"><a href="#SimstockDataframe-390"><span class="linenos">390</span></a><span class="sd">        ``kwargs : dict``</span>
</span><span id="SimstockDataframe-391"><a href="#SimstockDataframe-391"><span class="linenos">391</span></a>
</span><span id="SimstockDataframe-392"><a href="#SimstockDataframe-392"><span class="linenos">392</span></a><span class="sd">        Dictionary of key-words arguments, see Simstockbase for full list of recognised key word arguments.</span>
</span><span id="SimstockDataframe-393"><a href="#SimstockDataframe-393"><span class="linenos">393</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SimstockDataframe-394"><a href="#SimstockDataframe-394"><span class="linenos">394</span></a>        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="SimstockDataframe-395"><a href="#SimstockDataframe-395"><span class="linenos">395</span></a>        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="o">.</span><span class="n">itertuples</span><span class="p">():</span>
</span><span id="SimstockDataframe-396"><a href="#SimstockDataframe-396"><span class="linenos">396</span></a>            <span class="n">osgb_touching</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">touching</span>
</span><span id="SimstockDataframe-397"><a href="#SimstockDataframe-397"><span class="linenos">397</span></a>            <span class="n">polygon</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">polygon</span>
</span><span id="SimstockDataframe-398"><a href="#SimstockDataframe-398"><span class="linenos">398</span></a>            <span class="n">osgb</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">osgb</span>
</span><span id="SimstockDataframe-399"><a href="#SimstockDataframe-399"><span class="linenos">399</span></a>            <span class="k">if</span> <span class="n">osgb_touching</span><span class="p">:</span>
</span><span id="SimstockDataframe-400"><a href="#SimstockDataframe-400"><span class="linenos">400</span></a>                <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">osgb_touching</span><span class="p">:</span>
</span><span id="SimstockDataframe-401"><a href="#SimstockDataframe-401"><span class="linenos">401</span></a>                    <span class="n">t_polygon</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
</span><span id="SimstockDataframe-402"><a href="#SimstockDataframe-402"><span class="linenos">402</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;osgb&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">t</span><span class="p">,</span> <span class="s1">&#39;polygon&#39;</span>
</span><span id="SimstockDataframe-403"><a href="#SimstockDataframe-403"><span class="linenos">403</span></a>                        <span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="SimstockDataframe-404"><a href="#SimstockDataframe-404"><span class="linenos">404</span></a>                    <span class="n">partition</span> <span class="o">=</span> <span class="n">polygon</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">t_polygon</span><span class="p">)</span>
</span><span id="SimstockDataframe-405"><a href="#SimstockDataframe-405"><span class="linenos">405</span></a>                    <span class="k">if</span> <span class="n">partition</span><span class="o">.</span><span class="n">geom_type</span> <span class="o">==</span> <span class="s1">&#39;MultiLineString&#39;</span><span class="p">:</span>
</span><span id="SimstockDataframe-406"><a href="#SimstockDataframe-406"><span class="linenos">406</span></a>                        <span class="n">partition</span> <span class="o">=</span> <span class="n">linemerge</span><span class="p">(</span><span class="n">partition</span><span class="p">)</span>
</span><span id="SimstockDataframe-407"><a href="#SimstockDataframe-407"><span class="linenos">407</span></a>                    <span class="n">partition_collinear_points</span> <span class="o">=</span> <span class="n">algs</span><span class="o">.</span><span class="n">_collinear_points_list</span><span class="p">(</span>
</span><span id="SimstockDataframe-408"><a href="#SimstockDataframe-408"><span class="linenos">408</span></a>                        <span class="n">partition</span><span class="p">)</span>
</span><span id="SimstockDataframe-409"><a href="#SimstockDataframe-409"><span class="linenos">409</span></a>                    <span class="k">if</span> <span class="n">partition_collinear_points</span><span class="p">:</span>
</span><span id="SimstockDataframe-410"><a href="#SimstockDataframe-410"><span class="linenos">410</span></a>                        <span class="n">polygon</span> <span class="o">=</span> <span class="n">algs</span><span class="o">.</span><span class="n">_update_polygon</span><span class="p">(</span>
</span><span id="SimstockDataframe-411"><a href="#SimstockDataframe-411"><span class="linenos">411</span></a>                            <span class="n">polygon</span><span class="p">,</span> <span class="n">partition_collinear_points</span><span class="p">)</span>
</span><span id="SimstockDataframe-412"><a href="#SimstockDataframe-412"><span class="linenos">412</span></a>                        <span class="n">t_polygon</span> <span class="o">=</span> <span class="n">algs</span><span class="o">.</span><span class="n">_update_polygon</span><span class="p">(</span>
</span><span id="SimstockDataframe-413"><a href="#SimstockDataframe-413"><span class="linenos">413</span></a>                            <span class="n">t_polygon</span><span class="p">,</span> <span class="n">partition_collinear_points</span><span class="p">)</span>
</span><span id="SimstockDataframe-414"><a href="#SimstockDataframe-414"><span class="linenos">414</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
</span><span id="SimstockDataframe-415"><a href="#SimstockDataframe-415"><span class="linenos">415</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;osgb&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">t</span><span class="p">,</span> <span class="s1">&#39;polygon&#39;</span>
</span><span id="SimstockDataframe-416"><a href="#SimstockDataframe-416"><span class="linenos">416</span></a>                            <span class="p">]</span> <span class="o">=</span> <span class="n">t_polygon</span>
</span><span id="SimstockDataframe-417"><a href="#SimstockDataframe-417"><span class="linenos">417</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
</span><span id="SimstockDataframe-418"><a href="#SimstockDataframe-418"><span class="linenos">418</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;osgb&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">osgb</span><span class="p">,</span> <span class="s1">&#39;polygon&#39;</span>
</span><span id="SimstockDataframe-419"><a href="#SimstockDataframe-419"><span class="linenos">419</span></a>                            <span class="p">]</span> <span class="o">=</span> <span class="n">polygon</span>
</span><span id="SimstockDataframe-420"><a href="#SimstockDataframe-420"><span class="linenos">420</span></a>                        
</span><span id="SimstockDataframe-421"><a href="#SimstockDataframe-421"><span class="linenos">421</span></a>        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="o">.</span><span class="n">itertuples</span><span class="p">():</span>
</span><span id="SimstockDataframe-422"><a href="#SimstockDataframe-422"><span class="linenos">422</span></a>            <span class="n">osgb_touching</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">touching</span>
</span><span id="SimstockDataframe-423"><a href="#SimstockDataframe-423"><span class="linenos">423</span></a>            <span class="n">polygon</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">polygon</span>
</span><span id="SimstockDataframe-424"><a href="#SimstockDataframe-424"><span class="linenos">424</span></a>            <span class="n">osgb</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">osgb</span>
</span><span id="SimstockDataframe-425"><a href="#SimstockDataframe-425"><span class="linenos">425</span></a>            <span class="k">if</span> <span class="n">osgb_touching</span><span class="p">:</span>
</span><span id="SimstockDataframe-426"><a href="#SimstockDataframe-426"><span class="linenos">426</span></a>                <span class="n">outer_ring</span> <span class="o">=</span> <span class="n">LineString</span><span class="p">(</span><span class="n">polygon</span><span class="o">.</span><span class="n">exterior</span><span class="p">)</span>
</span><span id="SimstockDataframe-427"><a href="#SimstockDataframe-427"><span class="linenos">427</span></a>                <span class="n">inner_ring</span> <span class="o">=</span> <span class="n">MultiLineString</span><span class="p">(</span><span class="n">polygon</span><span class="o">.</span><span class="n">interiors</span><span class="p">)</span>
</span><span id="SimstockDataframe-428"><a href="#SimstockDataframe-428"><span class="linenos">428</span></a>                <span class="n">exposed</span> <span class="o">=</span> <span class="n">unary_union</span><span class="p">((</span><span class="n">outer_ring</span><span class="p">,</span> <span class="n">inner_ring</span><span class="p">))</span>
</span><span id="SimstockDataframe-429"><a href="#SimstockDataframe-429"><span class="linenos">429</span></a>                <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">osgb_touching</span><span class="p">:</span>
</span><span id="SimstockDataframe-430"><a href="#SimstockDataframe-430"><span class="linenos">430</span></a>                    <span class="n">t_polygon</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
</span><span id="SimstockDataframe-431"><a href="#SimstockDataframe-431"><span class="linenos">431</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;osgb&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">t</span><span class="p">,</span> <span class="s1">&#39;polygon&#39;</span>
</span><span id="SimstockDataframe-432"><a href="#SimstockDataframe-432"><span class="linenos">432</span></a>                        <span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="SimstockDataframe-433"><a href="#SimstockDataframe-433"><span class="linenos">433</span></a>                    <span class="n">exposed</span> <span class="o">-=</span> <span class="n">polygon</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">t_polygon</span><span class="p">)</span>
</span><span id="SimstockDataframe-434"><a href="#SimstockDataframe-434"><span class="linenos">434</span></a>                <span class="n">exposed_collinear_points</span> <span class="o">=</span> <span class="n">algs</span><span class="o">.</span><span class="n">_collinear_points_list</span><span class="p">(</span><span class="n">exposed</span><span class="p">)</span>
</span><span id="SimstockDataframe-435"><a href="#SimstockDataframe-435"><span class="linenos">435</span></a>                <span class="k">if</span> <span class="n">exposed_collinear_points</span><span class="p">:</span>
</span><span id="SimstockDataframe-436"><a href="#SimstockDataframe-436"><span class="linenos">436</span></a>                    <span class="n">exposed</span> <span class="o">=</span> <span class="n">algs</span><span class="o">.</span><span class="n">_update_exposed</span><span class="p">(</span><span class="n">exposed</span><span class="p">,</span> <span class="n">exposed_collinear_points</span><span class="p">)</span>
</span><span id="SimstockDataframe-437"><a href="#SimstockDataframe-437"><span class="linenos">437</span></a>                    <span class="n">polygon</span> <span class="o">=</span> <span class="n">algs</span><span class="o">.</span><span class="n">_update_polygon</span><span class="p">(</span><span class="n">polygon</span><span class="p">,</span> <span class="n">exposed_collinear_points</span><span class="p">)</span>
</span><span id="SimstockDataframe-438"><a href="#SimstockDataframe-438"><span class="linenos">438</span></a>                <span class="n">horizontal</span> <span class="o">=</span> <span class="n">algs</span><span class="o">.</span><span class="n">_remove_collinear_points_horizontal</span><span class="p">(</span><span class="n">polygon</span><span class="p">)</span>
</span><span id="SimstockDataframe-439"><a href="#SimstockDataframe-439"><span class="linenos">439</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="SimstockDataframe-440"><a href="#SimstockDataframe-440"><span class="linenos">440</span></a>                <span class="n">polygon</span> <span class="o">=</span> <span class="n">algs</span><span class="o">.</span><span class="n">_remove_collinear_points_horizontal</span><span class="p">(</span><span class="n">polygon</span><span class="p">)</span>
</span><span id="SimstockDataframe-441"><a href="#SimstockDataframe-441"><span class="linenos">441</span></a>                <span class="n">horizontal</span> <span class="o">=</span> <span class="n">polygon</span>
</span><span id="SimstockDataframe-442"><a href="#SimstockDataframe-442"><span class="linenos">442</span></a>                <span class="n">outer_ring</span> <span class="o">=</span> <span class="n">LineString</span><span class="p">(</span><span class="n">polygon</span><span class="o">.</span><span class="n">exterior</span><span class="p">)</span>
</span><span id="SimstockDataframe-443"><a href="#SimstockDataframe-443"><span class="linenos">443</span></a>                <span class="n">inner_ring</span> <span class="o">=</span> <span class="n">MultiLineString</span><span class="p">(</span><span class="n">polygon</span><span class="o">.</span><span class="n">interiors</span><span class="p">)</span>
</span><span id="SimstockDataframe-444"><a href="#SimstockDataframe-444"><span class="linenos">444</span></a>                <span class="n">exposed</span> <span class="o">=</span> <span class="n">unary_union</span><span class="p">((</span><span class="n">outer_ring</span><span class="p">,</span> <span class="n">inner_ring</span><span class="p">))</span>
</span><span id="SimstockDataframe-445"><a href="#SimstockDataframe-445"><span class="linenos">445</span></a>
</span><span id="SimstockDataframe-446"><a href="#SimstockDataframe-446"><span class="linenos">446</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
</span><span id="SimstockDataframe-447"><a href="#SimstockDataframe-447"><span class="linenos">447</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;osgb&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">osgb</span><span class="p">,</span> <span class="s1">&#39;polygon_exposed_wall&#39;</span>
</span><span id="SimstockDataframe-448"><a href="#SimstockDataframe-448"><span class="linenos">448</span></a>                <span class="p">]</span> <span class="o">=</span> <span class="n">exposed</span>
</span><span id="SimstockDataframe-449"><a href="#SimstockDataframe-449"><span class="linenos">449</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
</span><span id="SimstockDataframe-450"><a href="#SimstockDataframe-450"><span class="linenos">450</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;osgb&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">osgb</span><span class="p">,</span> <span class="s1">&#39;polygon&#39;</span>
</span><span id="SimstockDataframe-451"><a href="#SimstockDataframe-451"><span class="linenos">451</span></a>                <span class="p">]</span> <span class="o">=</span> <span class="n">polygon</span>
</span><span id="SimstockDataframe-452"><a href="#SimstockDataframe-452"><span class="linenos">452</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
</span><span id="SimstockDataframe-453"><a href="#SimstockDataframe-453"><span class="linenos">453</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;osgb&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">osgb</span><span class="p">,</span> <span class="s1">&#39;polygon_horizontal&#39;</span>
</span><span id="SimstockDataframe-454"><a href="#SimstockDataframe-454"><span class="linenos">454</span></a>                <span class="p">]</span> <span class="o">=</span> <span class="n">horizontal</span>
</span><span id="SimstockDataframe-455"><a href="#SimstockDataframe-455"><span class="linenos">455</span></a>            
</span><span id="SimstockDataframe-456"><a href="#SimstockDataframe-456"><span class="linenos">456</span></a>    <span class="k">def</span> <span class="nf">preprocessing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SimstockDataframe-457"><a href="#SimstockDataframe-457"><span class="linenos">457</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SimstockDataframe-458"><a href="#SimstockDataframe-458"><span class="linenos">458</span></a><span class="sd">        Function to perform default processing on the SimstockDataframe to ready it for ``IDF`` creation. </span>
</span><span id="SimstockDataframe-459"><a href="#SimstockDataframe-459"><span class="linenos">459</span></a>
</span><span id="SimstockDataframe-460"><a href="#SimstockDataframe-460"><span class="linenos">460</span></a><span class="sd">        This function first checks that all polygons are correctly orientated. It then proceeds to remove duplicate coordinates and simplify polygons while ensuring that polygons do not intersect each other.</span>
</span><span id="SimstockDataframe-461"><a href="#SimstockDataframe-461"><span class="linenos">461</span></a>
</span><span id="SimstockDataframe-462"><a href="#SimstockDataframe-462"><span class="linenos">462</span></a><span class="sd">        Parameters</span>
</span><span id="SimstockDataframe-463"><a href="#SimstockDataframe-463"><span class="linenos">463</span></a><span class="sd">        ----------</span>
</span><span id="SimstockDataframe-464"><a href="#SimstockDataframe-464"><span class="linenos">464</span></a>
</span><span id="SimstockDataframe-465"><a href="#SimstockDataframe-465"><span class="linenos">465</span></a><span class="sd">        ``kwargs : dict``</span>
</span><span id="SimstockDataframe-466"><a href="#SimstockDataframe-466"><span class="linenos">466</span></a>
</span><span id="SimstockDataframe-467"><a href="#SimstockDataframe-467"><span class="linenos">467</span></a><span class="sd">        Dictionary of key-words arguments, see Simstockbase for full list of recognised key word arguments.</span>
</span><span id="SimstockDataframe-468"><a href="#SimstockDataframe-468"><span class="linenos">468</span></a>
</span><span id="SimstockDataframe-469"><a href="#SimstockDataframe-469"><span class="linenos">469</span></a><span class="sd">        Raises</span>
</span><span id="SimstockDataframe-470"><a href="#SimstockDataframe-470"><span class="linenos">470</span></a><span class="sd">        ------</span>
</span><span id="SimstockDataframe-471"><a href="#SimstockDataframe-471"><span class="linenos">471</span></a>
</span><span id="SimstockDataframe-472"><a href="#SimstockDataframe-472"><span class="linenos">472</span></a><span class="sd">        ``ValueError``</span>
</span><span id="SimstockDataframe-473"><a href="#SimstockDataframe-473"><span class="linenos">473</span></a>
</span><span id="SimstockDataframe-474"><a href="#SimstockDataframe-474"><span class="linenos">474</span></a><span class="sd">        If polygons cannot be simplified without causing intersection.</span>
</span><span id="SimstockDataframe-475"><a href="#SimstockDataframe-475"><span class="linenos">475</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SimstockDataframe-476"><a href="#SimstockDataframe-476"><span class="linenos">476</span></a>        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="SimstockDataframe-477"><a href="#SimstockDataframe-477"><span class="linenos">477</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">orientate_polygons</span><span class="p">()</span>
</span><span id="SimstockDataframe-478"><a href="#SimstockDataframe-478"><span class="linenos">478</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">remove_duplicate_coords</span><span class="p">()</span>
</span><span id="SimstockDataframe-479"><a href="#SimstockDataframe-479"><span class="linenos">479</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">polygon_topology</span><span class="p">()</span>
</span><span id="SimstockDataframe-480"><a href="#SimstockDataframe-480"><span class="linenos">480</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">polygon_tolerance</span><span class="p">()</span>
</span><span id="SimstockDataframe-481"><a href="#SimstockDataframe-481"><span class="linenos">481</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">polygon_simplification</span><span class="p">()</span>
</span><span id="SimstockDataframe-482"><a href="#SimstockDataframe-482"><span class="linenos">482</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">polygon_topology</span><span class="p">()</span>
</span><span id="SimstockDataframe-483"><a href="#SimstockDataframe-483"><span class="linenos">483</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">collinear_exterior</span><span class="p">()</span>
</span><span id="SimstockDataframe-484"><a href="#SimstockDataframe-484"><span class="linenos">484</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">polygon_topology</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>A <code><a href="#SimstockDataframe">SimstockDataframe</a></code> is an object used internally by simstock to represent all input data. It behaves the in the same way as a Pandas data frame, but with some key additional methods to process the data for EnergyPlus.</p>

<p>In order to be a valid <code><a href="#SimstockDataframe">SimstockDataframe</a></code>, there must be one column names <code>polygon</code> that contains geometric data.</p>

<p>Additional column names are: </p>

<ul>
<li><code>osgb</code></li>
<li><code>shading</code></li>
<li><code>height</code></li>
<li><code>wwr</code></li>
<li><code>nofloors</code></li>
<li><code>construction</code></li>
<li><code>interiors</code></li>
</ul>

<h2 id="parameters">Parameters</h2>

<p><code>data : Any</code>
    The polygon data together with <code>osgb</code> data etc.</p>

<p><code>index : array-like or Index</code>
    The index for the SimstockSeries.</p>

<p><code>tol : float</code>
    The tolerance to apply when assessing polygon intersections.</p>

<h2 id="usage-example">Usage example</h2>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">simstock</span> <span class="k">as</span> <span class="nn">sim</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sdf</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;text.csv&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Access data in the smae way as a pandas dataframe:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">sdf</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
<span class="go">Index([&#39;polygon&#39;, &#39;osgb&#39;, &#39;shading&#39;, &#39;height&#39;, &#39;wwr&#39;, &#39;nofloors&#39;,</span>
<span class="go">   &#39;construction&#39;, &#39;interiors&#39;],</span>
<span class="go">  dtype=&#39;object&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">sdf</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">sdf</span><span class="p">[</span><span class="s2">&quot;osgb&quot;</span><span class="p">]</span><span class="o">==</span><span class="s2">&quot;osgb1000005307038&quot;</span><span class="p">,</span> <span class="s2">&quot;polygon&quot;</span><span class="p">])</span>
<span class="go">POLYGON ((528883.55 186137, 528878.05 186145.5...</span>
<span class="go">Name: polygon, dtype: object</span>
<span class="gp">&gt;&gt;&gt; </span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Perform preprocessing</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sdf</span><span class="o">.</span><span class="n">preprocessing</span><span class="p">()</span>
</code></pre>
</div>

<h2 id="attributes">Attributes</h2>

<p><code>is_ccw : bool or list&lt;bool&gt;</code></p>

<p>Are the geometries counter-clockwise.</p>

<p><code>is_exterior_ccw : bool or list&lt;bool&gt;</code></p>

<p>Are the exterior perimeters counter-clockwise.</p>

<p><code>is_valid : bool or list&lt;bool&gt;</code> </p>

<p>Are the geometries valid objects.</p>

<p><code>length : int</code></p>

<p>The length of the data (axis=0).</p>

<h2 id="methods">Methods</h2>
</div>


                            <div id="SimstockDataframe.__init__" class="classattr">
                                        <input id="SimstockDataframe.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">SimstockDataframe</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">inputobject</span><span class="p">:</span> <span class="n">Any</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span>)</span>

                <label class="view-source-button" for="SimstockDataframe.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SimstockDataframe.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SimstockDataframe.__init__-103"><a href="#SimstockDataframe.__init__-103"><span class="linenos">103</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputobject</span> <span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SimstockDataframe.__init__-104"><a href="#SimstockDataframe.__init__-104"><span class="linenos">104</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SimstockDataframe.__init__-105"><a href="#SimstockDataframe.__init__-105"><span class="linenos">105</span></a><span class="sd">        Initialisation function for SimstockDataframe</span>
</span><span id="SimstockDataframe.__init__-106"><a href="#SimstockDataframe.__init__-106"><span class="linenos">106</span></a>
</span><span id="SimstockDataframe.__init__-107"><a href="#SimstockDataframe.__init__-107"><span class="linenos">107</span></a><span class="sd">        Parameters</span>
</span><span id="SimstockDataframe.__init__-108"><a href="#SimstockDataframe.__init__-108"><span class="linenos">108</span></a><span class="sd">        ----------</span>
</span><span id="SimstockDataframe.__init__-109"><a href="#SimstockDataframe.__init__-109"><span class="linenos">109</span></a>
</span><span id="SimstockDataframe.__init__-110"><a href="#SimstockDataframe.__init__-110"><span class="linenos">110</span></a><span class="sd">        ``inputdata : Any``</span>
</span><span id="SimstockDataframe.__init__-111"><a href="#SimstockDataframe.__init__-111"><span class="linenos">111</span></a>
</span><span id="SimstockDataframe.__init__-112"><a href="#SimstockDataframe.__init__-112"><span class="linenos">112</span></a><span class="sd">        Can be a dictionary or a Pandas dataframe.</span>
</span><span id="SimstockDataframe.__init__-113"><a href="#SimstockDataframe.__init__-113"><span class="linenos">113</span></a><span class="sd">        This input data must include data fields ``osgb``, ``shading``, ``height``, ``wwr``, ``nofloors``, ``construction``, ``interiors``</span>
</span><span id="SimstockDataframe.__init__-114"><a href="#SimstockDataframe.__init__-114"><span class="linenos">114</span></a>
</span><span id="SimstockDataframe.__init__-115"><a href="#SimstockDataframe.__init__-115"><span class="linenos">115</span></a><span class="sd">        ``kwargs : dict``</span>
</span><span id="SimstockDataframe.__init__-116"><a href="#SimstockDataframe.__init__-116"><span class="linenos">116</span></a>
</span><span id="SimstockDataframe.__init__-117"><a href="#SimstockDataframe.__init__-117"><span class="linenos">117</span></a><span class="sd">        Dictionary of key-words arguments, see Simstockbase for full list of recognised key word arguments.</span>
</span><span id="SimstockDataframe.__init__-118"><a href="#SimstockDataframe.__init__-118"><span class="linenos">118</span></a>
</span><span id="SimstockDataframe.__init__-119"><a href="#SimstockDataframe.__init__-119"><span class="linenos">119</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SimstockDataframe.__init__-120"><a href="#SimstockDataframe.__init__-120"><span class="linenos">120</span></a>        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span> 
</span><span id="SimstockDataframe.__init__-121"><a href="#SimstockDataframe.__init__-121"><span class="linenos">121</span></a>
</span><span id="SimstockDataframe.__init__-122"><a href="#SimstockDataframe.__init__-122"><span class="linenos">122</span></a>        <span class="c1"># If it is already a valid simstock dataframe</span>
</span><span id="SimstockDataframe.__init__-123"><a href="#SimstockDataframe.__init__-123"><span class="linenos">123</span></a>        <span class="c1"># then nothing further needs to be done</span>
</span><span id="SimstockDataframe.__init__-124"><a href="#SimstockDataframe.__init__-124"><span class="linenos">124</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">inputobject</span><span class="p">,</span> <span class="n">SimstockDataframe</span><span class="p">):</span>
</span><span id="SimstockDataframe.__init__-125"><a href="#SimstockDataframe.__init__-125"><span class="linenos">125</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_df</span> <span class="o">=</span> <span class="n">inputobject</span><span class="o">.</span><span class="n">_df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="SimstockDataframe.__init__-126"><a href="#SimstockDataframe.__init__-126"><span class="linenos">126</span></a>            <span class="k">return</span>
</span><span id="SimstockDataframe.__init__-127"><a href="#SimstockDataframe.__init__-127"><span class="linenos">127</span></a>            
</span><span id="SimstockDataframe.__init__-128"><a href="#SimstockDataframe.__init__-128"><span class="linenos">128</span></a>        <span class="c1"># If it is not already a pandas dataframe, then</span>
</span><span id="SimstockDataframe.__init__-129"><a href="#SimstockDataframe.__init__-129"><span class="linenos">129</span></a>        <span class="c1"># try and turn it into one</span>
</span><span id="SimstockDataframe.__init__-130"><a href="#SimstockDataframe.__init__-130"><span class="linenos">130</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">inputobject</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">):</span>
</span><span id="SimstockDataframe.__init__-131"><a href="#SimstockDataframe.__init__-131"><span class="linenos">131</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="SimstockDataframe.__init__-132"><a href="#SimstockDataframe.__init__-132"><span class="linenos">132</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">inputobject</span><span class="p">)</span>
</span><span id="SimstockDataframe.__init__-133"><a href="#SimstockDataframe.__init__-133"><span class="linenos">133</span></a>            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
</span><span id="SimstockDataframe.__init__-134"><a href="#SimstockDataframe.__init__-134"><span class="linenos">134</span></a>                <span class="n">errmsg</span> <span class="o">=</span> <span class="s2">&quot;Unable to create data frame from input data.&quot;</span>
</span><span id="SimstockDataframe.__init__-135"><a href="#SimstockDataframe.__init__-135"><span class="linenos">135</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">errmsg</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">exc</span>
</span><span id="SimstockDataframe.__init__-136"><a href="#SimstockDataframe.__init__-136"><span class="linenos">136</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="SimstockDataframe.__init__-137"><a href="#SimstockDataframe.__init__-137"><span class="linenos">137</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_df</span> <span class="o">=</span> <span class="n">inputobject</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="SimstockDataframe.__init__-138"><a href="#SimstockDataframe.__init__-138"><span class="linenos">138</span></a>
</span><span id="SimstockDataframe.__init__-139"><a href="#SimstockDataframe.__init__-139"><span class="linenos">139</span></a>        <span class="c1"># Check that an osgb column exists</span>
</span><span id="SimstockDataframe.__init__-140"><a href="#SimstockDataframe.__init__-140"><span class="linenos">140</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_validate_osgb_column</span><span class="p">()</span>
</span><span id="SimstockDataframe.__init__-141"><a href="#SimstockDataframe.__init__-141"><span class="linenos">141</span></a>
</span><span id="SimstockDataframe.__init__-142"><a href="#SimstockDataframe.__init__-142"><span class="linenos">142</span></a>        <span class="c1"># Check that the polygon column exists</span>
</span><span id="SimstockDataframe.__init__-143"><a href="#SimstockDataframe.__init__-143"><span class="linenos">143</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_validate_polygon_column</span><span class="p">()</span> 
</span><span id="SimstockDataframe.__init__-144"><a href="#SimstockDataframe.__init__-144"><span class="linenos">144</span></a>
</span><span id="SimstockDataframe.__init__-145"><a href="#SimstockDataframe.__init__-145"><span class="linenos">145</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_add_interiors_column</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Initialisation function for SimstockDataframe</p>

<h2 id="parameters">Parameters</h2>

<p><code>inputdata : Any</code></p>

<p>Can be a dictionary or a Pandas dataframe.
This input data must include data fields <code>osgb</code>, <code>shading</code>, <code>height</code>, <code>wwr</code>, <code>nofloors</code>, <code>construction</code>, <code>interiors</code></p>

<p><code>kwargs : dict</code></p>

<p>Dictionary of key-words arguments, see Simstockbase for full list of recognised key word arguments.</p>
</div>


                            </div>
                            <div id="SimstockDataframe.orientate_polygons" class="classattr">
                                        <input id="SimstockDataframe.orientate_polygons-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">orientate_polygons</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="SimstockDataframe.orientate_polygons-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SimstockDataframe.orientate_polygons"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SimstockDataframe.orientate_polygons-203"><a href="#SimstockDataframe.orientate_polygons-203"><span class="linenos">203</span></a>    <span class="k">def</span> <span class="nf">orientate_polygons</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SimstockDataframe.orientate_polygons-204"><a href="#SimstockDataframe.orientate_polygons-204"><span class="linenos">204</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SimstockDataframe.orientate_polygons-205"><a href="#SimstockDataframe.orientate_polygons-205"><span class="linenos">205</span></a><span class="sd">        Function to ensure that polygon exteriors and interiors </span>
</span><span id="SimstockDataframe.orientate_polygons-206"><a href="#SimstockDataframe.orientate_polygons-206"><span class="linenos">206</span></a><span class="sd">        are correctly orientated clockwise/anti-clockwise.</span>
</span><span id="SimstockDataframe.orientate_polygons-207"><a href="#SimstockDataframe.orientate_polygons-207"><span class="linenos">207</span></a>
</span><span id="SimstockDataframe.orientate_polygons-208"><a href="#SimstockDataframe.orientate_polygons-208"><span class="linenos">208</span></a><span class="sd">        Parameters</span>
</span><span id="SimstockDataframe.orientate_polygons-209"><a href="#SimstockDataframe.orientate_polygons-209"><span class="linenos">209</span></a><span class="sd">        ----------</span>
</span><span id="SimstockDataframe.orientate_polygons-210"><a href="#SimstockDataframe.orientate_polygons-210"><span class="linenos">210</span></a>
</span><span id="SimstockDataframe.orientate_polygons-211"><a href="#SimstockDataframe.orientate_polygons-211"><span class="linenos">211</span></a><span class="sd">        ``kwargs : dict``</span>
</span><span id="SimstockDataframe.orientate_polygons-212"><a href="#SimstockDataframe.orientate_polygons-212"><span class="linenos">212</span></a>
</span><span id="SimstockDataframe.orientate_polygons-213"><a href="#SimstockDataframe.orientate_polygons-213"><span class="linenos">213</span></a><span class="sd">        Dictionary of key-words arguments, see Simstockbase for full list of recognised key word arguments.</span>
</span><span id="SimstockDataframe.orientate_polygons-214"><a href="#SimstockDataframe.orientate_polygons-214"><span class="linenos">214</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SimstockDataframe.orientate_polygons-215"><a href="#SimstockDataframe.orientate_polygons-215"><span class="linenos">215</span></a>        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="SimstockDataframe.orientate_polygons-216"><a href="#SimstockDataframe.orientate_polygons-216"><span class="linenos">216</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;polygon&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;polygon&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">algs</span><span class="o">.</span><span class="n">_orientate</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Function to ensure that polygon exteriors and interiors 
are correctly orientated clockwise/anti-clockwise.</p>

<h2 id="parameters">Parameters</h2>

<p><code>kwargs : dict</code></p>

<p>Dictionary of key-words arguments, see Simstockbase for full list of recognised key word arguments.</p>
</div>


                            </div>
                            <div id="SimstockDataframe.remove_duplicate_coords" class="classattr">
                                        <input id="SimstockDataframe.remove_duplicate_coords-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">remove_duplicate_coords</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="SimstockDataframe.remove_duplicate_coords-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SimstockDataframe.remove_duplicate_coords"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SimstockDataframe.remove_duplicate_coords-218"><a href="#SimstockDataframe.remove_duplicate_coords-218"><span class="linenos">218</span></a>    <span class="k">def</span> <span class="nf">remove_duplicate_coords</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SimstockDataframe.remove_duplicate_coords-219"><a href="#SimstockDataframe.remove_duplicate_coords-219"><span class="linenos">219</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SimstockDataframe.remove_duplicate_coords-220"><a href="#SimstockDataframe.remove_duplicate_coords-220"><span class="linenos">220</span></a><span class="sd">        Function to remove duplicated coordinates from polygons, while ensuring the polygons remain valid shapely objects.</span>
</span><span id="SimstockDataframe.remove_duplicate_coords-221"><a href="#SimstockDataframe.remove_duplicate_coords-221"><span class="linenos">221</span></a>
</span><span id="SimstockDataframe.remove_duplicate_coords-222"><a href="#SimstockDataframe.remove_duplicate_coords-222"><span class="linenos">222</span></a><span class="sd">        Parameters</span>
</span><span id="SimstockDataframe.remove_duplicate_coords-223"><a href="#SimstockDataframe.remove_duplicate_coords-223"><span class="linenos">223</span></a><span class="sd">        ----------</span>
</span><span id="SimstockDataframe.remove_duplicate_coords-224"><a href="#SimstockDataframe.remove_duplicate_coords-224"><span class="linenos">224</span></a>
</span><span id="SimstockDataframe.remove_duplicate_coords-225"><a href="#SimstockDataframe.remove_duplicate_coords-225"><span class="linenos">225</span></a><span class="sd">        ``kwargs : dict``</span>
</span><span id="SimstockDataframe.remove_duplicate_coords-226"><a href="#SimstockDataframe.remove_duplicate_coords-226"><span class="linenos">226</span></a>
</span><span id="SimstockDataframe.remove_duplicate_coords-227"><a href="#SimstockDataframe.remove_duplicate_coords-227"><span class="linenos">227</span></a><span class="sd">        Dictionary of key-words arguments, see Simstockbase for full list of recognised key word arguments.</span>
</span><span id="SimstockDataframe.remove_duplicate_coords-228"><a href="#SimstockDataframe.remove_duplicate_coords-228"><span class="linenos">228</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SimstockDataframe.remove_duplicate_coords-229"><a href="#SimstockDataframe.remove_duplicate_coords-229"><span class="linenos">229</span></a>        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="SimstockDataframe.remove_duplicate_coords-230"><a href="#SimstockDataframe.remove_duplicate_coords-230"><span class="linenos">230</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;polygon&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;polygon&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span>
</span><span id="SimstockDataframe.remove_duplicate_coords-231"><a href="#SimstockDataframe.remove_duplicate_coords-231"><span class="linenos">231</span></a>            <span class="n">algs</span><span class="o">.</span><span class="n">_remove_duplicate_coords</span>
</span><span id="SimstockDataframe.remove_duplicate_coords-232"><a href="#SimstockDataframe.remove_duplicate_coords-232"><span class="linenos">232</span></a>            <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Function to remove duplicated coordinates from polygons, while ensuring the polygons remain valid shapely objects.</p>

<h2 id="parameters">Parameters</h2>

<p><code>kwargs : dict</code></p>

<p>Dictionary of key-words arguments, see Simstockbase for full list of recognised key word arguments.</p>
</div>


                            </div>
                            <div id="SimstockDataframe.polygon_topology" class="classattr">
                                        <input id="SimstockDataframe.polygon_topology-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">polygon_topology</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="SimstockDataframe.polygon_topology-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SimstockDataframe.polygon_topology"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SimstockDataframe.polygon_topology-234"><a href="#SimstockDataframe.polygon_topology-234"><span class="linenos">234</span></a>    <span class="k">def</span> <span class="nf">polygon_topology</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SimstockDataframe.polygon_topology-235"><a href="#SimstockDataframe.polygon_topology-235"><span class="linenos">235</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SimstockDataframe.polygon_topology-236"><a href="#SimstockDataframe.polygon_topology-236"><span class="linenos">236</span></a><span class="sd">        Function that checks whether polygons are touching or interecting each other. If any intersections are deteced, an error is thrown. </span>
</span><span id="SimstockDataframe.polygon_topology-237"><a href="#SimstockDataframe.polygon_topology-237"><span class="linenos">237</span></a>
</span><span id="SimstockDataframe.polygon_topology-238"><a href="#SimstockDataframe.polygon_topology-238"><span class="linenos">238</span></a><span class="sd">        This function adds an additonal column to the SimstockDataframe called ``touching``. The i*th* entry in ``touching`` lists the ``osbg`` values of all polygons touching the polygon in row i.</span>
</span><span id="SimstockDataframe.polygon_topology-239"><a href="#SimstockDataframe.polygon_topology-239"><span class="linenos">239</span></a>
</span><span id="SimstockDataframe.polygon_topology-240"><a href="#SimstockDataframe.polygon_topology-240"><span class="linenos">240</span></a><span class="sd">        Parameters</span>
</span><span id="SimstockDataframe.polygon_topology-241"><a href="#SimstockDataframe.polygon_topology-241"><span class="linenos">241</span></a><span class="sd">        ----------</span>
</span><span id="SimstockDataframe.polygon_topology-242"><a href="#SimstockDataframe.polygon_topology-242"><span class="linenos">242</span></a>
</span><span id="SimstockDataframe.polygon_topology-243"><a href="#SimstockDataframe.polygon_topology-243"><span class="linenos">243</span></a><span class="sd">        ``kwargs : dict``</span>
</span><span id="SimstockDataframe.polygon_topology-244"><a href="#SimstockDataframe.polygon_topology-244"><span class="linenos">244</span></a>
</span><span id="SimstockDataframe.polygon_topology-245"><a href="#SimstockDataframe.polygon_topology-245"><span class="linenos">245</span></a><span class="sd">        Dictionary of key-words arguments, see Simstockbase for full list of recognised key word arguments.</span>
</span><span id="SimstockDataframe.polygon_topology-246"><a href="#SimstockDataframe.polygon_topology-246"><span class="linenos">246</span></a>
</span><span id="SimstockDataframe.polygon_topology-247"><a href="#SimstockDataframe.polygon_topology-247"><span class="linenos">247</span></a><span class="sd">        Raises</span>
</span><span id="SimstockDataframe.polygon_topology-248"><a href="#SimstockDataframe.polygon_topology-248"><span class="linenos">248</span></a><span class="sd">        ------</span>
</span><span id="SimstockDataframe.polygon_topology-249"><a href="#SimstockDataframe.polygon_topology-249"><span class="linenos">249</span></a>
</span><span id="SimstockDataframe.polygon_topology-250"><a href="#SimstockDataframe.polygon_topology-250"><span class="linenos">250</span></a><span class="sd">        ``ValueError`` </span>
</span><span id="SimstockDataframe.polygon_topology-251"><a href="#SimstockDataframe.polygon_topology-251"><span class="linenos">251</span></a>
</span><span id="SimstockDataframe.polygon_topology-252"><a href="#SimstockDataframe.polygon_topology-252"><span class="linenos">252</span></a><span class="sd">        If any polygons are touching.</span>
</span><span id="SimstockDataframe.polygon_topology-253"><a href="#SimstockDataframe.polygon_topology-253"><span class="linenos">253</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SimstockDataframe.polygon_topology-254"><a href="#SimstockDataframe.polygon_topology-254"><span class="linenos">254</span></a>        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="SimstockDataframe.polygon_topology-255"><a href="#SimstockDataframe.polygon_topology-255"><span class="linenos">255</span></a>        <span class="n">length_range</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="o">.</span><span class="fm">__len__</span><span class="p">())</span>
</span><span id="SimstockDataframe.polygon_topology-256"><a href="#SimstockDataframe.polygon_topology-256"><span class="linenos">256</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;touching&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([]</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">length_range</span><span class="p">)</span>
</span><span id="SimstockDataframe.polygon_topology-257"><a href="#SimstockDataframe.polygon_topology-257"><span class="linenos">257</span></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">combinations</span><span class="p">(</span><span class="n">length_range</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
</span><span id="SimstockDataframe.polygon_topology-258"><a href="#SimstockDataframe.polygon_topology-258"><span class="linenos">258</span></a>            <span class="n">poly_i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;polygon&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span>
</span><span id="SimstockDataframe.polygon_topology-259"><a href="#SimstockDataframe.polygon_topology-259"><span class="linenos">259</span></a>            <span class="n">poly_j</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;polygon&#39;</span><span class="p">][</span><span class="n">j</span><span class="p">]</span>
</span><span id="SimstockDataframe.polygon_topology-260"><a href="#SimstockDataframe.polygon_topology-260"><span class="linenos">260</span></a>            <span class="n">osgb_i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;osgb&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span>
</span><span id="SimstockDataframe.polygon_topology-261"><a href="#SimstockDataframe.polygon_topology-261"><span class="linenos">261</span></a>            <span class="n">osgb_j</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;osgb&#39;</span><span class="p">][</span><span class="n">j</span><span class="p">]</span>
</span><span id="SimstockDataframe.polygon_topology-262"><a href="#SimstockDataframe.polygon_topology-262"><span class="linenos">262</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="SimstockDataframe.polygon_topology-263"><a href="#SimstockDataframe.polygon_topology-263"><span class="linenos">263</span></a>                <span class="k">if</span> <span class="n">algs</span><span class="o">.</span><span class="n">_is_touching</span><span class="p">(</span><span class="n">poly_i</span><span class="p">,</span> <span class="n">poly_j</span><span class="p">):</span>
</span><span id="SimstockDataframe.polygon_topology-264"><a href="#SimstockDataframe.polygon_topology-264"><span class="linenos">264</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;touching&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">osgb_j</span><span class="p">)</span>
</span><span id="SimstockDataframe.polygon_topology-265"><a href="#SimstockDataframe.polygon_topology-265"><span class="linenos">265</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;touching&#39;</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">osgb_i</span><span class="p">)</span>
</span><span id="SimstockDataframe.polygon_topology-266"><a href="#SimstockDataframe.polygon_topology-266"><span class="linenos">266</span></a>            <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
</span><span id="SimstockDataframe.polygon_topology-267"><a href="#SimstockDataframe.polygon_topology-267"><span class="linenos">267</span></a>                <span class="n">errmsg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Warning: OSGB </span><span class="si">{</span><span class="n">osgb_i</span><span class="si">}</span><span class="s2"> intersects </span><span class="si">{</span><span class="n">osgb_j</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="SimstockDataframe.polygon_topology-268"><a href="#SimstockDataframe.polygon_topology-268"><span class="linenos">268</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">errmsg</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">exc</span>
</span></pre></div>


            <div class="docstring"><p>Function that checks whether polygons are touching or interecting each other. If any intersections are deteced, an error is thrown. </p>

<p>This function adds an additonal column to the SimstockDataframe called <code>touching</code>. The i<em>th</em> entry in <code>touching</code> lists the <code>osbg</code> values of all polygons touching the polygon in row i.</p>

<h2 id="parameters">Parameters</h2>

<p><code>kwargs : dict</code></p>

<p>Dictionary of key-words arguments, see Simstockbase for full list of recognised key word arguments.</p>

<h2 id="raises">Raises</h2>

<p><code>ValueError</code> </p>

<p>If any polygons are touching.</p>
</div>


                            </div>
                            <div id="SimstockDataframe.polygon_tolerance" class="classattr">
                                        <input id="SimstockDataframe.polygon_tolerance-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">polygon_tolerance</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="SimstockDataframe.polygon_tolerance-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SimstockDataframe.polygon_tolerance"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SimstockDataframe.polygon_tolerance-270"><a href="#SimstockDataframe.polygon_tolerance-270"><span class="linenos">270</span></a>    <span class="k">def</span> <span class="nf">polygon_tolerance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SimstockDataframe.polygon_tolerance-271"><a href="#SimstockDataframe.polygon_tolerance-271"><span class="linenos">271</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SimstockDataframe.polygon_tolerance-272"><a href="#SimstockDataframe.polygon_tolerance-272"><span class="linenos">272</span></a><span class="sd">        A function to assess which polygons need simplifying, based on a user-specifed tolerance. This can be set via ``tol`` in ``kwargs``. </span>
</span><span id="SimstockDataframe.polygon_tolerance-273"><a href="#SimstockDataframe.polygon_tolerance-273"><span class="linenos">273</span></a>
</span><span id="SimstockDataframe.polygon_tolerance-274"><a href="#SimstockDataframe.polygon_tolerance-274"><span class="linenos">274</span></a><span class="sd">        This function adds a boolean column named ``simplify`` which specifies whether each polygon needs simplifying or not, based on the tolerance.</span>
</span><span id="SimstockDataframe.polygon_tolerance-275"><a href="#SimstockDataframe.polygon_tolerance-275"><span class="linenos">275</span></a>
</span><span id="SimstockDataframe.polygon_tolerance-276"><a href="#SimstockDataframe.polygon_tolerance-276"><span class="linenos">276</span></a><span class="sd">        Parameters</span>
</span><span id="SimstockDataframe.polygon_tolerance-277"><a href="#SimstockDataframe.polygon_tolerance-277"><span class="linenos">277</span></a><span class="sd">        ----------</span>
</span><span id="SimstockDataframe.polygon_tolerance-278"><a href="#SimstockDataframe.polygon_tolerance-278"><span class="linenos">278</span></a>
</span><span id="SimstockDataframe.polygon_tolerance-279"><a href="#SimstockDataframe.polygon_tolerance-279"><span class="linenos">279</span></a><span class="sd">        ``kwargs : dict``</span>
</span><span id="SimstockDataframe.polygon_tolerance-280"><a href="#SimstockDataframe.polygon_tolerance-280"><span class="linenos">280</span></a>
</span><span id="SimstockDataframe.polygon_tolerance-281"><a href="#SimstockDataframe.polygon_tolerance-281"><span class="linenos">281</span></a><span class="sd">        Dictionary of key-words arguments, see Simstockbase for full list of recognised key word arguments.</span>
</span><span id="SimstockDataframe.polygon_tolerance-282"><a href="#SimstockDataframe.polygon_tolerance-282"><span class="linenos">282</span></a>
</span><span id="SimstockDataframe.polygon_tolerance-283"><a href="#SimstockDataframe.polygon_tolerance-283"><span class="linenos">283</span></a><span class="sd">        Example</span>
</span><span id="SimstockDataframe.polygon_tolerance-284"><a href="#SimstockDataframe.polygon_tolerance-284"><span class="linenos">284</span></a><span class="sd">        -------</span>
</span><span id="SimstockDataframe.polygon_tolerance-285"><a href="#SimstockDataframe.polygon_tolerance-285"><span class="linenos">285</span></a>
</span><span id="SimstockDataframe.polygon_tolerance-286"><a href="#SimstockDataframe.polygon_tolerance-286"><span class="linenos">286</span></a><span class="sd">        &gt;&gt;&gt; sdf.polygon_toerance(tol=0.1)</span>
</span><span id="SimstockDataframe.polygon_tolerance-287"><a href="#SimstockDataframe.polygon_tolerance-287"><span class="linenos">287</span></a>
</span><span id="SimstockDataframe.polygon_tolerance-288"><a href="#SimstockDataframe.polygon_tolerance-288"><span class="linenos">288</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SimstockDataframe.polygon_tolerance-289"><a href="#SimstockDataframe.polygon_tolerance-289"><span class="linenos">289</span></a>        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="SimstockDataframe.polygon_tolerance-290"><a href="#SimstockDataframe.polygon_tolerance-290"><span class="linenos">290</span></a>        <span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">algs</span><span class="o">.</span><span class="n">_poly_tol</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tol</span><span class="p">)</span>
</span><span id="SimstockDataframe.polygon_tolerance-291"><a href="#SimstockDataframe.polygon_tolerance-291"><span class="linenos">291</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;simplify&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;polygon&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>A function to assess which polygons need simplifying, based on a user-specifed tolerance. This can be set via <code>tol</code> in <code>kwargs</code>. </p>

<p>This function adds a boolean column named <code>simplify</code> which specifies whether each polygon needs simplifying or not, based on the tolerance.</p>

<h2 id="parameters">Parameters</h2>

<p><code>kwargs : dict</code></p>

<p>Dictionary of key-words arguments, see Simstockbase for full list of recognised key word arguments.</p>

<h2 id="example">Example</h2>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">sdf</span><span class="o">.</span><span class="n">polygon_toerance</span><span class="p">(</span><span class="n">tol</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
</code></pre>
</div>
</div>


                            </div>
                            <div id="SimstockDataframe.polygon_simplification" class="classattr">
                                        <input id="SimstockDataframe.polygon_simplification-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">polygon_simplification</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="SimstockDataframe.polygon_simplification-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SimstockDataframe.polygon_simplification"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SimstockDataframe.polygon_simplification-360"><a href="#SimstockDataframe.polygon_simplification-360"><span class="linenos">360</span></a>    <span class="k">def</span> <span class="nf">polygon_simplification</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SimstockDataframe.polygon_simplification-361"><a href="#SimstockDataframe.polygon_simplification-361"><span class="linenos">361</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SimstockDataframe.polygon_simplification-362"><a href="#SimstockDataframe.polygon_simplification-362"><span class="linenos">362</span></a><span class="sd">        Function that simplifies polygons, by e.g. exploiting transitivity of points and merging points within tolerances. </span>
</span><span id="SimstockDataframe.polygon_simplification-363"><a href="#SimstockDataframe.polygon_simplification-363"><span class="linenos">363</span></a>
</span><span id="SimstockDataframe.polygon_simplification-364"><a href="#SimstockDataframe.polygon_simplification-364"><span class="linenos">364</span></a><span class="sd">        Parameters</span>
</span><span id="SimstockDataframe.polygon_simplification-365"><a href="#SimstockDataframe.polygon_simplification-365"><span class="linenos">365</span></a><span class="sd">        ----------</span>
</span><span id="SimstockDataframe.polygon_simplification-366"><a href="#SimstockDataframe.polygon_simplification-366"><span class="linenos">366</span></a>
</span><span id="SimstockDataframe.polygon_simplification-367"><a href="#SimstockDataframe.polygon_simplification-367"><span class="linenos">367</span></a><span class="sd">        ``kwargs : dict``</span>
</span><span id="SimstockDataframe.polygon_simplification-368"><a href="#SimstockDataframe.polygon_simplification-368"><span class="linenos">368</span></a>
</span><span id="SimstockDataframe.polygon_simplification-369"><a href="#SimstockDataframe.polygon_simplification-369"><span class="linenos">369</span></a><span class="sd">        Dictionary of key-words arguments, see Simstockbase for full list of recognised key word arguments.</span>
</span><span id="SimstockDataframe.polygon_simplification-370"><a href="#SimstockDataframe.polygon_simplification-370"><span class="linenos">370</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SimstockDataframe.polygon_simplification-371"><a href="#SimstockDataframe.polygon_simplification-371"><span class="linenos">371</span></a>        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="SimstockDataframe.polygon_simplification-372"><a href="#SimstockDataframe.polygon_simplification-372"><span class="linenos">372</span></a>        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;simplify&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="SimstockDataframe.polygon_simplification-373"><a href="#SimstockDataframe.polygon_simplification-373"><span class="linenos">373</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_polygon_within_hole</span><span class="p">()</span>
</span><span id="SimstockDataframe.polygon_simplification-374"><a href="#SimstockDataframe.polygon_simplification-374"><span class="linenos">374</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_polygon_simplify</span><span class="p">()</span>
</span><span id="SimstockDataframe.polygon_simplification-375"><a href="#SimstockDataframe.polygon_simplification-375"><span class="linenos">375</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
</span><span id="SimstockDataframe.polygon_simplification-376"><a href="#SimstockDataframe.polygon_simplification-376"><span class="linenos">376</span></a>                <span class="o">~</span><span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;polygon&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="kc">False</span><span class="p">])</span>
</span><span id="SimstockDataframe.polygon_simplification-377"><a href="#SimstockDataframe.polygon_simplification-377"><span class="linenos">377</span></a>                <span class="p">]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="SimstockDataframe.polygon_simplification-378"><a href="#SimstockDataframe.polygon_simplification-378"><span class="linenos">378</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_polygon_buffer</span><span class="p">()</span>
</span><span id="SimstockDataframe.polygon_simplification-379"><a href="#SimstockDataframe.polygon_simplification-379"><span class="linenos">379</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">polygon_tolerance</span><span class="p">()</span>
</span><span id="SimstockDataframe.polygon_simplification-380"><a href="#SimstockDataframe.polygon_simplification-380"><span class="linenos">380</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;simplify&#39;</span><span class="p">,</span> <span class="s1">&#39;poly_within_hole&#39;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Function that simplifies polygons, by e.g. exploiting transitivity of points and merging points within tolerances. </p>

<h2 id="parameters">Parameters</h2>

<p><code>kwargs : dict</code></p>

<p>Dictionary of key-words arguments, see Simstockbase for full list of recognised key word arguments.</p>
</div>


                            </div>
                            <div id="SimstockDataframe.collinear_exterior" class="classattr">
                                        <input id="SimstockDataframe.collinear_exterior-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">collinear_exterior</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="SimstockDataframe.collinear_exterior-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SimstockDataframe.collinear_exterior"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SimstockDataframe.collinear_exterior-383"><a href="#SimstockDataframe.collinear_exterior-383"><span class="linenos">383</span></a>    <span class="k">def</span> <span class="nf">collinear_exterior</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SimstockDataframe.collinear_exterior-384"><a href="#SimstockDataframe.collinear_exterior-384"><span class="linenos">384</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SimstockDataframe.collinear_exterior-385"><a href="#SimstockDataframe.collinear_exterior-385"><span class="linenos">385</span></a><span class="sd">        Function that removes collinear points from polygons and determines exterior surfaces.</span>
</span><span id="SimstockDataframe.collinear_exterior-386"><a href="#SimstockDataframe.collinear_exterior-386"><span class="linenos">386</span></a>
</span><span id="SimstockDataframe.collinear_exterior-387"><a href="#SimstockDataframe.collinear_exterior-387"><span class="linenos">387</span></a><span class="sd">        Parameters</span>
</span><span id="SimstockDataframe.collinear_exterior-388"><a href="#SimstockDataframe.collinear_exterior-388"><span class="linenos">388</span></a><span class="sd">        ----------</span>
</span><span id="SimstockDataframe.collinear_exterior-389"><a href="#SimstockDataframe.collinear_exterior-389"><span class="linenos">389</span></a>
</span><span id="SimstockDataframe.collinear_exterior-390"><a href="#SimstockDataframe.collinear_exterior-390"><span class="linenos">390</span></a><span class="sd">        ``kwargs : dict``</span>
</span><span id="SimstockDataframe.collinear_exterior-391"><a href="#SimstockDataframe.collinear_exterior-391"><span class="linenos">391</span></a>
</span><span id="SimstockDataframe.collinear_exterior-392"><a href="#SimstockDataframe.collinear_exterior-392"><span class="linenos">392</span></a><span class="sd">        Dictionary of key-words arguments, see Simstockbase for full list of recognised key word arguments.</span>
</span><span id="SimstockDataframe.collinear_exterior-393"><a href="#SimstockDataframe.collinear_exterior-393"><span class="linenos">393</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SimstockDataframe.collinear_exterior-394"><a href="#SimstockDataframe.collinear_exterior-394"><span class="linenos">394</span></a>        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="SimstockDataframe.collinear_exterior-395"><a href="#SimstockDataframe.collinear_exterior-395"><span class="linenos">395</span></a>        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="o">.</span><span class="n">itertuples</span><span class="p">():</span>
</span><span id="SimstockDataframe.collinear_exterior-396"><a href="#SimstockDataframe.collinear_exterior-396"><span class="linenos">396</span></a>            <span class="n">osgb_touching</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">touching</span>
</span><span id="SimstockDataframe.collinear_exterior-397"><a href="#SimstockDataframe.collinear_exterior-397"><span class="linenos">397</span></a>            <span class="n">polygon</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">polygon</span>
</span><span id="SimstockDataframe.collinear_exterior-398"><a href="#SimstockDataframe.collinear_exterior-398"><span class="linenos">398</span></a>            <span class="n">osgb</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">osgb</span>
</span><span id="SimstockDataframe.collinear_exterior-399"><a href="#SimstockDataframe.collinear_exterior-399"><span class="linenos">399</span></a>            <span class="k">if</span> <span class="n">osgb_touching</span><span class="p">:</span>
</span><span id="SimstockDataframe.collinear_exterior-400"><a href="#SimstockDataframe.collinear_exterior-400"><span class="linenos">400</span></a>                <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">osgb_touching</span><span class="p">:</span>
</span><span id="SimstockDataframe.collinear_exterior-401"><a href="#SimstockDataframe.collinear_exterior-401"><span class="linenos">401</span></a>                    <span class="n">t_polygon</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
</span><span id="SimstockDataframe.collinear_exterior-402"><a href="#SimstockDataframe.collinear_exterior-402"><span class="linenos">402</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;osgb&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">t</span><span class="p">,</span> <span class="s1">&#39;polygon&#39;</span>
</span><span id="SimstockDataframe.collinear_exterior-403"><a href="#SimstockDataframe.collinear_exterior-403"><span class="linenos">403</span></a>                        <span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="SimstockDataframe.collinear_exterior-404"><a href="#SimstockDataframe.collinear_exterior-404"><span class="linenos">404</span></a>                    <span class="n">partition</span> <span class="o">=</span> <span class="n">polygon</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">t_polygon</span><span class="p">)</span>
</span><span id="SimstockDataframe.collinear_exterior-405"><a href="#SimstockDataframe.collinear_exterior-405"><span class="linenos">405</span></a>                    <span class="k">if</span> <span class="n">partition</span><span class="o">.</span><span class="n">geom_type</span> <span class="o">==</span> <span class="s1">&#39;MultiLineString&#39;</span><span class="p">:</span>
</span><span id="SimstockDataframe.collinear_exterior-406"><a href="#SimstockDataframe.collinear_exterior-406"><span class="linenos">406</span></a>                        <span class="n">partition</span> <span class="o">=</span> <span class="n">linemerge</span><span class="p">(</span><span class="n">partition</span><span class="p">)</span>
</span><span id="SimstockDataframe.collinear_exterior-407"><a href="#SimstockDataframe.collinear_exterior-407"><span class="linenos">407</span></a>                    <span class="n">partition_collinear_points</span> <span class="o">=</span> <span class="n">algs</span><span class="o">.</span><span class="n">_collinear_points_list</span><span class="p">(</span>
</span><span id="SimstockDataframe.collinear_exterior-408"><a href="#SimstockDataframe.collinear_exterior-408"><span class="linenos">408</span></a>                        <span class="n">partition</span><span class="p">)</span>
</span><span id="SimstockDataframe.collinear_exterior-409"><a href="#SimstockDataframe.collinear_exterior-409"><span class="linenos">409</span></a>                    <span class="k">if</span> <span class="n">partition_collinear_points</span><span class="p">:</span>
</span><span id="SimstockDataframe.collinear_exterior-410"><a href="#SimstockDataframe.collinear_exterior-410"><span class="linenos">410</span></a>                        <span class="n">polygon</span> <span class="o">=</span> <span class="n">algs</span><span class="o">.</span><span class="n">_update_polygon</span><span class="p">(</span>
</span><span id="SimstockDataframe.collinear_exterior-411"><a href="#SimstockDataframe.collinear_exterior-411"><span class="linenos">411</span></a>                            <span class="n">polygon</span><span class="p">,</span> <span class="n">partition_collinear_points</span><span class="p">)</span>
</span><span id="SimstockDataframe.collinear_exterior-412"><a href="#SimstockDataframe.collinear_exterior-412"><span class="linenos">412</span></a>                        <span class="n">t_polygon</span> <span class="o">=</span> <span class="n">algs</span><span class="o">.</span><span class="n">_update_polygon</span><span class="p">(</span>
</span><span id="SimstockDataframe.collinear_exterior-413"><a href="#SimstockDataframe.collinear_exterior-413"><span class="linenos">413</span></a>                            <span class="n">t_polygon</span><span class="p">,</span> <span class="n">partition_collinear_points</span><span class="p">)</span>
</span><span id="SimstockDataframe.collinear_exterior-414"><a href="#SimstockDataframe.collinear_exterior-414"><span class="linenos">414</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
</span><span id="SimstockDataframe.collinear_exterior-415"><a href="#SimstockDataframe.collinear_exterior-415"><span class="linenos">415</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;osgb&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">t</span><span class="p">,</span> <span class="s1">&#39;polygon&#39;</span>
</span><span id="SimstockDataframe.collinear_exterior-416"><a href="#SimstockDataframe.collinear_exterior-416"><span class="linenos">416</span></a>                            <span class="p">]</span> <span class="o">=</span> <span class="n">t_polygon</span>
</span><span id="SimstockDataframe.collinear_exterior-417"><a href="#SimstockDataframe.collinear_exterior-417"><span class="linenos">417</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
</span><span id="SimstockDataframe.collinear_exterior-418"><a href="#SimstockDataframe.collinear_exterior-418"><span class="linenos">418</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;osgb&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">osgb</span><span class="p">,</span> <span class="s1">&#39;polygon&#39;</span>
</span><span id="SimstockDataframe.collinear_exterior-419"><a href="#SimstockDataframe.collinear_exterior-419"><span class="linenos">419</span></a>                            <span class="p">]</span> <span class="o">=</span> <span class="n">polygon</span>
</span><span id="SimstockDataframe.collinear_exterior-420"><a href="#SimstockDataframe.collinear_exterior-420"><span class="linenos">420</span></a>                        
</span><span id="SimstockDataframe.collinear_exterior-421"><a href="#SimstockDataframe.collinear_exterior-421"><span class="linenos">421</span></a>        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="o">.</span><span class="n">itertuples</span><span class="p">():</span>
</span><span id="SimstockDataframe.collinear_exterior-422"><a href="#SimstockDataframe.collinear_exterior-422"><span class="linenos">422</span></a>            <span class="n">osgb_touching</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">touching</span>
</span><span id="SimstockDataframe.collinear_exterior-423"><a href="#SimstockDataframe.collinear_exterior-423"><span class="linenos">423</span></a>            <span class="n">polygon</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">polygon</span>
</span><span id="SimstockDataframe.collinear_exterior-424"><a href="#SimstockDataframe.collinear_exterior-424"><span class="linenos">424</span></a>            <span class="n">osgb</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">osgb</span>
</span><span id="SimstockDataframe.collinear_exterior-425"><a href="#SimstockDataframe.collinear_exterior-425"><span class="linenos">425</span></a>            <span class="k">if</span> <span class="n">osgb_touching</span><span class="p">:</span>
</span><span id="SimstockDataframe.collinear_exterior-426"><a href="#SimstockDataframe.collinear_exterior-426"><span class="linenos">426</span></a>                <span class="n">outer_ring</span> <span class="o">=</span> <span class="n">LineString</span><span class="p">(</span><span class="n">polygon</span><span class="o">.</span><span class="n">exterior</span><span class="p">)</span>
</span><span id="SimstockDataframe.collinear_exterior-427"><a href="#SimstockDataframe.collinear_exterior-427"><span class="linenos">427</span></a>                <span class="n">inner_ring</span> <span class="o">=</span> <span class="n">MultiLineString</span><span class="p">(</span><span class="n">polygon</span><span class="o">.</span><span class="n">interiors</span><span class="p">)</span>
</span><span id="SimstockDataframe.collinear_exterior-428"><a href="#SimstockDataframe.collinear_exterior-428"><span class="linenos">428</span></a>                <span class="n">exposed</span> <span class="o">=</span> <span class="n">unary_union</span><span class="p">((</span><span class="n">outer_ring</span><span class="p">,</span> <span class="n">inner_ring</span><span class="p">))</span>
</span><span id="SimstockDataframe.collinear_exterior-429"><a href="#SimstockDataframe.collinear_exterior-429"><span class="linenos">429</span></a>                <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">osgb_touching</span><span class="p">:</span>
</span><span id="SimstockDataframe.collinear_exterior-430"><a href="#SimstockDataframe.collinear_exterior-430"><span class="linenos">430</span></a>                    <span class="n">t_polygon</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
</span><span id="SimstockDataframe.collinear_exterior-431"><a href="#SimstockDataframe.collinear_exterior-431"><span class="linenos">431</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;osgb&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">t</span><span class="p">,</span> <span class="s1">&#39;polygon&#39;</span>
</span><span id="SimstockDataframe.collinear_exterior-432"><a href="#SimstockDataframe.collinear_exterior-432"><span class="linenos">432</span></a>                        <span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="SimstockDataframe.collinear_exterior-433"><a href="#SimstockDataframe.collinear_exterior-433"><span class="linenos">433</span></a>                    <span class="n">exposed</span> <span class="o">-=</span> <span class="n">polygon</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">t_polygon</span><span class="p">)</span>
</span><span id="SimstockDataframe.collinear_exterior-434"><a href="#SimstockDataframe.collinear_exterior-434"><span class="linenos">434</span></a>                <span class="n">exposed_collinear_points</span> <span class="o">=</span> <span class="n">algs</span><span class="o">.</span><span class="n">_collinear_points_list</span><span class="p">(</span><span class="n">exposed</span><span class="p">)</span>
</span><span id="SimstockDataframe.collinear_exterior-435"><a href="#SimstockDataframe.collinear_exterior-435"><span class="linenos">435</span></a>                <span class="k">if</span> <span class="n">exposed_collinear_points</span><span class="p">:</span>
</span><span id="SimstockDataframe.collinear_exterior-436"><a href="#SimstockDataframe.collinear_exterior-436"><span class="linenos">436</span></a>                    <span class="n">exposed</span> <span class="o">=</span> <span class="n">algs</span><span class="o">.</span><span class="n">_update_exposed</span><span class="p">(</span><span class="n">exposed</span><span class="p">,</span> <span class="n">exposed_collinear_points</span><span class="p">)</span>
</span><span id="SimstockDataframe.collinear_exterior-437"><a href="#SimstockDataframe.collinear_exterior-437"><span class="linenos">437</span></a>                    <span class="n">polygon</span> <span class="o">=</span> <span class="n">algs</span><span class="o">.</span><span class="n">_update_polygon</span><span class="p">(</span><span class="n">polygon</span><span class="p">,</span> <span class="n">exposed_collinear_points</span><span class="p">)</span>
</span><span id="SimstockDataframe.collinear_exterior-438"><a href="#SimstockDataframe.collinear_exterior-438"><span class="linenos">438</span></a>                <span class="n">horizontal</span> <span class="o">=</span> <span class="n">algs</span><span class="o">.</span><span class="n">_remove_collinear_points_horizontal</span><span class="p">(</span><span class="n">polygon</span><span class="p">)</span>
</span><span id="SimstockDataframe.collinear_exterior-439"><a href="#SimstockDataframe.collinear_exterior-439"><span class="linenos">439</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="SimstockDataframe.collinear_exterior-440"><a href="#SimstockDataframe.collinear_exterior-440"><span class="linenos">440</span></a>                <span class="n">polygon</span> <span class="o">=</span> <span class="n">algs</span><span class="o">.</span><span class="n">_remove_collinear_points_horizontal</span><span class="p">(</span><span class="n">polygon</span><span class="p">)</span>
</span><span id="SimstockDataframe.collinear_exterior-441"><a href="#SimstockDataframe.collinear_exterior-441"><span class="linenos">441</span></a>                <span class="n">horizontal</span> <span class="o">=</span> <span class="n">polygon</span>
</span><span id="SimstockDataframe.collinear_exterior-442"><a href="#SimstockDataframe.collinear_exterior-442"><span class="linenos">442</span></a>                <span class="n">outer_ring</span> <span class="o">=</span> <span class="n">LineString</span><span class="p">(</span><span class="n">polygon</span><span class="o">.</span><span class="n">exterior</span><span class="p">)</span>
</span><span id="SimstockDataframe.collinear_exterior-443"><a href="#SimstockDataframe.collinear_exterior-443"><span class="linenos">443</span></a>                <span class="n">inner_ring</span> <span class="o">=</span> <span class="n">MultiLineString</span><span class="p">(</span><span class="n">polygon</span><span class="o">.</span><span class="n">interiors</span><span class="p">)</span>
</span><span id="SimstockDataframe.collinear_exterior-444"><a href="#SimstockDataframe.collinear_exterior-444"><span class="linenos">444</span></a>                <span class="n">exposed</span> <span class="o">=</span> <span class="n">unary_union</span><span class="p">((</span><span class="n">outer_ring</span><span class="p">,</span> <span class="n">inner_ring</span><span class="p">))</span>
</span><span id="SimstockDataframe.collinear_exterior-445"><a href="#SimstockDataframe.collinear_exterior-445"><span class="linenos">445</span></a>
</span><span id="SimstockDataframe.collinear_exterior-446"><a href="#SimstockDataframe.collinear_exterior-446"><span class="linenos">446</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
</span><span id="SimstockDataframe.collinear_exterior-447"><a href="#SimstockDataframe.collinear_exterior-447"><span class="linenos">447</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;osgb&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">osgb</span><span class="p">,</span> <span class="s1">&#39;polygon_exposed_wall&#39;</span>
</span><span id="SimstockDataframe.collinear_exterior-448"><a href="#SimstockDataframe.collinear_exterior-448"><span class="linenos">448</span></a>                <span class="p">]</span> <span class="o">=</span> <span class="n">exposed</span>
</span><span id="SimstockDataframe.collinear_exterior-449"><a href="#SimstockDataframe.collinear_exterior-449"><span class="linenos">449</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
</span><span id="SimstockDataframe.collinear_exterior-450"><a href="#SimstockDataframe.collinear_exterior-450"><span class="linenos">450</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;osgb&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">osgb</span><span class="p">,</span> <span class="s1">&#39;polygon&#39;</span>
</span><span id="SimstockDataframe.collinear_exterior-451"><a href="#SimstockDataframe.collinear_exterior-451"><span class="linenos">451</span></a>                <span class="p">]</span> <span class="o">=</span> <span class="n">polygon</span>
</span><span id="SimstockDataframe.collinear_exterior-452"><a href="#SimstockDataframe.collinear_exterior-452"><span class="linenos">452</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
</span><span id="SimstockDataframe.collinear_exterior-453"><a href="#SimstockDataframe.collinear_exterior-453"><span class="linenos">453</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;osgb&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">osgb</span><span class="p">,</span> <span class="s1">&#39;polygon_horizontal&#39;</span>
</span><span id="SimstockDataframe.collinear_exterior-454"><a href="#SimstockDataframe.collinear_exterior-454"><span class="linenos">454</span></a>                <span class="p">]</span> <span class="o">=</span> <span class="n">horizontal</span>
</span></pre></div>


            <div class="docstring"><p>Function that removes collinear points from polygons and determines exterior surfaces.</p>

<h2 id="parameters">Parameters</h2>

<p><code>kwargs : dict</code></p>

<p>Dictionary of key-words arguments, see Simstockbase for full list of recognised key word arguments.</p>
</div>


                            </div>
                            <div id="SimstockDataframe.preprocessing" class="classattr">
                                        <input id="SimstockDataframe.preprocessing-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">preprocessing</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="SimstockDataframe.preprocessing-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SimstockDataframe.preprocessing"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SimstockDataframe.preprocessing-456"><a href="#SimstockDataframe.preprocessing-456"><span class="linenos">456</span></a>    <span class="k">def</span> <span class="nf">preprocessing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SimstockDataframe.preprocessing-457"><a href="#SimstockDataframe.preprocessing-457"><span class="linenos">457</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SimstockDataframe.preprocessing-458"><a href="#SimstockDataframe.preprocessing-458"><span class="linenos">458</span></a><span class="sd">        Function to perform default processing on the SimstockDataframe to ready it for ``IDF`` creation. </span>
</span><span id="SimstockDataframe.preprocessing-459"><a href="#SimstockDataframe.preprocessing-459"><span class="linenos">459</span></a>
</span><span id="SimstockDataframe.preprocessing-460"><a href="#SimstockDataframe.preprocessing-460"><span class="linenos">460</span></a><span class="sd">        This function first checks that all polygons are correctly orientated. It then proceeds to remove duplicate coordinates and simplify polygons while ensuring that polygons do not intersect each other.</span>
</span><span id="SimstockDataframe.preprocessing-461"><a href="#SimstockDataframe.preprocessing-461"><span class="linenos">461</span></a>
</span><span id="SimstockDataframe.preprocessing-462"><a href="#SimstockDataframe.preprocessing-462"><span class="linenos">462</span></a><span class="sd">        Parameters</span>
</span><span id="SimstockDataframe.preprocessing-463"><a href="#SimstockDataframe.preprocessing-463"><span class="linenos">463</span></a><span class="sd">        ----------</span>
</span><span id="SimstockDataframe.preprocessing-464"><a href="#SimstockDataframe.preprocessing-464"><span class="linenos">464</span></a>
</span><span id="SimstockDataframe.preprocessing-465"><a href="#SimstockDataframe.preprocessing-465"><span class="linenos">465</span></a><span class="sd">        ``kwargs : dict``</span>
</span><span id="SimstockDataframe.preprocessing-466"><a href="#SimstockDataframe.preprocessing-466"><span class="linenos">466</span></a>
</span><span id="SimstockDataframe.preprocessing-467"><a href="#SimstockDataframe.preprocessing-467"><span class="linenos">467</span></a><span class="sd">        Dictionary of key-words arguments, see Simstockbase for full list of recognised key word arguments.</span>
</span><span id="SimstockDataframe.preprocessing-468"><a href="#SimstockDataframe.preprocessing-468"><span class="linenos">468</span></a>
</span><span id="SimstockDataframe.preprocessing-469"><a href="#SimstockDataframe.preprocessing-469"><span class="linenos">469</span></a><span class="sd">        Raises</span>
</span><span id="SimstockDataframe.preprocessing-470"><a href="#SimstockDataframe.preprocessing-470"><span class="linenos">470</span></a><span class="sd">        ------</span>
</span><span id="SimstockDataframe.preprocessing-471"><a href="#SimstockDataframe.preprocessing-471"><span class="linenos">471</span></a>
</span><span id="SimstockDataframe.preprocessing-472"><a href="#SimstockDataframe.preprocessing-472"><span class="linenos">472</span></a><span class="sd">        ``ValueError``</span>
</span><span id="SimstockDataframe.preprocessing-473"><a href="#SimstockDataframe.preprocessing-473"><span class="linenos">473</span></a>
</span><span id="SimstockDataframe.preprocessing-474"><a href="#SimstockDataframe.preprocessing-474"><span class="linenos">474</span></a><span class="sd">        If polygons cannot be simplified without causing intersection.</span>
</span><span id="SimstockDataframe.preprocessing-475"><a href="#SimstockDataframe.preprocessing-475"><span class="linenos">475</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SimstockDataframe.preprocessing-476"><a href="#SimstockDataframe.preprocessing-476"><span class="linenos">476</span></a>        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="SimstockDataframe.preprocessing-477"><a href="#SimstockDataframe.preprocessing-477"><span class="linenos">477</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">orientate_polygons</span><span class="p">()</span>
</span><span id="SimstockDataframe.preprocessing-478"><a href="#SimstockDataframe.preprocessing-478"><span class="linenos">478</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">remove_duplicate_coords</span><span class="p">()</span>
</span><span id="SimstockDataframe.preprocessing-479"><a href="#SimstockDataframe.preprocessing-479"><span class="linenos">479</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">polygon_topology</span><span class="p">()</span>
</span><span id="SimstockDataframe.preprocessing-480"><a href="#SimstockDataframe.preprocessing-480"><span class="linenos">480</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">polygon_tolerance</span><span class="p">()</span>
</span><span id="SimstockDataframe.preprocessing-481"><a href="#SimstockDataframe.preprocessing-481"><span class="linenos">481</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">polygon_simplification</span><span class="p">()</span>
</span><span id="SimstockDataframe.preprocessing-482"><a href="#SimstockDataframe.preprocessing-482"><span class="linenos">482</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">polygon_topology</span><span class="p">()</span>
</span><span id="SimstockDataframe.preprocessing-483"><a href="#SimstockDataframe.preprocessing-483"><span class="linenos">483</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">collinear_exterior</span><span class="p">()</span>
</span><span id="SimstockDataframe.preprocessing-484"><a href="#SimstockDataframe.preprocessing-484"><span class="linenos">484</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">polygon_topology</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Function to perform default processing on the SimstockDataframe to ready it for <code>IDF</code> creation. </p>

<p>This function first checks that all polygons are correctly orientated. It then proceeds to remove duplicate coordinates and simplify polygons while ensuring that polygons do not intersect each other.</p>

<h2 id="parameters">Parameters</h2>

<p><code>kwargs : dict</code></p>

<p>Dictionary of key-words arguments, see Simstockbase for full list of recognised key word arguments.</p>

<h2 id="raises">Raises</h2>

<p><code>ValueError</code></p>

<p>If polygons cannot be simplified without causing intersection.</p>
</div>


                            </div>
                </section>
                <section id="read_csv">
                            <input id="read_csv-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">read_csv</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">path</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="n"><a href="#SimstockDataframe">src.simstock.SimstockDataframe</a></span>:</span></span>

                <label class="view-source-button" for="read_csv-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#read_csv"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="read_csv-15"><a href="#read_csv-15"><span class="linenos">15</span></a><span class="k">def</span> <span class="nf">read_csv</span><span class="p">(</span><span class="n">path</span> <span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SimstockDataframe</span><span class="p">:</span>
</span><span id="read_csv-16"><a href="#read_csv-16"><span class="linenos">16</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="read_csv-17"><a href="#read_csv-17"><span class="linenos">17</span></a><span class="sd">    Function to read in a ``csv`` file and return a ``SimstockDataframe,</span>
</span><span id="read_csv-18"><a href="#read_csv-18"><span class="linenos">18</span></a><span class="sd">    i.e. it must contain a ``polygon`` column or key or field containing</span>
</span><span id="read_csv-19"><a href="#read_csv-19"><span class="linenos">19</span></a><span class="sd">    shapely geometry data or similar.</span>
</span><span id="read_csv-20"><a href="#read_csv-20"><span class="linenos">20</span></a>
</span><span id="read_csv-21"><a href="#read_csv-21"><span class="linenos">21</span></a><span class="sd">    Parameters</span>
</span><span id="read_csv-22"><a href="#read_csv-22"><span class="linenos">22</span></a><span class="sd">    ----------</span>
</span><span id="read_csv-23"><a href="#read_csv-23"><span class="linenos">23</span></a>
</span><span id="read_csv-24"><a href="#read_csv-24"><span class="linenos">24</span></a><span class="sd">    ``path : str``</span>
</span><span id="read_csv-25"><a href="#read_csv-25"><span class="linenos">25</span></a><span class="sd">        The file path including the ``csv`` file</span>
</span><span id="read_csv-26"><a href="#read_csv-26"><span class="linenos">26</span></a>
</span><span id="read_csv-27"><a href="#read_csv-27"><span class="linenos">27</span></a><span class="sd">    ``kwargs : dict``</span>
</span><span id="read_csv-28"><a href="#read_csv-28"><span class="linenos">28</span></a><span class="sd">        optional keyword argumetns to be passed to the</span>
</span><span id="read_csv-29"><a href="#read_csv-29"><span class="linenos">29</span></a><span class="sd">        SimstockDataframe initialiser. See SimstockDataframe</span>
</span><span id="read_csv-30"><a href="#read_csv-30"><span class="linenos">30</span></a><span class="sd">        docs for details of allowed arguments.</span>
</span><span id="read_csv-31"><a href="#read_csv-31"><span class="linenos">31</span></a>
</span><span id="read_csv-32"><a href="#read_csv-32"><span class="linenos">32</span></a><span class="sd">    Returns</span>
</span><span id="read_csv-33"><a href="#read_csv-33"><span class="linenos">33</span></a><span class="sd">    -------</span>
</span><span id="read_csv-34"><a href="#read_csv-34"><span class="linenos">34</span></a>
</span><span id="read_csv-35"><a href="#read_csv-35"><span class="linenos">35</span></a><span class="sd">    ``sdf : SimstockDataframe``</span>
</span><span id="read_csv-36"><a href="#read_csv-36"><span class="linenos">36</span></a><span class="sd">        See SimstockDataframe docs for full list of attributes</span>
</span><span id="read_csv-37"><a href="#read_csv-37"><span class="linenos">37</span></a><span class="sd">        and methods.</span>
</span><span id="read_csv-38"><a href="#read_csv-38"><span class="linenos">38</span></a>
</span><span id="read_csv-39"><a href="#read_csv-39"><span class="linenos">39</span></a><span class="sd">    Raises</span>
</span><span id="read_csv-40"><a href="#read_csv-40"><span class="linenos">40</span></a><span class="sd">    ------</span>
</span><span id="read_csv-41"><a href="#read_csv-41"><span class="linenos">41</span></a>
</span><span id="read_csv-42"><a href="#read_csv-42"><span class="linenos">42</span></a><span class="sd">    ``TypeError``</span>
</span><span id="read_csv-43"><a href="#read_csv-43"><span class="linenos">43</span></a><span class="sd">    If ``csv`` file does not conform to Simstock standards.</span>
</span><span id="read_csv-44"><a href="#read_csv-44"><span class="linenos">44</span></a>
</span><span id="read_csv-45"><a href="#read_csv-45"><span class="linenos">45</span></a><span class="sd">    Dictionary of key-words arguments to be passed to the SimstockDataframe</span>
</span><span id="read_csv-46"><a href="#read_csv-46"><span class="linenos">46</span></a><span class="sd">    constructor. See Simstockbase for full list of recognised key word</span>
</span><span id="read_csv-47"><a href="#read_csv-47"><span class="linenos">47</span></a><span class="sd">    arguments.</span>
</span><span id="read_csv-48"><a href="#read_csv-48"><span class="linenos">48</span></a>
</span><span id="read_csv-49"><a href="#read_csv-49"><span class="linenos">49</span></a><span class="sd">    Example</span>
</span><span id="read_csv-50"><a href="#read_csv-50"><span class="linenos">50</span></a><span class="sd">    -------</span>
</span><span id="read_csv-51"><a href="#read_csv-51"><span class="linenos">51</span></a><span class="sd">    ```python</span>
</span><span id="read_csv-52"><a href="#read_csv-52"><span class="linenos">52</span></a><span class="sd">    import simstock as sim</span>
</span><span id="read_csv-53"><a href="#read_csv-53"><span class="linenos">53</span></a><span class="sd">    sdf = sim.read_csv(&quot;/pathtofile/examplefile.csv&quot;)</span>
</span><span id="read_csv-54"><a href="#read_csv-54"><span class="linenos">54</span></a><span class="sd">    ```</span>
</span><span id="read_csv-55"><a href="#read_csv-55"><span class="linenos">55</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="read_csv-56"><a href="#read_csv-56"><span class="linenos">56</span></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span><span id="read_csv-57"><a href="#read_csv-57"><span class="linenos">57</span></a>    <span class="k">return</span> <span class="n">SimstockDataframe</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Function to read in a <code>csv</code> file and return a <code>SimstockDataframe,
i.e. it must contain a</code>polygon`` column or key or field containing
shapely geometry data or similar.</p>

<h2 id="parameters">Parameters</h2>

<p><code>path : str</code>
    The file path including the <code>csv</code> file</p>

<p><code>kwargs : dict</code>
    optional keyword argumetns to be passed to the
    SimstockDataframe initialiser. See SimstockDataframe
    docs for details of allowed arguments.</p>

<h2 id="returns">Returns</h2>

<p><code>sdf : SimstockDataframe</code>
    See SimstockDataframe docs for full list of attributes
    and methods.</p>

<h2 id="raises">Raises</h2>

<p><code>TypeError</code>
If <code>csv</code> file does not conform to Simstock standards.</p>

<p>Dictionary of key-words arguments to be passed to the SimstockDataframe
constructor. See Simstockbase for full list of recognised key word
arguments.</p>

<h2 id="example">Example</h2>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="kn">import</span> <span class="nn">simstock</span> <span class="k">as</span> <span class="nn">sim</span>
<span class="n">sdf</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;/pathtofile/examplefile.csv&quot;</span><span class="p">)</span>
</code></pre>
</div>
</div>


                </section>
                <section id="read_parquet">
                            <input id="read_parquet-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">read_parquet</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">path</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="n"><a href="#SimstockDataframe">src.simstock.SimstockDataframe</a></span>:</span></span>

                <label class="view-source-button" for="read_parquet-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#read_parquet"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="read_parquet-60"><a href="#read_parquet-60"><span class="linenos"> 60</span></a><span class="k">def</span> <span class="nf">read_parquet</span><span class="p">(</span><span class="n">path</span> <span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SimstockDataframe</span><span class="p">:</span>
</span><span id="read_parquet-61"><a href="#read_parquet-61"><span class="linenos"> 61</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="read_parquet-62"><a href="#read_parquet-62"><span class="linenos"> 62</span></a><span class="sd">    Function to read in a ``parquet`` file and return a ``SimstockDataframe,</span>
</span><span id="read_parquet-63"><a href="#read_parquet-63"><span class="linenos"> 63</span></a><span class="sd">    i.e. it must contain a ``polygon`` column or key or field containing</span>
</span><span id="read_parquet-64"><a href="#read_parquet-64"><span class="linenos"> 64</span></a><span class="sd">    shapely geometry data or similar.</span>
</span><span id="read_parquet-65"><a href="#read_parquet-65"><span class="linenos"> 65</span></a>
</span><span id="read_parquet-66"><a href="#read_parquet-66"><span class="linenos"> 66</span></a><span class="sd">    Parameters</span>
</span><span id="read_parquet-67"><a href="#read_parquet-67"><span class="linenos"> 67</span></a><span class="sd">    ----------</span>
</span><span id="read_parquet-68"><a href="#read_parquet-68"><span class="linenos"> 68</span></a>
</span><span id="read_parquet-69"><a href="#read_parquet-69"><span class="linenos"> 69</span></a><span class="sd">    ``path : str``</span>
</span><span id="read_parquet-70"><a href="#read_parquet-70"><span class="linenos"> 70</span></a><span class="sd">        The file path including the ``parquet`` file</span>
</span><span id="read_parquet-71"><a href="#read_parquet-71"><span class="linenos"> 71</span></a>
</span><span id="read_parquet-72"><a href="#read_parquet-72"><span class="linenos"> 72</span></a><span class="sd">    ``kwargs : dict``</span>
</span><span id="read_parquet-73"><a href="#read_parquet-73"><span class="linenos"> 73</span></a><span class="sd">        optional keyword argumetns to be passed to the</span>
</span><span id="read_parquet-74"><a href="#read_parquet-74"><span class="linenos"> 74</span></a><span class="sd">        SimstockDataframe initialiser. See SimstockDataframe</span>
</span><span id="read_parquet-75"><a href="#read_parquet-75"><span class="linenos"> 75</span></a><span class="sd">        docs for details of allowed arguments.</span>
</span><span id="read_parquet-76"><a href="#read_parquet-76"><span class="linenos"> 76</span></a>
</span><span id="read_parquet-77"><a href="#read_parquet-77"><span class="linenos"> 77</span></a><span class="sd">    Returns</span>
</span><span id="read_parquet-78"><a href="#read_parquet-78"><span class="linenos"> 78</span></a><span class="sd">    -------</span>
</span><span id="read_parquet-79"><a href="#read_parquet-79"><span class="linenos"> 79</span></a>
</span><span id="read_parquet-80"><a href="#read_parquet-80"><span class="linenos"> 80</span></a><span class="sd">    ``sdf : SimstockDataframe``</span>
</span><span id="read_parquet-81"><a href="#read_parquet-81"><span class="linenos"> 81</span></a><span class="sd">        See SimstockDataframe docs for full list of attributes</span>
</span><span id="read_parquet-82"><a href="#read_parquet-82"><span class="linenos"> 82</span></a><span class="sd">        and methods.</span>
</span><span id="read_parquet-83"><a href="#read_parquet-83"><span class="linenos"> 83</span></a>
</span><span id="read_parquet-84"><a href="#read_parquet-84"><span class="linenos"> 84</span></a><span class="sd">    Raises</span>
</span><span id="read_parquet-85"><a href="#read_parquet-85"><span class="linenos"> 85</span></a><span class="sd">    ------</span>
</span><span id="read_parquet-86"><a href="#read_parquet-86"><span class="linenos"> 86</span></a>
</span><span id="read_parquet-87"><a href="#read_parquet-87"><span class="linenos"> 87</span></a><span class="sd">    ``TypeError``</span>
</span><span id="read_parquet-88"><a href="#read_parquet-88"><span class="linenos"> 88</span></a><span class="sd">    If the data in the ``parquet`` file does not conform to Simstock standards.</span>
</span><span id="read_parquet-89"><a href="#read_parquet-89"><span class="linenos"> 89</span></a>
</span><span id="read_parquet-90"><a href="#read_parquet-90"><span class="linenos"> 90</span></a><span class="sd">    Dictionary of key-words arguments to be passed to the SimstockDataframe</span>
</span><span id="read_parquet-91"><a href="#read_parquet-91"><span class="linenos"> 91</span></a><span class="sd">    constructor. See Simstockbase for full list of recognised key word</span>
</span><span id="read_parquet-92"><a href="#read_parquet-92"><span class="linenos"> 92</span></a><span class="sd">    arguments.</span>
</span><span id="read_parquet-93"><a href="#read_parquet-93"><span class="linenos"> 93</span></a>
</span><span id="read_parquet-94"><a href="#read_parquet-94"><span class="linenos"> 94</span></a><span class="sd">    Example</span>
</span><span id="read_parquet-95"><a href="#read_parquet-95"><span class="linenos"> 95</span></a><span class="sd">    -------</span>
</span><span id="read_parquet-96"><a href="#read_parquet-96"><span class="linenos"> 96</span></a><span class="sd">    ```python</span>
</span><span id="read_parquet-97"><a href="#read_parquet-97"><span class="linenos"> 97</span></a><span class="sd">    import simstock as sim</span>
</span><span id="read_parquet-98"><a href="#read_parquet-98"><span class="linenos"> 98</span></a><span class="sd">    sdf = sim.read_parquet(&quot;/pathtofile/examplefile.parquet&quot;)</span>
</span><span id="read_parquet-99"><a href="#read_parquet-99"><span class="linenos"> 99</span></a><span class="sd">    ```</span>
</span><span id="read_parquet-100"><a href="#read_parquet-100"><span class="linenos">100</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="read_parquet-101"><a href="#read_parquet-101"><span class="linenos">101</span></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span><span id="read_parquet-102"><a href="#read_parquet-102"><span class="linenos">102</span></a>    <span class="k">return</span> <span class="n">SimstockDataframe</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Function to read in a <code>parquet</code> file and return a <code>SimstockDataframe,
i.e. it must contain a</code>polygon`` column or key or field containing
shapely geometry data or similar.</p>

<h2 id="parameters">Parameters</h2>

<p><code>path : str</code>
    The file path including the <code>parquet</code> file</p>

<p><code>kwargs : dict</code>
    optional keyword argumetns to be passed to the
    SimstockDataframe initialiser. See SimstockDataframe
    docs for details of allowed arguments.</p>

<h2 id="returns">Returns</h2>

<p><code>sdf : SimstockDataframe</code>
    See SimstockDataframe docs for full list of attributes
    and methods.</p>

<h2 id="raises">Raises</h2>

<p><code>TypeError</code>
If the data in the <code>parquet</code> file does not conform to Simstock standards.</p>

<p>Dictionary of key-words arguments to be passed to the SimstockDataframe
constructor. See Simstockbase for full list of recognised key word
arguments.</p>

<h2 id="example">Example</h2>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="kn">import</span> <span class="nn">simstock</span> <span class="k">as</span> <span class="nn">sim</span>
<span class="n">sdf</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="s2">&quot;/pathtofile/examplefile.parquet&quot;</span><span class="p">)</span>
</code></pre>
</div>
</div>


                </section>
                <section id="read_json">
                            <input id="read_json-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">read_json</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">path</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="n"><a href="#SimstockDataframe">src.simstock.SimstockDataframe</a></span>:</span></span>

                <label class="view-source-button" for="read_json-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#read_json"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="read_json-105"><a href="#read_json-105"><span class="linenos">105</span></a><span class="k">def</span> <span class="nf">read_json</span><span class="p">(</span><span class="n">path</span> <span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SimstockDataframe</span><span class="p">:</span>
</span><span id="read_json-106"><a href="#read_json-106"><span class="linenos">106</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="read_json-107"><a href="#read_json-107"><span class="linenos">107</span></a><span class="sd">    Function to read in a ``json`` file and return a ``SimstockDataframe,</span>
</span><span id="read_json-108"><a href="#read_json-108"><span class="linenos">108</span></a><span class="sd">    i.e. it must contain a ``polygon`` column or key or field containing</span>
</span><span id="read_json-109"><a href="#read_json-109"><span class="linenos">109</span></a><span class="sd">    shapely geometry data or similar.</span>
</span><span id="read_json-110"><a href="#read_json-110"><span class="linenos">110</span></a>
</span><span id="read_json-111"><a href="#read_json-111"><span class="linenos">111</span></a><span class="sd">    Parameters</span>
</span><span id="read_json-112"><a href="#read_json-112"><span class="linenos">112</span></a><span class="sd">    ----------</span>
</span><span id="read_json-113"><a href="#read_json-113"><span class="linenos">113</span></a>
</span><span id="read_json-114"><a href="#read_json-114"><span class="linenos">114</span></a><span class="sd">    ``path : str``</span>
</span><span id="read_json-115"><a href="#read_json-115"><span class="linenos">115</span></a><span class="sd">        The file path including the ``json`` file</span>
</span><span id="read_json-116"><a href="#read_json-116"><span class="linenos">116</span></a>
</span><span id="read_json-117"><a href="#read_json-117"><span class="linenos">117</span></a><span class="sd">    ``kwargs : dict``</span>
</span><span id="read_json-118"><a href="#read_json-118"><span class="linenos">118</span></a><span class="sd">        optional keyword argumetns to be passed to the</span>
</span><span id="read_json-119"><a href="#read_json-119"><span class="linenos">119</span></a><span class="sd">        SimstockDataframe initialiser. See SimstockDataframe</span>
</span><span id="read_json-120"><a href="#read_json-120"><span class="linenos">120</span></a><span class="sd">        docs for details of allowed arguments.</span>
</span><span id="read_json-121"><a href="#read_json-121"><span class="linenos">121</span></a>
</span><span id="read_json-122"><a href="#read_json-122"><span class="linenos">122</span></a><span class="sd">    Returns</span>
</span><span id="read_json-123"><a href="#read_json-123"><span class="linenos">123</span></a><span class="sd">    -------</span>
</span><span id="read_json-124"><a href="#read_json-124"><span class="linenos">124</span></a>
</span><span id="read_json-125"><a href="#read_json-125"><span class="linenos">125</span></a><span class="sd">    ``sdf : SimstockDataframe``</span>
</span><span id="read_json-126"><a href="#read_json-126"><span class="linenos">126</span></a><span class="sd">        See SimstockDataframe docs for full list of attributes</span>
</span><span id="read_json-127"><a href="#read_json-127"><span class="linenos">127</span></a><span class="sd">        and methods.</span>
</span><span id="read_json-128"><a href="#read_json-128"><span class="linenos">128</span></a>
</span><span id="read_json-129"><a href="#read_json-129"><span class="linenos">129</span></a><span class="sd">    Raises</span>
</span><span id="read_json-130"><a href="#read_json-130"><span class="linenos">130</span></a><span class="sd">    ------</span>
</span><span id="read_json-131"><a href="#read_json-131"><span class="linenos">131</span></a>
</span><span id="read_json-132"><a href="#read_json-132"><span class="linenos">132</span></a><span class="sd">    ``TypeError``</span>
</span><span id="read_json-133"><a href="#read_json-133"><span class="linenos">133</span></a><span class="sd">    If the data in the ``json`` file does not conform to Simstock standards.</span>
</span><span id="read_json-134"><a href="#read_json-134"><span class="linenos">134</span></a>
</span><span id="read_json-135"><a href="#read_json-135"><span class="linenos">135</span></a><span class="sd">    Dictionary of key-words arguments to be passed to the SimstockDataframe</span>
</span><span id="read_json-136"><a href="#read_json-136"><span class="linenos">136</span></a><span class="sd">    constructor. See Simstockbase for full list of recognised key word</span>
</span><span id="read_json-137"><a href="#read_json-137"><span class="linenos">137</span></a><span class="sd">    arguments.</span>
</span><span id="read_json-138"><a href="#read_json-138"><span class="linenos">138</span></a>
</span><span id="read_json-139"><a href="#read_json-139"><span class="linenos">139</span></a><span class="sd">    Example</span>
</span><span id="read_json-140"><a href="#read_json-140"><span class="linenos">140</span></a><span class="sd">    -------</span>
</span><span id="read_json-141"><a href="#read_json-141"><span class="linenos">141</span></a><span class="sd">    ```python</span>
</span><span id="read_json-142"><a href="#read_json-142"><span class="linenos">142</span></a><span class="sd">    import simstock as sim</span>
</span><span id="read_json-143"><a href="#read_json-143"><span class="linenos">143</span></a><span class="sd">    sdf = sim.read_json(&quot;/pathtofile/examplefile.json&quot;)</span>
</span><span id="read_json-144"><a href="#read_json-144"><span class="linenos">144</span></a><span class="sd">    ```</span>
</span><span id="read_json-145"><a href="#read_json-145"><span class="linenos">145</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="read_json-146"><a href="#read_json-146"><span class="linenos">146</span></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span><span id="read_json-147"><a href="#read_json-147"><span class="linenos">147</span></a>    <span class="k">return</span> <span class="n">SimstockDataframe</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Function to read in a <code>json</code> file and return a <code>SimstockDataframe,
i.e. it must contain a</code>polygon`` column or key or field containing
shapely geometry data or similar.</p>

<h2 id="parameters">Parameters</h2>

<p><code>path : str</code>
    The file path including the <code>json</code> file</p>

<p><code>kwargs : dict</code>
    optional keyword argumetns to be passed to the
    SimstockDataframe initialiser. See SimstockDataframe
    docs for details of allowed arguments.</p>

<h2 id="returns">Returns</h2>

<p><code>sdf : SimstockDataframe</code>
    See SimstockDataframe docs for full list of attributes
    and methods.</p>

<h2 id="raises">Raises</h2>

<p><code>TypeError</code>
If the data in the <code>json</code> file does not conform to Simstock standards.</p>

<p>Dictionary of key-words arguments to be passed to the SimstockDataframe
constructor. See Simstockbase for full list of recognised key word
arguments.</p>

<h2 id="example">Example</h2>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="kn">import</span> <span class="nn">simstock</span> <span class="k">as</span> <span class="nn">sim</span>
<span class="n">sdf</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="s2">&quot;/pathtofile/examplefile.json&quot;</span><span class="p">)</span>
</code></pre>
</div>
</div>


                </section>
                <section id="to_csv">
                            <input id="to_csv-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">to_csv</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">sdf</span><span class="p">:</span> <span class="n"><a href="#SimstockDataframe">src.simstock.SimstockDataframe</a></span>, </span><span class="param"><span class="n">path</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="to_csv-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#to_csv"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="to_csv-150"><a href="#to_csv-150"><span class="linenos">150</span></a><span class="k">def</span> <span class="nf">to_csv</span><span class="p">(</span><span class="n">sdf</span> <span class="p">:</span> <span class="n">SimstockDataframe</span><span class="p">,</span> <span class="n">path</span> <span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="to_csv-151"><a href="#to_csv-151"><span class="linenos">151</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="to_csv-152"><a href="#to_csv-152"><span class="linenos">152</span></a><span class="sd">    Function to save a SimstockDataframe object to a csv file</span>
</span><span id="to_csv-153"><a href="#to_csv-153"><span class="linenos">153</span></a>
</span><span id="to_csv-154"><a href="#to_csv-154"><span class="linenos">154</span></a><span class="sd">    Parameters</span>
</span><span id="to_csv-155"><a href="#to_csv-155"><span class="linenos">155</span></a><span class="sd">    ----------</span>
</span><span id="to_csv-156"><a href="#to_csv-156"><span class="linenos">156</span></a>
</span><span id="to_csv-157"><a href="#to_csv-157"><span class="linenos">157</span></a><span class="sd">    ``sdf : SimstockDataframe``</span>
</span><span id="to_csv-158"><a href="#to_csv-158"><span class="linenos">158</span></a><span class="sd">        The simstock dataframe to save.</span>
</span><span id="to_csv-159"><a href="#to_csv-159"><span class="linenos">159</span></a>
</span><span id="to_csv-160"><a href="#to_csv-160"><span class="linenos">160</span></a><span class="sd">    ``path : str``</span>
</span><span id="to_csv-161"><a href="#to_csv-161"><span class="linenos">161</span></a><span class="sd">        The file path to save to.</span>
</span><span id="to_csv-162"><a href="#to_csv-162"><span class="linenos">162</span></a>
</span><span id="to_csv-163"><a href="#to_csv-163"><span class="linenos">163</span></a><span class="sd">    ``kwargs : dict``</span>
</span><span id="to_csv-164"><a href="#to_csv-164"><span class="linenos">164</span></a><span class="sd">        optional keyword argumetns to be passed to the</span>
</span><span id="to_csv-165"><a href="#to_csv-165"><span class="linenos">165</span></a><span class="sd">        SimstockDataframe initialiser. See SimstockDataframe</span>
</span><span id="to_csv-166"><a href="#to_csv-166"><span class="linenos">166</span></a><span class="sd">        docs for details of allowed arguments.</span>
</span><span id="to_csv-167"><a href="#to_csv-167"><span class="linenos">167</span></a>
</span><span id="to_csv-168"><a href="#to_csv-168"><span class="linenos">168</span></a>
</span><span id="to_csv-169"><a href="#to_csv-169"><span class="linenos">169</span></a><span class="sd">    Example</span>
</span><span id="to_csv-170"><a href="#to_csv-170"><span class="linenos">170</span></a><span class="sd">    -------</span>
</span><span id="to_csv-171"><a href="#to_csv-171"><span class="linenos">171</span></a><span class="sd">    ```python</span>
</span><span id="to_csv-172"><a href="#to_csv-172"><span class="linenos">172</span></a><span class="sd">    sim.to_csv(sdf, &quot;/pathtofile/examplefile.csv&quot;)</span>
</span><span id="to_csv-173"><a href="#to_csv-173"><span class="linenos">173</span></a><span class="sd">    ```</span>
</span><span id="to_csv-174"><a href="#to_csv-174"><span class="linenos">174</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="to_csv-175"><a href="#to_csv-175"><span class="linenos">175</span></a>    <span class="n">sdf</span><span class="o">.</span><span class="n">_df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Function to save a SimstockDataframe object to a csv file</p>

<h2 id="parameters">Parameters</h2>

<p><code>sdf : SimstockDataframe</code>
    The simstock dataframe to save.</p>

<p><code>path : str</code>
    The file path to save to.</p>

<p><code>kwargs : dict</code>
    optional keyword argumetns to be passed to the
    SimstockDataframe initialiser. See SimstockDataframe
    docs for details of allowed arguments.</p>

<h2 id="example">Example</h2>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="n">sim</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">sdf</span><span class="p">,</span> <span class="s2">&quot;/pathtofile/examplefile.csv&quot;</span><span class="p">)</span>
</code></pre>
</div>
</div>


                </section>
                <section id="to_parquet">
                            <input id="to_parquet-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">to_parquet</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">sdf</span><span class="p">:</span> <span class="n"><a href="#SimstockDataframe">src.simstock.SimstockDataframe</a></span>, </span><span class="param"><span class="n">path</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="to_parquet-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#to_parquet"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="to_parquet-178"><a href="#to_parquet-178"><span class="linenos">178</span></a><span class="k">def</span> <span class="nf">to_parquet</span><span class="p">(</span><span class="n">sdf</span> <span class="p">:</span> <span class="n">SimstockDataframe</span><span class="p">,</span> <span class="n">path</span> <span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="to_parquet-179"><a href="#to_parquet-179"><span class="linenos">179</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="to_parquet-180"><a href="#to_parquet-180"><span class="linenos">180</span></a><span class="sd">    Function to save a SimstockDataframe object to a parquet file</span>
</span><span id="to_parquet-181"><a href="#to_parquet-181"><span class="linenos">181</span></a>
</span><span id="to_parquet-182"><a href="#to_parquet-182"><span class="linenos">182</span></a><span class="sd">    Parameters</span>
</span><span id="to_parquet-183"><a href="#to_parquet-183"><span class="linenos">183</span></a><span class="sd">    ----------</span>
</span><span id="to_parquet-184"><a href="#to_parquet-184"><span class="linenos">184</span></a>
</span><span id="to_parquet-185"><a href="#to_parquet-185"><span class="linenos">185</span></a><span class="sd">    ``sdf : SimstockDataframe``</span>
</span><span id="to_parquet-186"><a href="#to_parquet-186"><span class="linenos">186</span></a><span class="sd">        The simstock dataframe to save.</span>
</span><span id="to_parquet-187"><a href="#to_parquet-187"><span class="linenos">187</span></a>
</span><span id="to_parquet-188"><a href="#to_parquet-188"><span class="linenos">188</span></a><span class="sd">    ``path : str``</span>
</span><span id="to_parquet-189"><a href="#to_parquet-189"><span class="linenos">189</span></a><span class="sd">        The file path to save to.</span>
</span><span id="to_parquet-190"><a href="#to_parquet-190"><span class="linenos">190</span></a>
</span><span id="to_parquet-191"><a href="#to_parquet-191"><span class="linenos">191</span></a>
</span><span id="to_parquet-192"><a href="#to_parquet-192"><span class="linenos">192</span></a><span class="sd">    Example</span>
</span><span id="to_parquet-193"><a href="#to_parquet-193"><span class="linenos">193</span></a><span class="sd">    -------</span>
</span><span id="to_parquet-194"><a href="#to_parquet-194"><span class="linenos">194</span></a><span class="sd">    ```python</span>
</span><span id="to_parquet-195"><a href="#to_parquet-195"><span class="linenos">195</span></a><span class="sd">    sim.to_csv(sdf, &quot;/pathtofile/examplefile.parquet&quot;)</span>
</span><span id="to_parquet-196"><a href="#to_parquet-196"><span class="linenos">196</span></a><span class="sd">    ```</span>
</span><span id="to_parquet-197"><a href="#to_parquet-197"><span class="linenos">197</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="to_parquet-198"><a href="#to_parquet-198"><span class="linenos">198</span></a>    <span class="n">sdf</span><span class="o">.</span><span class="n">_df</span><span class="o">.</span><span class="n">to_parquet</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s2">&quot;fastparquet&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Function to save a SimstockDataframe object to a parquet file</p>

<h2 id="parameters">Parameters</h2>

<p><code>sdf : SimstockDataframe</code>
    The simstock dataframe to save.</p>

<p><code>path : str</code>
    The file path to save to.</p>

<h2 id="example">Example</h2>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="n">sim</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">sdf</span><span class="p">,</span> <span class="s2">&quot;/pathtofile/examplefile.parquet&quot;</span><span class="p">)</span>
</code></pre>
</div>
</div>


                </section>
                <section id="to_json">
                            <input id="to_json-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">to_json</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">sdf</span><span class="p">:</span> <span class="n"><a href="#SimstockDataframe">src.simstock.SimstockDataframe</a></span>, </span><span class="param"><span class="n">path</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="to_json-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#to_json"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="to_json-201"><a href="#to_json-201"><span class="linenos">201</span></a><span class="k">def</span> <span class="nf">to_json</span><span class="p">(</span><span class="n">sdf</span> <span class="p">:</span> <span class="n">SimstockDataframe</span><span class="p">,</span> <span class="n">path</span> <span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="to_json-202"><a href="#to_json-202"><span class="linenos">202</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="to_json-203"><a href="#to_json-203"><span class="linenos">203</span></a><span class="sd">    Function to save a SimstockDataframe object to a json file</span>
</span><span id="to_json-204"><a href="#to_json-204"><span class="linenos">204</span></a>
</span><span id="to_json-205"><a href="#to_json-205"><span class="linenos">205</span></a><span class="sd">    Parameters</span>
</span><span id="to_json-206"><a href="#to_json-206"><span class="linenos">206</span></a><span class="sd">    ----------</span>
</span><span id="to_json-207"><a href="#to_json-207"><span class="linenos">207</span></a>
</span><span id="to_json-208"><a href="#to_json-208"><span class="linenos">208</span></a><span class="sd">    ``sdf : SimstockDataframe``</span>
</span><span id="to_json-209"><a href="#to_json-209"><span class="linenos">209</span></a><span class="sd">        The simstock dataframe to save.</span>
</span><span id="to_json-210"><a href="#to_json-210"><span class="linenos">210</span></a>
</span><span id="to_json-211"><a href="#to_json-211"><span class="linenos">211</span></a><span class="sd">    ``path : str``</span>
</span><span id="to_json-212"><a href="#to_json-212"><span class="linenos">212</span></a><span class="sd">        The file path to save to.</span>
</span><span id="to_json-213"><a href="#to_json-213"><span class="linenos">213</span></a>
</span><span id="to_json-214"><a href="#to_json-214"><span class="linenos">214</span></a>
</span><span id="to_json-215"><a href="#to_json-215"><span class="linenos">215</span></a><span class="sd">    Example</span>
</span><span id="to_json-216"><a href="#to_json-216"><span class="linenos">216</span></a><span class="sd">    -------</span>
</span><span id="to_json-217"><a href="#to_json-217"><span class="linenos">217</span></a><span class="sd">    ```python</span>
</span><span id="to_json-218"><a href="#to_json-218"><span class="linenos">218</span></a><span class="sd">    sim.to_csv(sdf, &quot;/pathtofile/examplefile.json&quot;)</span>
</span><span id="to_json-219"><a href="#to_json-219"><span class="linenos">219</span></a><span class="sd">    ```</span>
</span><span id="to_json-220"><a href="#to_json-220"><span class="linenos">220</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="to_json-221"><a href="#to_json-221"><span class="linenos">221</span></a>    <span class="n">sdf</span><span class="o">.</span><span class="n">_df</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Function to save a SimstockDataframe object to a json file</p>

<h2 id="parameters">Parameters</h2>

<p><code>sdf : SimstockDataframe</code>
    The simstock dataframe to save.</p>

<p><code>path : str</code>
    The file path to save to.</p>

<h2 id="example">Example</h2>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="n">sim</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">sdf</span><span class="p">,</span> <span class="s2">&quot;/pathtofile/examplefile.json&quot;</span><span class="p">)</span>
</code></pre>
</div>
</div>


                </section>
                <section id="IDFcreator">
                            <input id="IDFcreator-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">IDFcreator</span>:

                <label class="view-source-button" for="IDFcreator-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDFcreator"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDFcreator-489"><a href="#IDFcreator-489"><span class="linenos">489</span></a><span class="k">class</span> <span class="nc">IDFcreator</span><span class="p">:</span>
</span><span id="IDFcreator-490"><a href="#IDFcreator-490"><span class="linenos">490</span></a>
</span><span id="IDFcreator-491"><a href="#IDFcreator-491"><span class="linenos">491</span></a>    <span class="c1"># File locations</span>
</span><span id="IDFcreator-492"><a href="#IDFcreator-492"><span class="linenos">492</span></a>    <span class="n">root</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">))</span>
</span><span id="IDFcreator-493"><a href="#IDFcreator-493"><span class="linenos">493</span></a>    <span class="n">idd_file</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="IDFcreator-494"><a href="#IDFcreator-494"><span class="linenos">494</span></a>    <span class="n">ep_basic_settings</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s2">&quot;settings&quot;</span><span class="p">,</span> <span class="s2">&quot;basic_settings.idf&quot;</span><span class="p">)</span>
</span><span id="IDFcreator-495"><a href="#IDFcreator-495"><span class="linenos">495</span></a>
</span><span id="IDFcreator-496"><a href="#IDFcreator-496"><span class="linenos">496</span></a>    <span class="c1"># Common locations for E+ idd files</span>
</span><span id="IDFcreator-497"><a href="#IDFcreator-497"><span class="linenos">497</span></a>    <span class="n">common_windows_paths</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">EnergyPlus*</span><span class="se">\\</span><span class="s2">Energy+.idd&quot;</span><span class="p">]</span>
</span><span id="IDFcreator-498"><a href="#IDFcreator-498"><span class="linenos">498</span></a>    <span class="n">common_posix_paths</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="IDFcreator-499"><a href="#IDFcreator-499"><span class="linenos">499</span></a>        <span class="s2">&quot;/usr/local/EnergyPlus*/Energy+.idd&quot;</span><span class="p">,</span>
</span><span id="IDFcreator-500"><a href="#IDFcreator-500"><span class="linenos">500</span></a>        <span class="s2">&quot;/Applications/EnergyPlus*/Energy+.idd&quot;</span>
</span><span id="IDFcreator-501"><a href="#IDFcreator-501"><span class="linenos">501</span></a>    <span class="p">]</span>
</span><span id="IDFcreator-502"><a href="#IDFcreator-502"><span class="linenos">502</span></a>
</span><span id="IDFcreator-503"><a href="#IDFcreator-503"><span class="linenos">503</span></a>    <span class="n">building_name</span> <span class="o">=</span> <span class="s2">&quot;test&quot;</span>
</span><span id="IDFcreator-504"><a href="#IDFcreator-504"><span class="linenos">504</span></a>
</span><span id="IDFcreator-505"><a href="#IDFcreator-505"><span class="linenos">505</span></a>    <span class="c1"># Do not place window if the wall width is less than this number</span>
</span><span id="IDFcreator-506"><a href="#IDFcreator-506"><span class="linenos">506</span></a>    <span class="n">min_avail_width_for_window</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="IDFcreator-507"><a href="#IDFcreator-507"><span class="linenos">507</span></a>    <span class="c1"># Do not place window if partially exposed external wall is less than this number % of zone height</span>
</span><span id="IDFcreator-508"><a href="#IDFcreator-508"><span class="linenos">508</span></a>    <span class="n">min_avail_height</span> <span class="o">=</span> <span class="mi">80</span>
</span><span id="IDFcreator-509"><a href="#IDFcreator-509"><span class="linenos">509</span></a>
</span><span id="IDFcreator-510"><a href="#IDFcreator-510"><span class="linenos">510</span></a>    <span class="n">col_names</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="IDFcreator-511"><a href="#IDFcreator-511"><span class="linenos">511</span></a>        <span class="s1">&#39;polygon&#39;</span><span class="p">,</span> <span class="s1">&#39;osgb&#39;</span><span class="p">,</span> <span class="s1">&#39;shading&#39;</span><span class="p">,</span> <span class="s1">&#39;height&#39;</span><span class="p">,</span> <span class="s1">&#39;wwr&#39;</span><span class="p">,</span> <span class="s1">&#39;nofloors&#39;</span><span class="p">,</span><span class="s1">&#39;construction&#39;</span><span class="p">,</span> <span class="s1">&#39;interiors&#39;</span><span class="p">,</span> <span class="s1">&#39;touching&#39;</span><span class="p">,</span> <span class="s1">&#39;polygon_exposed_wall&#39;</span><span class="p">,</span>
</span><span id="IDFcreator-512"><a href="#IDFcreator-512"><span class="linenos">512</span></a>        <span class="s1">&#39;polygon_horizontal&#39;</span>
</span><span id="IDFcreator-513"><a href="#IDFcreator-513"><span class="linenos">513</span></a>    <span class="p">]</span>
</span><span id="IDFcreator-514"><a href="#IDFcreator-514"><span class="linenos">514</span></a>
</span><span id="IDFcreator-515"><a href="#IDFcreator-515"><span class="linenos">515</span></a>
</span><span id="IDFcreator-516"><a href="#IDFcreator-516"><span class="linenos">516</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">idd_file</span> <span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="IDFcreator-517"><a href="#IDFcreator-517"><span class="linenos">517</span></a>        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="IDFcreator-518"><a href="#IDFcreator-518"><span class="linenos">518</span></a>
</span><span id="IDFcreator-519"><a href="#IDFcreator-519"><span class="linenos">519</span></a>        <span class="c1"># Try and load data from simstockdataframe</span>
</span><span id="IDFcreator-520"><a href="#IDFcreator-520"><span class="linenos">520</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="IDFcreator-521"><a href="#IDFcreator-521"><span class="linenos">521</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">get_df</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="IDFcreator-522"><a href="#IDFcreator-522"><span class="linenos">522</span></a>        <span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
</span><span id="IDFcreator-523"><a href="#IDFcreator-523"><span class="linenos">523</span></a>            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="si">}</span><span class="s2"> cannot be loaded.&quot;</span>
</span><span id="IDFcreator-524"><a href="#IDFcreator-524"><span class="linenos">524</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">exc</span>
</span><span id="IDFcreator-525"><a href="#IDFcreator-525"><span class="linenos">525</span></a>        <span class="k">except</span> <span class="ne">FileNotFoundError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
</span><span id="IDFcreator-526"><a href="#IDFcreator-526"><span class="linenos">526</span></a>            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;File </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2"> not found.&quot;</span>
</span><span id="IDFcreator-527"><a href="#IDFcreator-527"><span class="linenos">527</span></a>            <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">exc</span>
</span><span id="IDFcreator-528"><a href="#IDFcreator-528"><span class="linenos">528</span></a>        <span class="k">except</span> <span class="ne">IOError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
</span><span id="IDFcreator-529"><a href="#IDFcreator-529"><span class="linenos">529</span></a>            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Data in </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2"> cannot be read.&quot;</span>
</span><span id="IDFcreator-530"><a href="#IDFcreator-530"><span class="linenos">530</span></a>            <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">exc</span>
</span><span id="IDFcreator-531"><a href="#IDFcreator-531"><span class="linenos">531</span></a>        
</span><span id="IDFcreator-532"><a href="#IDFcreator-532"><span class="linenos">532</span></a>        <span class="c1"># Validate the df</span>
</span><span id="IDFcreator-533"><a href="#IDFcreator-533"><span class="linenos">533</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_valid</span><span class="p">:</span>
</span><span id="IDFcreator-534"><a href="#IDFcreator-534"><span class="linenos">534</span></a>            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="IDFcreator-535"><a href="#IDFcreator-535"><span class="linenos">535</span></a>                <span class="s2">&quot;Error: the following columns are missing from the data: </span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="IDFcreator-536"><a href="#IDFcreator-536"><span class="linenos">536</span></a>                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">missing_columns</span><span class="p">()</span><span class="si">}</span><span class="s2"> </span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="IDFcreator-537"><a href="#IDFcreator-537"><span class="linenos">537</span></a>                <span class="s2">&quot;Please pre-process the data accordingly using Simstock.&quot;</span>
</span><span id="IDFcreator-538"><a href="#IDFcreator-538"><span class="linenos">538</span></a>            <span class="p">)</span>
</span><span id="IDFcreator-539"><a href="#IDFcreator-539"><span class="linenos">539</span></a>            <span class="k">raise</span> <span class="n">SimstockException</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="IDFcreator-540"><a href="#IDFcreator-540"><span class="linenos">540</span></a>
</span><span id="IDFcreator-541"><a href="#IDFcreator-541"><span class="linenos">541</span></a>        <span class="c1"># If idd_file == None, then try looking in standard places</span>
</span><span id="IDFcreator-542"><a href="#IDFcreator-542"><span class="linenos">542</span></a>        <span class="k">if</span> <span class="n">idd_file</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="IDFcreator-543"><a href="#IDFcreator-543"><span class="linenos">543</span></a>            <span class="c1"># Determine OS</span>
</span><span id="IDFcreator-544"><a href="#IDFcreator-544"><span class="linenos">544</span></a>            <span class="n">opsys</span> <span class="o">=</span> <span class="n">platform</span><span class="o">.</span><span class="n">system</span><span class="p">()</span><span class="o">.</span><span class="n">casefold</span><span class="p">()</span>
</span><span id="IDFcreator-545"><a href="#IDFcreator-545"><span class="linenos">545</span></a>            <span class="k">if</span> <span class="n">opsys</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;windows&quot;</span><span class="p">,</span> <span class="s2">&quot;darwin&quot;</span><span class="p">,</span> <span class="s2">&quot;linux&quot;</span><span class="p">]:</span>
</span><span id="IDFcreator-546"><a href="#IDFcreator-546"><span class="linenos">546</span></a>                <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;OS: </span><span class="si">{</span><span class="n">opsys</span><span class="si">}</span><span class="s2"> not recognise.&quot;</span>
</span><span id="IDFcreator-547"><a href="#IDFcreator-547"><span class="linenos">547</span></a>                <span class="k">raise</span> <span class="ne">SystemError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="IDFcreator-548"><a href="#IDFcreator-548"><span class="linenos">548</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_find_idd</span><span class="p">(</span><span class="n">opsys</span><span class="p">)</span>
</span><span id="IDFcreator-549"><a href="#IDFcreator-549"><span class="linenos">549</span></a>
</span><span id="IDFcreator-550"><a href="#IDFcreator-550"><span class="linenos">550</span></a>        <span class="c1"># If silicon mac, ensure rosetta is installed</span>
</span><span id="IDFcreator-551"><a href="#IDFcreator-551"><span class="linenos">551</span></a>        <span class="k">if</span> <span class="n">platform</span><span class="o">.</span><span class="n">processor</span><span class="p">()</span><span class="o">.</span><span class="n">casefold</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;arm&quot;</span><span class="p">:</span>
</span><span id="IDFcreator-552"><a href="#IDFcreator-552"><span class="linenos">552</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="IDFcreator-553"><a href="#IDFcreator-553"><span class="linenos">553</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="s2">&quot;/usr/libexec/rosetta&quot;</span><span class="p">):</span>
</span><span id="IDFcreator-554"><a href="#IDFcreator-554"><span class="linenos">554</span></a>                    <span class="k">raise</span> <span class="ne">Warning</span>
</span><span id="IDFcreator-555"><a href="#IDFcreator-555"><span class="linenos">555</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s2">&quot;/usr/libexec/rosetta&quot;</span><span class="p">))</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="IDFcreator-556"><a href="#IDFcreator-556"><span class="linenos">556</span></a>                    <span class="k">raise</span> <span class="ne">Warning</span>
</span><span id="IDFcreator-557"><a href="#IDFcreator-557"><span class="linenos">557</span></a>            <span class="k">except</span> <span class="ne">Warning</span> <span class="k">as</span> <span class="n">warn</span><span class="p">:</span>
</span><span id="IDFcreator-558"><a href="#IDFcreator-558"><span class="linenos">558</span></a>                <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="IDFcreator-559"><a href="#IDFcreator-559"><span class="linenos">559</span></a>                    <span class="s2">&quot;This appears to be a Silicone Mac.&quot;</span> 
</span><span id="IDFcreator-560"><a href="#IDFcreator-560"><span class="linenos">560</span></a>                    <span class="s2">&quot;Please ensure Rosetta is installed to enable EnergyPlus functionality.&quot;</span>
</span><span id="IDFcreator-561"><a href="#IDFcreator-561"><span class="linenos">561</span></a>                <span class="p">)</span>
</span><span id="IDFcreator-562"><a href="#IDFcreator-562"><span class="linenos">562</span></a>                <span class="k">raise</span> <span class="ne">Warning</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">warn</span>
</span><span id="IDFcreator-563"><a href="#IDFcreator-563"><span class="linenos">563</span></a>            
</span><span id="IDFcreator-564"><a href="#IDFcreator-564"><span class="linenos">564</span></a>        <span class="n">IDF</span><span class="o">.</span><span class="n">setiddname</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">idd_file</span><span class="p">)</span>
</span><span id="IDFcreator-565"><a href="#IDFcreator-565"><span class="linenos">565</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">idf</span> <span class="o">=</span> <span class="n">IDF</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ep_basic_settings</span><span class="p">)</span>
</span><span id="IDFcreator-566"><a href="#IDFcreator-566"><span class="linenos">566</span></a>
</span><span id="IDFcreator-567"><a href="#IDFcreator-567"><span class="linenos">567</span></a>        <span class="c1"># Change the name filed of the building object</span>
</span><span id="IDFcreator-568"><a href="#IDFcreator-568"><span class="linenos">568</span></a>        <span class="n">building_object</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">idf</span><span class="o">.</span><span class="n">idfobjects</span><span class="p">[</span><span class="s1">&#39;BUILDING&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="IDFcreator-569"><a href="#IDFcreator-569"><span class="linenos">569</span></a>        <span class="n">building_object</span><span class="o">.</span><span class="n">Name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">building_name</span>
</span><span id="IDFcreator-570"><a href="#IDFcreator-570"><span class="linenos">570</span></a>            
</span><span id="IDFcreator-571"><a href="#IDFcreator-571"><span class="linenos">571</span></a>    
</span><span id="IDFcreator-572"><a href="#IDFcreator-572"><span class="linenos">572</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="IDFcreator-573"><a href="#IDFcreator-573"><span class="linenos">573</span></a>        <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="IDFcreator-574"><a href="#IDFcreator-574"><span class="linenos">574</span></a>            <span class="s2">&quot;This is an IDFobject, it&#39;s function is to create IDF files.&quot;</span>
</span><span id="IDFcreator-575"><a href="#IDFcreator-575"><span class="linenos">575</span></a>            <span class="sa">f</span><span class="s2">&quot;This object uses E+ files located in </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">idd_file</span><span class="si">}</span><span class="s2">.&quot;</span>
</span><span id="IDFcreator-576"><a href="#IDFcreator-576"><span class="linenos">576</span></a>        <span class="p">)</span>
</span><span id="IDFcreator-577"><a href="#IDFcreator-577"><span class="linenos">577</span></a>        <span class="k">return</span> <span class="n">msg</span>
</span><span id="IDFcreator-578"><a href="#IDFcreator-578"><span class="linenos">578</span></a>
</span><span id="IDFcreator-579"><a href="#IDFcreator-579"><span class="linenos">579</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="IDFcreator-580"><a href="#IDFcreator-580"><span class="linenos">580</span></a>        <span class="k">return</span> <span class="s2">&quot;IDFobject()&quot;</span>
</span><span id="IDFcreator-581"><a href="#IDFcreator-581"><span class="linenos">581</span></a>
</span><span id="IDFcreator-582"><a href="#IDFcreator-582"><span class="linenos">582</span></a>    <span class="nd">@singledispatchmethod</span>
</span><span id="IDFcreator-583"><a href="#IDFcreator-583"><span class="linenos">583</span></a>    <span class="k">def</span> <span class="nf">get_df</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span> <span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="IDFcreator-584"><a href="#IDFcreator-584"><span class="linenos">584</span></a>        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="si">}</span><span class="s2"> cannot be loaded.&quot;</span>
</span><span id="IDFcreator-585"><a href="#IDFcreator-585"><span class="linenos">585</span></a>        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="IDFcreator-586"><a href="#IDFcreator-586"><span class="linenos">586</span></a>    
</span><span id="IDFcreator-587"><a href="#IDFcreator-587"><span class="linenos">587</span></a>    <span class="nd">@get_df</span><span class="o">.</span><span class="n">register</span>
</span><span id="IDFcreator-588"><a href="#IDFcreator-588"><span class="linenos">588</span></a>    <span class="k">def</span> <span class="nf">_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span> <span class="p">:</span> <span class="n">SimstockDataframe</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="IDFcreator-589"><a href="#IDFcreator-589"><span class="linenos">589</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">df</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">_df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="IDFcreator-590"><a href="#IDFcreator-590"><span class="linenos">590</span></a>
</span><span id="IDFcreator-591"><a href="#IDFcreator-591"><span class="linenos">591</span></a>    <span class="nd">@get_df</span><span class="o">.</span><span class="n">register</span>
</span><span id="IDFcreator-592"><a href="#IDFcreator-592"><span class="linenos">592</span></a>    <span class="k">def</span> <span class="nf">_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span> <span class="p">:</span> <span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="IDFcreator-593"><a href="#IDFcreator-593"><span class="linenos">593</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">df</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="IDFcreator-594"><a href="#IDFcreator-594"><span class="linenos">594</span></a>
</span><span id="IDFcreator-595"><a href="#IDFcreator-595"><span class="linenos">595</span></a>    <span class="nd">@get_df</span><span class="o">.</span><span class="n">register</span>
</span><span id="IDFcreator-596"><a href="#IDFcreator-596"><span class="linenos">596</span></a>    <span class="k">def</span> <span class="nf">_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span> <span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="IDFcreator-597"><a href="#IDFcreator-597"><span class="linenos">597</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
</span><span id="IDFcreator-598"><a href="#IDFcreator-598"><span class="linenos">598</span></a>            <span class="k">raise</span> <span class="ne">FileNotFoundError</span>
</span><span id="IDFcreator-599"><a href="#IDFcreator-599"><span class="linenos">599</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="IDFcreator-600"><a href="#IDFcreator-600"><span class="linenos">600</span></a>            <span class="k">if</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;-3:&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;csv&quot;</span><span class="p">:</span>
</span><span id="IDFcreator-601"><a href="#IDFcreator-601"><span class="linenos">601</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="IDFcreator-602"><a href="#IDFcreator-602"><span class="linenos">602</span></a>            <span class="k">elif</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;-3:&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;parquet&quot;</span><span class="p">:</span>
</span><span id="IDFcreator-603"><a href="#IDFcreator-603"><span class="linenos">603</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="IDFcreator-604"><a href="#IDFcreator-604"><span class="linenos">604</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="IDFcreator-605"><a href="#IDFcreator-605"><span class="linenos">605</span></a>                <span class="k">raise</span> <span class="ne">IOError</span>
</span><span id="IDFcreator-606"><a href="#IDFcreator-606"><span class="linenos">606</span></a>        <span class="k">except</span> <span class="ne">IOError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
</span><span id="IDFcreator-607"><a href="#IDFcreator-607"><span class="linenos">607</span></a>            <span class="k">raise</span> <span class="ne">IOError</span> <span class="kn">from</span> <span class="nn">exc</span>
</span><span id="IDFcreator-608"><a href="#IDFcreator-608"><span class="linenos">608</span></a>        
</span><span id="IDFcreator-609"><a href="#IDFcreator-609"><span class="linenos">609</span></a>    <span class="nd">@property</span>
</span><span id="IDFcreator-610"><a href="#IDFcreator-610"><span class="linenos">610</span></a>    <span class="k">def</span> <span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="IDFcreator-611"><a href="#IDFcreator-611"><span class="linenos">611</span></a>        <span class="k">return</span> <span class="nb">all</span><span class="p">(</span><span class="n">col</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">col_names</span><span class="p">)</span>
</span><span id="IDFcreator-612"><a href="#IDFcreator-612"><span class="linenos">612</span></a>    
</span><span id="IDFcreator-613"><a href="#IDFcreator-613"><span class="linenos">613</span></a>    <span class="k">def</span> <span class="nf">missing_columns</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
</span><span id="IDFcreator-614"><a href="#IDFcreator-614"><span class="linenos">614</span></a>        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">col_names</span><span class="p">)</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)))</span>
</span><span id="IDFcreator-615"><a href="#IDFcreator-615"><span class="linenos">615</span></a>
</span><span id="IDFcreator-616"><a href="#IDFcreator-616"><span class="linenos">616</span></a>    <span class="k">def</span> <span class="nf">_find_idd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">system</span> <span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="IDFcreator-617"><a href="#IDFcreator-617"><span class="linenos">617</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">idd_file</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="IDFcreator-618"><a href="#IDFcreator-618"><span class="linenos">618</span></a>        <span class="k">if</span> <span class="n">system</span> <span class="o">==</span> <span class="s2">&quot;windows&quot;</span><span class="p">:</span>
</span><span id="IDFcreator-619"><a href="#IDFcreator-619"><span class="linenos">619</span></a>            <span class="n">paths</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">common_windows_paths</span>
</span><span id="IDFcreator-620"><a href="#IDFcreator-620"><span class="linenos">620</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="IDFcreator-621"><a href="#IDFcreator-621"><span class="linenos">621</span></a>            <span class="n">paths</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">common_posix_paths</span>
</span><span id="IDFcreator-622"><a href="#IDFcreator-622"><span class="linenos">622</span></a>        <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">paths</span><span class="p">:</span>
</span><span id="IDFcreator-623"><a href="#IDFcreator-623"><span class="linenos">623</span></a>            <span class="c1"># Use glob to handle pattern matching for version number</span>
</span><span id="IDFcreator-624"><a href="#IDFcreator-624"><span class="linenos">624</span></a>            <span class="n">matches</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span><span id="IDFcreator-625"><a href="#IDFcreator-625"><span class="linenos">625</span></a>            <span class="k">if</span> <span class="n">matches</span><span class="p">:</span>
</span><span id="IDFcreator-626"><a href="#IDFcreator-626"><span class="linenos">626</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">idd_file</span> <span class="o">=</span> <span class="n">matches</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="IDFcreator-627"><a href="#IDFcreator-627"><span class="linenos">627</span></a>                <span class="k">break</span>
</span><span id="IDFcreator-628"><a href="#IDFcreator-628"><span class="linenos">628</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">idd_file</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="IDFcreator-629"><a href="#IDFcreator-629"><span class="linenos">629</span></a>            <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="s2">&quot;Could not find EnergyPlus IDD file&quot;</span><span class="p">)</span>
</span><span id="IDFcreator-630"><a href="#IDFcreator-630"><span class="linenos">630</span></a>    
</span><span id="IDFcreator-631"><a href="#IDFcreator-631"><span class="linenos">631</span></a>    <span class="k">def</span> <span class="nf">move_towards_origin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="IDFcreator-632"><a href="#IDFcreator-632"><span class="linenos">632</span></a>        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="IDFcreator-633"><a href="#IDFcreator-633"><span class="linenos">633</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">origin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;polygon&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="IDFcreator-634"><a href="#IDFcreator-634"><span class="linenos">634</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">origin</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origin</span><span class="o">.</span><span class="n">exterior</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="IDFcreator-635"><a href="#IDFcreator-635"><span class="linenos">635</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">origin</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="IDFcreator-636"><a href="#IDFcreator-636"><span class="linenos">636</span></a>
</span><span id="IDFcreator-637"><a href="#IDFcreator-637"><span class="linenos">637</span></a>    <span class="k">def</span> <span class="nf">create_shading_objects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="IDFcreator-638"><a href="#IDFcreator-638"><span class="linenos">638</span></a>        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="IDFcreator-639"><a href="#IDFcreator-639"><span class="linenos">639</span></a>
</span><span id="IDFcreator-640"><a href="#IDFcreator-640"><span class="linenos">640</span></a>        <span class="c1"># Shading volumes converted to shading objects</span>
</span><span id="IDFcreator-641"><a href="#IDFcreator-641"><span class="linenos">641</span></a>        <span class="n">shading_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;shading&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="kc">True</span><span class="p">]</span>
</span><span id="IDFcreator-642"><a href="#IDFcreator-642"><span class="linenos">642</span></a>        <span class="n">shading_df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
</span><span id="IDFcreator-643"><a href="#IDFcreator-643"><span class="linenos">643</span></a>            <span class="n">algs</span><span class="o">.</span><span class="n">_shading_volumes</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">idf</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">origin</span><span class="p">,),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span>
</span><span id="IDFcreator-644"><a href="#IDFcreator-644"><span class="linenos">644</span></a>        <span class="p">)</span>
</span><span id="IDFcreator-645"><a href="#IDFcreator-645"><span class="linenos">645</span></a>
</span><span id="IDFcreator-646"><a href="#IDFcreator-646"><span class="linenos">646</span></a>    <span class="k">def</span> <span class="nf">create_thermal_zones</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="IDFcreator-647"><a href="#IDFcreator-647"><span class="linenos">647</span></a>        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="IDFcreator-648"><a href="#IDFcreator-648"><span class="linenos">648</span></a>
</span><span id="IDFcreator-649"><a href="#IDFcreator-649"><span class="linenos">649</span></a>        <span class="c1"># Polygons with zones converted to thermal zones based on floor number</span>
</span><span id="IDFcreator-650"><a href="#IDFcreator-650"><span class="linenos">650</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">zones_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;shading&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="kc">False</span><span class="p">]</span>
</span><span id="IDFcreator-651"><a href="#IDFcreator-651"><span class="linenos">651</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">zones_df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">ialgs</span><span class="o">.</span><span class="n">_thermal_zones</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">idf</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">origin</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">min_avail_width_for_window</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">min_avail_height</span><span class="p">,),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="IDFcreator-652"><a href="#IDFcreator-652"><span class="linenos">652</span></a>
</span><span id="IDFcreator-653"><a href="#IDFcreator-653"><span class="linenos">653</span></a>        <span class="c1"># Extract names of thermal zones:</span>
</span><span id="IDFcreator-654"><a href="#IDFcreator-654"><span class="linenos">654</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">zones</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">idf</span><span class="o">.</span><span class="n">idfobjects</span><span class="p">[</span><span class="s1">&#39;ZONE&#39;</span><span class="p">]</span>
</span><span id="IDFcreator-655"><a href="#IDFcreator-655"><span class="linenos">655</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">zone_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
</span><span id="IDFcreator-656"><a href="#IDFcreator-656"><span class="linenos">656</span></a>        <span class="k">for</span> <span class="n">zone</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">zones</span><span class="p">:</span>
</span><span id="IDFcreator-657"><a href="#IDFcreator-657"><span class="linenos">657</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">zone_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">zone</span><span class="o">.</span><span class="n">Name</span><span class="p">)</span>
</span><span id="IDFcreator-658"><a href="#IDFcreator-658"><span class="linenos">658</span></a>
</span><span id="IDFcreator-659"><a href="#IDFcreator-659"><span class="linenos">659</span></a>        <span class="c1"># Create a &#39;Dwell&#39; zone list with all thermal zones. &quot;Dwell&quot; apears</span>
</span><span id="IDFcreator-660"><a href="#IDFcreator-660"><span class="linenos">660</span></a>        <span class="c1"># in all objects which reffer to all zones (thermostat, people, etc.)</span>
</span><span id="IDFcreator-661"><a href="#IDFcreator-661"><span class="linenos">661</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">idf</span><span class="o">.</span><span class="n">newidfobject</span><span class="p">(</span><span class="s1">&#39;ZONELIST&#39;</span><span class="p">,</span> <span class="n">Name</span><span class="o">=</span><span class="s1">&#39;Dwell&#39;</span><span class="p">)</span>
</span><span id="IDFcreator-662"><a href="#IDFcreator-662"><span class="linenos">662</span></a>        <span class="n">objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">idf</span><span class="o">.</span><span class="n">idfobjects</span><span class="p">[</span><span class="s1">&#39;ZONELIST&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="IDFcreator-663"><a href="#IDFcreator-663"><span class="linenos">663</span></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">zone</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">zone_names</span><span class="p">):</span>
</span><span id="IDFcreator-664"><a href="#IDFcreator-664"><span class="linenos">664</span></a>            <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;objects.Zone_</span><span class="si">%s</span><span class="s1">_Name = zone&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
</span><span id="IDFcreator-665"><a href="#IDFcreator-665"><span class="linenos">665</span></a>
</span><span id="IDFcreator-666"><a href="#IDFcreator-666"><span class="linenos">666</span></a>
</span><span id="IDFcreator-667"><a href="#IDFcreator-667"><span class="linenos">667</span></a>    <span class="k">def</span> <span class="nf">create_load_systems</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="IDFcreator-668"><a href="#IDFcreator-668"><span class="linenos">668</span></a>        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="IDFcreator-669"><a href="#IDFcreator-669"><span class="linenos">669</span></a>        <span class="c1"># Ideal loads system</span>
</span><span id="IDFcreator-670"><a href="#IDFcreator-670"><span class="linenos">670</span></a>
</span><span id="IDFcreator-671"><a href="#IDFcreator-671"><span class="linenos">671</span></a>        <span class="k">for</span> <span class="n">zone</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">zone_names</span><span class="p">:</span>
</span><span id="IDFcreator-672"><a href="#IDFcreator-672"><span class="linenos">672</span></a>            <span class="n">system_name</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">_HVAC&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">zone</span><span class="p">)</span>
</span><span id="IDFcreator-673"><a href="#IDFcreator-673"><span class="linenos">673</span></a>            <span class="n">eq_name</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">_Eq&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">zone</span><span class="p">)</span>
</span><span id="IDFcreator-674"><a href="#IDFcreator-674"><span class="linenos">674</span></a>            <span class="n">supp_air_node</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">_supply&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">zone</span><span class="p">)</span>
</span><span id="IDFcreator-675"><a href="#IDFcreator-675"><span class="linenos">675</span></a>            <span class="n">air_node</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">_air_node&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">zone</span><span class="p">)</span>
</span><span id="IDFcreator-676"><a href="#IDFcreator-676"><span class="linenos">676</span></a>            <span class="n">ret_air_node</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">_return&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">zone</span><span class="p">)</span>
</span><span id="IDFcreator-677"><a href="#IDFcreator-677"><span class="linenos">677</span></a>
</span><span id="IDFcreator-678"><a href="#IDFcreator-678"><span class="linenos">678</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">idf</span><span class="o">.</span><span class="n">newidfobject</span><span class="p">(</span><span class="s1">&#39;ZONEHVAC:IDEALLOADSAIRSYSTEM&#39;</span><span class="p">,</span>
</span><span id="IDFcreator-679"><a href="#IDFcreator-679"><span class="linenos">679</span></a>                                <span class="n">Name</span><span class="o">=</span><span class="n">system_name</span><span class="p">,</span>
</span><span id="IDFcreator-680"><a href="#IDFcreator-680"><span class="linenos">680</span></a>                                <span class="n">Zone_Supply_Air_Node_Name</span><span class="o">=</span><span class="n">supp_air_node</span><span class="p">,</span>
</span><span id="IDFcreator-681"><a href="#IDFcreator-681"><span class="linenos">681</span></a>                                <span class="n">Dehumidification_Control_Type</span><span class="o">=</span><span class="s1">&#39;None&#39;</span><span class="p">)</span>
</span><span id="IDFcreator-682"><a href="#IDFcreator-682"><span class="linenos">682</span></a>
</span><span id="IDFcreator-683"><a href="#IDFcreator-683"><span class="linenos">683</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">idf</span><span class="o">.</span><span class="n">newidfobject</span><span class="p">(</span><span class="s1">&#39;ZONEHVAC:EQUIPMENTLIST&#39;</span><span class="p">,</span>
</span><span id="IDFcreator-684"><a href="#IDFcreator-684"><span class="linenos">684</span></a>                                <span class="n">Name</span><span class="o">=</span><span class="n">eq_name</span><span class="p">,</span>
</span><span id="IDFcreator-685"><a href="#IDFcreator-685"><span class="linenos">685</span></a>                                <span class="n">Zone_Equipment_1_Object_Type</span><span class="o">=</span><span class="s1">&#39;ZONEHVAC:IDEALLOADSAIRSYSTEM&#39;</span><span class="p">,</span>
</span><span id="IDFcreator-686"><a href="#IDFcreator-686"><span class="linenos">686</span></a>                                <span class="n">Zone_Equipment_1_Name</span><span class="o">=</span><span class="n">system_name</span><span class="p">,</span>
</span><span id="IDFcreator-687"><a href="#IDFcreator-687"><span class="linenos">687</span></a>                                <span class="n">Zone_Equipment_1_Cooling_Sequence</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
</span><span id="IDFcreator-688"><a href="#IDFcreator-688"><span class="linenos">688</span></a>                                <span class="n">Zone_Equipment_1_Heating_or_NoLoad_Sequence</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="IDFcreator-689"><a href="#IDFcreator-689"><span class="linenos">689</span></a>
</span><span id="IDFcreator-690"><a href="#IDFcreator-690"><span class="linenos">690</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">idf</span><span class="o">.</span><span class="n">newidfobject</span><span class="p">(</span><span class="s1">&#39;ZONEHVAC:EQUIPMENTCONNECTIONS&#39;</span><span class="p">,</span>
</span><span id="IDFcreator-691"><a href="#IDFcreator-691"><span class="linenos">691</span></a>                                <span class="n">Zone_Name</span><span class="o">=</span><span class="n">zone</span><span class="p">,</span>
</span><span id="IDFcreator-692"><a href="#IDFcreator-692"><span class="linenos">692</span></a>                                <span class="n">Zone_Conditioning_Equipment_List_Name</span><span class="o">=</span><span class="n">eq_name</span><span class="p">,</span>
</span><span id="IDFcreator-693"><a href="#IDFcreator-693"><span class="linenos">693</span></a>                                <span class="n">Zone_Air_Inlet_Node_or_NodeList_Name</span><span class="o">=</span><span class="n">supp_air_node</span><span class="p">,</span>
</span><span id="IDFcreator-694"><a href="#IDFcreator-694"><span class="linenos">694</span></a>                                <span class="n">Zone_Air_Node_Name</span><span class="o">=</span><span class="n">air_node</span><span class="p">,</span>
</span><span id="IDFcreator-695"><a href="#IDFcreator-695"><span class="linenos">695</span></a>                                <span class="n">Zone_Return_Air_Node_or_NodeList_Name</span><span class="o">=</span><span class="n">ret_air_node</span><span class="p">)</span>
</span><span id="IDFcreator-696"><a href="#IDFcreator-696"><span class="linenos">696</span></a>    
</span><span id="IDFcreator-697"><a href="#IDFcreator-697"><span class="linenos">697</span></a>    <span class="k">def</span> <span class="nf">save_to_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fname</span> <span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="IDFcreator-698"><a href="#IDFcreator-698"><span class="linenos">698</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">idf</span><span class="o">.</span><span class="n">saveas</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
</span><span id="IDFcreator-699"><a href="#IDFcreator-699"><span class="linenos">699</span></a>
</span><span id="IDFcreator-700"><a href="#IDFcreator-700"><span class="linenos">700</span></a>
</span><span id="IDFcreator-701"><a href="#IDFcreator-701"><span class="linenos">701</span></a>    <span class="k">def</span> <span class="nf">create_idf_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fname</span> <span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="IDFcreator-702"><a href="#IDFcreator-702"><span class="linenos">702</span></a>        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="IDFcreator-703"><a href="#IDFcreator-703"><span class="linenos">703</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">move_towards_origin</span><span class="p">()</span>
</span><span id="IDFcreator-704"><a href="#IDFcreator-704"><span class="linenos">704</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">create_shading_objects</span><span class="p">()</span>
</span><span id="IDFcreator-705"><a href="#IDFcreator-705"><span class="linenos">705</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">create_thermal_zones</span><span class="p">()</span>
</span><span id="IDFcreator-706"><a href="#IDFcreator-706"><span class="linenos">706</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">create_load_systems</span><span class="p">()</span>
</span><span id="IDFcreator-707"><a href="#IDFcreator-707"><span class="linenos">707</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">save_to_file</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span> 
</span></pre></div>


    

                            <div id="IDFcreator.__init__" class="classattr">
                                        <input id="IDFcreator.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">IDFcreator</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">data</span>, </span><span class="param"><span class="n">idd_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span>)</span>

                <label class="view-source-button" for="IDFcreator.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDFcreator.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDFcreator.__init__-516"><a href="#IDFcreator.__init__-516"><span class="linenos">516</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">idd_file</span> <span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="IDFcreator.__init__-517"><a href="#IDFcreator.__init__-517"><span class="linenos">517</span></a>        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="IDFcreator.__init__-518"><a href="#IDFcreator.__init__-518"><span class="linenos">518</span></a>
</span><span id="IDFcreator.__init__-519"><a href="#IDFcreator.__init__-519"><span class="linenos">519</span></a>        <span class="c1"># Try and load data from simstockdataframe</span>
</span><span id="IDFcreator.__init__-520"><a href="#IDFcreator.__init__-520"><span class="linenos">520</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="IDFcreator.__init__-521"><a href="#IDFcreator.__init__-521"><span class="linenos">521</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">get_df</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="IDFcreator.__init__-522"><a href="#IDFcreator.__init__-522"><span class="linenos">522</span></a>        <span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
</span><span id="IDFcreator.__init__-523"><a href="#IDFcreator.__init__-523"><span class="linenos">523</span></a>            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="si">}</span><span class="s2"> cannot be loaded.&quot;</span>
</span><span id="IDFcreator.__init__-524"><a href="#IDFcreator.__init__-524"><span class="linenos">524</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">exc</span>
</span><span id="IDFcreator.__init__-525"><a href="#IDFcreator.__init__-525"><span class="linenos">525</span></a>        <span class="k">except</span> <span class="ne">FileNotFoundError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
</span><span id="IDFcreator.__init__-526"><a href="#IDFcreator.__init__-526"><span class="linenos">526</span></a>            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;File </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2"> not found.&quot;</span>
</span><span id="IDFcreator.__init__-527"><a href="#IDFcreator.__init__-527"><span class="linenos">527</span></a>            <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">exc</span>
</span><span id="IDFcreator.__init__-528"><a href="#IDFcreator.__init__-528"><span class="linenos">528</span></a>        <span class="k">except</span> <span class="ne">IOError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
</span><span id="IDFcreator.__init__-529"><a href="#IDFcreator.__init__-529"><span class="linenos">529</span></a>            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Data in </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2"> cannot be read.&quot;</span>
</span><span id="IDFcreator.__init__-530"><a href="#IDFcreator.__init__-530"><span class="linenos">530</span></a>            <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">exc</span>
</span><span id="IDFcreator.__init__-531"><a href="#IDFcreator.__init__-531"><span class="linenos">531</span></a>        
</span><span id="IDFcreator.__init__-532"><a href="#IDFcreator.__init__-532"><span class="linenos">532</span></a>        <span class="c1"># Validate the df</span>
</span><span id="IDFcreator.__init__-533"><a href="#IDFcreator.__init__-533"><span class="linenos">533</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_valid</span><span class="p">:</span>
</span><span id="IDFcreator.__init__-534"><a href="#IDFcreator.__init__-534"><span class="linenos">534</span></a>            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="IDFcreator.__init__-535"><a href="#IDFcreator.__init__-535"><span class="linenos">535</span></a>                <span class="s2">&quot;Error: the following columns are missing from the data: </span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="IDFcreator.__init__-536"><a href="#IDFcreator.__init__-536"><span class="linenos">536</span></a>                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">missing_columns</span><span class="p">()</span><span class="si">}</span><span class="s2"> </span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="IDFcreator.__init__-537"><a href="#IDFcreator.__init__-537"><span class="linenos">537</span></a>                <span class="s2">&quot;Please pre-process the data accordingly using Simstock.&quot;</span>
</span><span id="IDFcreator.__init__-538"><a href="#IDFcreator.__init__-538"><span class="linenos">538</span></a>            <span class="p">)</span>
</span><span id="IDFcreator.__init__-539"><a href="#IDFcreator.__init__-539"><span class="linenos">539</span></a>            <span class="k">raise</span> <span class="n">SimstockException</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="IDFcreator.__init__-540"><a href="#IDFcreator.__init__-540"><span class="linenos">540</span></a>
</span><span id="IDFcreator.__init__-541"><a href="#IDFcreator.__init__-541"><span class="linenos">541</span></a>        <span class="c1"># If idd_file == None, then try looking in standard places</span>
</span><span id="IDFcreator.__init__-542"><a href="#IDFcreator.__init__-542"><span class="linenos">542</span></a>        <span class="k">if</span> <span class="n">idd_file</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="IDFcreator.__init__-543"><a href="#IDFcreator.__init__-543"><span class="linenos">543</span></a>            <span class="c1"># Determine OS</span>
</span><span id="IDFcreator.__init__-544"><a href="#IDFcreator.__init__-544"><span class="linenos">544</span></a>            <span class="n">opsys</span> <span class="o">=</span> <span class="n">platform</span><span class="o">.</span><span class="n">system</span><span class="p">()</span><span class="o">.</span><span class="n">casefold</span><span class="p">()</span>
</span><span id="IDFcreator.__init__-545"><a href="#IDFcreator.__init__-545"><span class="linenos">545</span></a>            <span class="k">if</span> <span class="n">opsys</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;windows&quot;</span><span class="p">,</span> <span class="s2">&quot;darwin&quot;</span><span class="p">,</span> <span class="s2">&quot;linux&quot;</span><span class="p">]:</span>
</span><span id="IDFcreator.__init__-546"><a href="#IDFcreator.__init__-546"><span class="linenos">546</span></a>                <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;OS: </span><span class="si">{</span><span class="n">opsys</span><span class="si">}</span><span class="s2"> not recognise.&quot;</span>
</span><span id="IDFcreator.__init__-547"><a href="#IDFcreator.__init__-547"><span class="linenos">547</span></a>                <span class="k">raise</span> <span class="ne">SystemError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="IDFcreator.__init__-548"><a href="#IDFcreator.__init__-548"><span class="linenos">548</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_find_idd</span><span class="p">(</span><span class="n">opsys</span><span class="p">)</span>
</span><span id="IDFcreator.__init__-549"><a href="#IDFcreator.__init__-549"><span class="linenos">549</span></a>
</span><span id="IDFcreator.__init__-550"><a href="#IDFcreator.__init__-550"><span class="linenos">550</span></a>        <span class="c1"># If silicon mac, ensure rosetta is installed</span>
</span><span id="IDFcreator.__init__-551"><a href="#IDFcreator.__init__-551"><span class="linenos">551</span></a>        <span class="k">if</span> <span class="n">platform</span><span class="o">.</span><span class="n">processor</span><span class="p">()</span><span class="o">.</span><span class="n">casefold</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;arm&quot;</span><span class="p">:</span>
</span><span id="IDFcreator.__init__-552"><a href="#IDFcreator.__init__-552"><span class="linenos">552</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="IDFcreator.__init__-553"><a href="#IDFcreator.__init__-553"><span class="linenos">553</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="s2">&quot;/usr/libexec/rosetta&quot;</span><span class="p">):</span>
</span><span id="IDFcreator.__init__-554"><a href="#IDFcreator.__init__-554"><span class="linenos">554</span></a>                    <span class="k">raise</span> <span class="ne">Warning</span>
</span><span id="IDFcreator.__init__-555"><a href="#IDFcreator.__init__-555"><span class="linenos">555</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s2">&quot;/usr/libexec/rosetta&quot;</span><span class="p">))</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="IDFcreator.__init__-556"><a href="#IDFcreator.__init__-556"><span class="linenos">556</span></a>                    <span class="k">raise</span> <span class="ne">Warning</span>
</span><span id="IDFcreator.__init__-557"><a href="#IDFcreator.__init__-557"><span class="linenos">557</span></a>            <span class="k">except</span> <span class="ne">Warning</span> <span class="k">as</span> <span class="n">warn</span><span class="p">:</span>
</span><span id="IDFcreator.__init__-558"><a href="#IDFcreator.__init__-558"><span class="linenos">558</span></a>                <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="IDFcreator.__init__-559"><a href="#IDFcreator.__init__-559"><span class="linenos">559</span></a>                    <span class="s2">&quot;This appears to be a Silicone Mac.&quot;</span> 
</span><span id="IDFcreator.__init__-560"><a href="#IDFcreator.__init__-560"><span class="linenos">560</span></a>                    <span class="s2">&quot;Please ensure Rosetta is installed to enable EnergyPlus functionality.&quot;</span>
</span><span id="IDFcreator.__init__-561"><a href="#IDFcreator.__init__-561"><span class="linenos">561</span></a>                <span class="p">)</span>
</span><span id="IDFcreator.__init__-562"><a href="#IDFcreator.__init__-562"><span class="linenos">562</span></a>                <span class="k">raise</span> <span class="ne">Warning</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">warn</span>
</span><span id="IDFcreator.__init__-563"><a href="#IDFcreator.__init__-563"><span class="linenos">563</span></a>            
</span><span id="IDFcreator.__init__-564"><a href="#IDFcreator.__init__-564"><span class="linenos">564</span></a>        <span class="n">IDF</span><span class="o">.</span><span class="n">setiddname</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">idd_file</span><span class="p">)</span>
</span><span id="IDFcreator.__init__-565"><a href="#IDFcreator.__init__-565"><span class="linenos">565</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">idf</span> <span class="o">=</span> <span class="n">IDF</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ep_basic_settings</span><span class="p">)</span>
</span><span id="IDFcreator.__init__-566"><a href="#IDFcreator.__init__-566"><span class="linenos">566</span></a>
</span><span id="IDFcreator.__init__-567"><a href="#IDFcreator.__init__-567"><span class="linenos">567</span></a>        <span class="c1"># Change the name filed of the building object</span>
</span><span id="IDFcreator.__init__-568"><a href="#IDFcreator.__init__-568"><span class="linenos">568</span></a>        <span class="n">building_object</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">idf</span><span class="o">.</span><span class="n">idfobjects</span><span class="p">[</span><span class="s1">&#39;BUILDING&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="IDFcreator.__init__-569"><a href="#IDFcreator.__init__-569"><span class="linenos">569</span></a>        <span class="n">building_object</span><span class="o">.</span><span class="n">Name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">building_name</span>
</span></pre></div>


    

                            </div>
                            <div id="IDFcreator.get_df" class="classattr">
                                        <input id="IDFcreator.get_df-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@singledispatchmethod</div>

        <span class="def">def</span>
        <span class="name">get_df</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">data</span><span class="p">:</span> <span class="n">Any</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="IDFcreator.get_df-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDFcreator.get_df"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDFcreator.get_df-582"><a href="#IDFcreator.get_df-582"><span class="linenos">582</span></a>    <span class="nd">@singledispatchmethod</span>
</span><span id="IDFcreator.get_df-583"><a href="#IDFcreator.get_df-583"><span class="linenos">583</span></a>    <span class="k">def</span> <span class="nf">get_df</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span> <span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="IDFcreator.get_df-584"><a href="#IDFcreator.get_df-584"><span class="linenos">584</span></a>        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="si">}</span><span class="s2"> cannot be loaded.&quot;</span>
</span><span id="IDFcreator.get_df-585"><a href="#IDFcreator.get_df-585"><span class="linenos">585</span></a>        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="IDFcreator.missing_columns" class="classattr">
                                        <input id="IDFcreator.missing_columns-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">missing_columns</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="nb">list</span>:</span></span>

                <label class="view-source-button" for="IDFcreator.missing_columns-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDFcreator.missing_columns"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDFcreator.missing_columns-613"><a href="#IDFcreator.missing_columns-613"><span class="linenos">613</span></a>    <span class="k">def</span> <span class="nf">missing_columns</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
</span><span id="IDFcreator.missing_columns-614"><a href="#IDFcreator.missing_columns-614"><span class="linenos">614</span></a>        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">col_names</span><span class="p">)</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)))</span>
</span></pre></div>


    

                            </div>
                            <div id="IDFcreator.move_towards_origin" class="classattr">
                                        <input id="IDFcreator.move_towards_origin-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">move_towards_origin</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="IDFcreator.move_towards_origin-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDFcreator.move_towards_origin"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDFcreator.move_towards_origin-631"><a href="#IDFcreator.move_towards_origin-631"><span class="linenos">631</span></a>    <span class="k">def</span> <span class="nf">move_towards_origin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="IDFcreator.move_towards_origin-632"><a href="#IDFcreator.move_towards_origin-632"><span class="linenos">632</span></a>        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="IDFcreator.move_towards_origin-633"><a href="#IDFcreator.move_towards_origin-633"><span class="linenos">633</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">origin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;polygon&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="IDFcreator.move_towards_origin-634"><a href="#IDFcreator.move_towards_origin-634"><span class="linenos">634</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">origin</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origin</span><span class="o">.</span><span class="n">exterior</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="IDFcreator.move_towards_origin-635"><a href="#IDFcreator.move_towards_origin-635"><span class="linenos">635</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">origin</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="IDFcreator.create_shading_objects" class="classattr">
                                        <input id="IDFcreator.create_shading_objects-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">create_shading_objects</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="IDFcreator.create_shading_objects-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDFcreator.create_shading_objects"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDFcreator.create_shading_objects-637"><a href="#IDFcreator.create_shading_objects-637"><span class="linenos">637</span></a>    <span class="k">def</span> <span class="nf">create_shading_objects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="IDFcreator.create_shading_objects-638"><a href="#IDFcreator.create_shading_objects-638"><span class="linenos">638</span></a>        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="IDFcreator.create_shading_objects-639"><a href="#IDFcreator.create_shading_objects-639"><span class="linenos">639</span></a>
</span><span id="IDFcreator.create_shading_objects-640"><a href="#IDFcreator.create_shading_objects-640"><span class="linenos">640</span></a>        <span class="c1"># Shading volumes converted to shading objects</span>
</span><span id="IDFcreator.create_shading_objects-641"><a href="#IDFcreator.create_shading_objects-641"><span class="linenos">641</span></a>        <span class="n">shading_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;shading&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="kc">True</span><span class="p">]</span>
</span><span id="IDFcreator.create_shading_objects-642"><a href="#IDFcreator.create_shading_objects-642"><span class="linenos">642</span></a>        <span class="n">shading_df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
</span><span id="IDFcreator.create_shading_objects-643"><a href="#IDFcreator.create_shading_objects-643"><span class="linenos">643</span></a>            <span class="n">algs</span><span class="o">.</span><span class="n">_shading_volumes</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">idf</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">origin</span><span class="p">,),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span>
</span><span id="IDFcreator.create_shading_objects-644"><a href="#IDFcreator.create_shading_objects-644"><span class="linenos">644</span></a>        <span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="IDFcreator.create_thermal_zones" class="classattr">
                                        <input id="IDFcreator.create_thermal_zones-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">create_thermal_zones</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="IDFcreator.create_thermal_zones-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDFcreator.create_thermal_zones"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDFcreator.create_thermal_zones-646"><a href="#IDFcreator.create_thermal_zones-646"><span class="linenos">646</span></a>    <span class="k">def</span> <span class="nf">create_thermal_zones</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="IDFcreator.create_thermal_zones-647"><a href="#IDFcreator.create_thermal_zones-647"><span class="linenos">647</span></a>        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="IDFcreator.create_thermal_zones-648"><a href="#IDFcreator.create_thermal_zones-648"><span class="linenos">648</span></a>
</span><span id="IDFcreator.create_thermal_zones-649"><a href="#IDFcreator.create_thermal_zones-649"><span class="linenos">649</span></a>        <span class="c1"># Polygons with zones converted to thermal zones based on floor number</span>
</span><span id="IDFcreator.create_thermal_zones-650"><a href="#IDFcreator.create_thermal_zones-650"><span class="linenos">650</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">zones_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;shading&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="kc">False</span><span class="p">]</span>
</span><span id="IDFcreator.create_thermal_zones-651"><a href="#IDFcreator.create_thermal_zones-651"><span class="linenos">651</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">zones_df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">ialgs</span><span class="o">.</span><span class="n">_thermal_zones</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">idf</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">origin</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">min_avail_width_for_window</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">min_avail_height</span><span class="p">,),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="IDFcreator.create_thermal_zones-652"><a href="#IDFcreator.create_thermal_zones-652"><span class="linenos">652</span></a>
</span><span id="IDFcreator.create_thermal_zones-653"><a href="#IDFcreator.create_thermal_zones-653"><span class="linenos">653</span></a>        <span class="c1"># Extract names of thermal zones:</span>
</span><span id="IDFcreator.create_thermal_zones-654"><a href="#IDFcreator.create_thermal_zones-654"><span class="linenos">654</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">zones</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">idf</span><span class="o">.</span><span class="n">idfobjects</span><span class="p">[</span><span class="s1">&#39;ZONE&#39;</span><span class="p">]</span>
</span><span id="IDFcreator.create_thermal_zones-655"><a href="#IDFcreator.create_thermal_zones-655"><span class="linenos">655</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">zone_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
</span><span id="IDFcreator.create_thermal_zones-656"><a href="#IDFcreator.create_thermal_zones-656"><span class="linenos">656</span></a>        <span class="k">for</span> <span class="n">zone</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">zones</span><span class="p">:</span>
</span><span id="IDFcreator.create_thermal_zones-657"><a href="#IDFcreator.create_thermal_zones-657"><span class="linenos">657</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">zone_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">zone</span><span class="o">.</span><span class="n">Name</span><span class="p">)</span>
</span><span id="IDFcreator.create_thermal_zones-658"><a href="#IDFcreator.create_thermal_zones-658"><span class="linenos">658</span></a>
</span><span id="IDFcreator.create_thermal_zones-659"><a href="#IDFcreator.create_thermal_zones-659"><span class="linenos">659</span></a>        <span class="c1"># Create a &#39;Dwell&#39; zone list with all thermal zones. &quot;Dwell&quot; apears</span>
</span><span id="IDFcreator.create_thermal_zones-660"><a href="#IDFcreator.create_thermal_zones-660"><span class="linenos">660</span></a>        <span class="c1"># in all objects which reffer to all zones (thermostat, people, etc.)</span>
</span><span id="IDFcreator.create_thermal_zones-661"><a href="#IDFcreator.create_thermal_zones-661"><span class="linenos">661</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">idf</span><span class="o">.</span><span class="n">newidfobject</span><span class="p">(</span><span class="s1">&#39;ZONELIST&#39;</span><span class="p">,</span> <span class="n">Name</span><span class="o">=</span><span class="s1">&#39;Dwell&#39;</span><span class="p">)</span>
</span><span id="IDFcreator.create_thermal_zones-662"><a href="#IDFcreator.create_thermal_zones-662"><span class="linenos">662</span></a>        <span class="n">objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">idf</span><span class="o">.</span><span class="n">idfobjects</span><span class="p">[</span><span class="s1">&#39;ZONELIST&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="IDFcreator.create_thermal_zones-663"><a href="#IDFcreator.create_thermal_zones-663"><span class="linenos">663</span></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">zone</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">zone_names</span><span class="p">):</span>
</span><span id="IDFcreator.create_thermal_zones-664"><a href="#IDFcreator.create_thermal_zones-664"><span class="linenos">664</span></a>            <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;objects.Zone_</span><span class="si">%s</span><span class="s1">_Name = zone&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
</span></pre></div>


    

                            </div>
                            <div id="IDFcreator.create_load_systems" class="classattr">
                                        <input id="IDFcreator.create_load_systems-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">create_load_systems</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="IDFcreator.create_load_systems-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDFcreator.create_load_systems"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDFcreator.create_load_systems-667"><a href="#IDFcreator.create_load_systems-667"><span class="linenos">667</span></a>    <span class="k">def</span> <span class="nf">create_load_systems</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="IDFcreator.create_load_systems-668"><a href="#IDFcreator.create_load_systems-668"><span class="linenos">668</span></a>        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="IDFcreator.create_load_systems-669"><a href="#IDFcreator.create_load_systems-669"><span class="linenos">669</span></a>        <span class="c1"># Ideal loads system</span>
</span><span id="IDFcreator.create_load_systems-670"><a href="#IDFcreator.create_load_systems-670"><span class="linenos">670</span></a>
</span><span id="IDFcreator.create_load_systems-671"><a href="#IDFcreator.create_load_systems-671"><span class="linenos">671</span></a>        <span class="k">for</span> <span class="n">zone</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">zone_names</span><span class="p">:</span>
</span><span id="IDFcreator.create_load_systems-672"><a href="#IDFcreator.create_load_systems-672"><span class="linenos">672</span></a>            <span class="n">system_name</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">_HVAC&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">zone</span><span class="p">)</span>
</span><span id="IDFcreator.create_load_systems-673"><a href="#IDFcreator.create_load_systems-673"><span class="linenos">673</span></a>            <span class="n">eq_name</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">_Eq&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">zone</span><span class="p">)</span>
</span><span id="IDFcreator.create_load_systems-674"><a href="#IDFcreator.create_load_systems-674"><span class="linenos">674</span></a>            <span class="n">supp_air_node</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">_supply&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">zone</span><span class="p">)</span>
</span><span id="IDFcreator.create_load_systems-675"><a href="#IDFcreator.create_load_systems-675"><span class="linenos">675</span></a>            <span class="n">air_node</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">_air_node&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">zone</span><span class="p">)</span>
</span><span id="IDFcreator.create_load_systems-676"><a href="#IDFcreator.create_load_systems-676"><span class="linenos">676</span></a>            <span class="n">ret_air_node</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">_return&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">zone</span><span class="p">)</span>
</span><span id="IDFcreator.create_load_systems-677"><a href="#IDFcreator.create_load_systems-677"><span class="linenos">677</span></a>
</span><span id="IDFcreator.create_load_systems-678"><a href="#IDFcreator.create_load_systems-678"><span class="linenos">678</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">idf</span><span class="o">.</span><span class="n">newidfobject</span><span class="p">(</span><span class="s1">&#39;ZONEHVAC:IDEALLOADSAIRSYSTEM&#39;</span><span class="p">,</span>
</span><span id="IDFcreator.create_load_systems-679"><a href="#IDFcreator.create_load_systems-679"><span class="linenos">679</span></a>                                <span class="n">Name</span><span class="o">=</span><span class="n">system_name</span><span class="p">,</span>
</span><span id="IDFcreator.create_load_systems-680"><a href="#IDFcreator.create_load_systems-680"><span class="linenos">680</span></a>                                <span class="n">Zone_Supply_Air_Node_Name</span><span class="o">=</span><span class="n">supp_air_node</span><span class="p">,</span>
</span><span id="IDFcreator.create_load_systems-681"><a href="#IDFcreator.create_load_systems-681"><span class="linenos">681</span></a>                                <span class="n">Dehumidification_Control_Type</span><span class="o">=</span><span class="s1">&#39;None&#39;</span><span class="p">)</span>
</span><span id="IDFcreator.create_load_systems-682"><a href="#IDFcreator.create_load_systems-682"><span class="linenos">682</span></a>
</span><span id="IDFcreator.create_load_systems-683"><a href="#IDFcreator.create_load_systems-683"><span class="linenos">683</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">idf</span><span class="o">.</span><span class="n">newidfobject</span><span class="p">(</span><span class="s1">&#39;ZONEHVAC:EQUIPMENTLIST&#39;</span><span class="p">,</span>
</span><span id="IDFcreator.create_load_systems-684"><a href="#IDFcreator.create_load_systems-684"><span class="linenos">684</span></a>                                <span class="n">Name</span><span class="o">=</span><span class="n">eq_name</span><span class="p">,</span>
</span><span id="IDFcreator.create_load_systems-685"><a href="#IDFcreator.create_load_systems-685"><span class="linenos">685</span></a>                                <span class="n">Zone_Equipment_1_Object_Type</span><span class="o">=</span><span class="s1">&#39;ZONEHVAC:IDEALLOADSAIRSYSTEM&#39;</span><span class="p">,</span>
</span><span id="IDFcreator.create_load_systems-686"><a href="#IDFcreator.create_load_systems-686"><span class="linenos">686</span></a>                                <span class="n">Zone_Equipment_1_Name</span><span class="o">=</span><span class="n">system_name</span><span class="p">,</span>
</span><span id="IDFcreator.create_load_systems-687"><a href="#IDFcreator.create_load_systems-687"><span class="linenos">687</span></a>                                <span class="n">Zone_Equipment_1_Cooling_Sequence</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
</span><span id="IDFcreator.create_load_systems-688"><a href="#IDFcreator.create_load_systems-688"><span class="linenos">688</span></a>                                <span class="n">Zone_Equipment_1_Heating_or_NoLoad_Sequence</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="IDFcreator.create_load_systems-689"><a href="#IDFcreator.create_load_systems-689"><span class="linenos">689</span></a>
</span><span id="IDFcreator.create_load_systems-690"><a href="#IDFcreator.create_load_systems-690"><span class="linenos">690</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">idf</span><span class="o">.</span><span class="n">newidfobject</span><span class="p">(</span><span class="s1">&#39;ZONEHVAC:EQUIPMENTCONNECTIONS&#39;</span><span class="p">,</span>
</span><span id="IDFcreator.create_load_systems-691"><a href="#IDFcreator.create_load_systems-691"><span class="linenos">691</span></a>                                <span class="n">Zone_Name</span><span class="o">=</span><span class="n">zone</span><span class="p">,</span>
</span><span id="IDFcreator.create_load_systems-692"><a href="#IDFcreator.create_load_systems-692"><span class="linenos">692</span></a>                                <span class="n">Zone_Conditioning_Equipment_List_Name</span><span class="o">=</span><span class="n">eq_name</span><span class="p">,</span>
</span><span id="IDFcreator.create_load_systems-693"><a href="#IDFcreator.create_load_systems-693"><span class="linenos">693</span></a>                                <span class="n">Zone_Air_Inlet_Node_or_NodeList_Name</span><span class="o">=</span><span class="n">supp_air_node</span><span class="p">,</span>
</span><span id="IDFcreator.create_load_systems-694"><a href="#IDFcreator.create_load_systems-694"><span class="linenos">694</span></a>                                <span class="n">Zone_Air_Node_Name</span><span class="o">=</span><span class="n">air_node</span><span class="p">,</span>
</span><span id="IDFcreator.create_load_systems-695"><a href="#IDFcreator.create_load_systems-695"><span class="linenos">695</span></a>                                <span class="n">Zone_Return_Air_Node_or_NodeList_Name</span><span class="o">=</span><span class="n">ret_air_node</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="IDFcreator.save_to_file" class="classattr">
                                        <input id="IDFcreator.save_to_file-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">save_to_file</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">fname</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="IDFcreator.save_to_file-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDFcreator.save_to_file"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDFcreator.save_to_file-697"><a href="#IDFcreator.save_to_file-697"><span class="linenos">697</span></a>    <span class="k">def</span> <span class="nf">save_to_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fname</span> <span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="IDFcreator.save_to_file-698"><a href="#IDFcreator.save_to_file-698"><span class="linenos">698</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">idf</span><span class="o">.</span><span class="n">saveas</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="IDFcreator.create_idf_file" class="classattr">
                                        <input id="IDFcreator.create_idf_file-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">create_idf_file</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">fname</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="IDFcreator.create_idf_file-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IDFcreator.create_idf_file"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IDFcreator.create_idf_file-701"><a href="#IDFcreator.create_idf_file-701"><span class="linenos">701</span></a>    <span class="k">def</span> <span class="nf">create_idf_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fname</span> <span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="IDFcreator.create_idf_file-702"><a href="#IDFcreator.create_idf_file-702"><span class="linenos">702</span></a>        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="IDFcreator.create_idf_file-703"><a href="#IDFcreator.create_idf_file-703"><span class="linenos">703</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">move_towards_origin</span><span class="p">()</span>
</span><span id="IDFcreator.create_idf_file-704"><a href="#IDFcreator.create_idf_file-704"><span class="linenos">704</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">create_shading_objects</span><span class="p">()</span>
</span><span id="IDFcreator.create_idf_file-705"><a href="#IDFcreator.create_idf_file-705"><span class="linenos">705</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">create_thermal_zones</span><span class="p">()</span>
</span><span id="IDFcreator.create_idf_file-706"><a href="#IDFcreator.create_idf_file-706"><span class="linenos">706</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">create_load_systems</span><span class="p">()</span>
</span><span id="IDFcreator.create_idf_file-707"><a href="#IDFcreator.create_idf_file-707"><span class="linenos">707</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">save_to_file</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span> 
</span></pre></div>


    

                            </div>
                </section>
                <section id="create_idf">
                            <input id="create_idf-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">create_idf</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">sdf</span><span class="p">:</span> <span class="n"><a href="#SimstockDataframe">src.simstock.SimstockDataframe</a></span>, </span><span class="param"><span class="n">fname</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="create_idf-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#create_idf"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="create_idf-710"><a href="#create_idf-710"><span class="linenos">710</span></a><span class="k">def</span> <span class="nf">create_idf</span><span class="p">(</span><span class="n">sdf</span> <span class="p">:</span> <span class="n">SimstockDataframe</span><span class="p">,</span> <span class="n">fname</span> <span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="create_idf-711"><a href="#create_idf-711"><span class="linenos">711</span></a>    <span class="n">ob</span> <span class="o">=</span> <span class="n">IDFcreator</span><span class="p">(</span><span class="n">sdf</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="create_idf-712"><a href="#create_idf-712"><span class="linenos">712</span></a>    <span class="n">ob</span><span class="o">.</span><span class="n">create_idf_file</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
</span></pre></div>


    

                </section>
                <section id="plot">
                            <input id="plot-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">plot</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">sdf</span><span class="p">:</span> <span class="n"><a href="#SimstockDataframe">src.simstock.SimstockDataframe</a></span> <span class="o">|</span> <span class="n">pandas</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">series</span><span class="o">.</span><span class="n">Series</span> <span class="o">|</span> <span class="n">pandas</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">DataFrame</span>,</span><span class="param">	<span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="n">matplotlib</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">_axes</span><span class="o">.</span><span class="n">Axes</span>:</span></span>

                <label class="view-source-button" for="plot-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#plot"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="plot-25"><a href="#plot-25"><span class="linenos">25</span></a><span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="n">sdf</span> <span class="p">:</span> <span class="n">SimstockDataframe</span> <span class="o">|</span> <span class="n">Series</span> <span class="o">|</span> <span class="n">DataFrame</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Axes</span><span class="p">:</span>
</span><span id="plot-26"><a href="#plot-26"><span class="linenos">26</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="plot-27"><a href="#plot-27"><span class="linenos">27</span></a><span class="sd">    Plot a SimstockDataframe&#39;s geometric data.</span>
</span><span id="plot-28"><a href="#plot-28"><span class="linenos">28</span></a>
</span><span id="plot-29"><a href="#plot-29"><span class="linenos">29</span></a><span class="sd">    Parameters</span>
</span><span id="plot-30"><a href="#plot-30"><span class="linenos">30</span></a><span class="sd">    ----------</span>
</span><span id="plot-31"><a href="#plot-31"><span class="linenos">31</span></a><span class="sd">    ``sdf : SimstockDataframe or Pandas Series or Dataframe``</span>
</span><span id="plot-32"><a href="#plot-32"><span class="linenos">32</span></a><span class="sd">        The data to be plotted. One column must be called </span>
</span><span id="plot-33"><a href="#plot-33"><span class="linenos">33</span></a><span class="sd">        ``polygon`` and contain shapely geometries.</span>
</span><span id="plot-34"><a href="#plot-34"><span class="linenos">34</span></a>
</span><span id="plot-35"><a href="#plot-35"><span class="linenos">35</span></a><span class="sd">    ``**kwargs, optional``</span>
</span><span id="plot-36"><a href="#plot-36"><span class="linenos">36</span></a><span class="sd">        All additional keyword arguments to be passed to </span>
</span><span id="plot-37"><a href="#plot-37"><span class="linenos">37</span></a><span class="sd">        ``matplotlib``</span>
</span><span id="plot-38"><a href="#plot-38"><span class="linenos">38</span></a>
</span><span id="plot-39"><a href="#plot-39"><span class="linenos">39</span></a><span class="sd">    Returns</span>
</span><span id="plot-40"><a href="#plot-40"><span class="linenos">40</span></a><span class="sd">    -------</span>
</span><span id="plot-41"><a href="#plot-41"><span class="linenos">41</span></a><span class="sd">    ``ax : matplotlib Axes``</span>
</span><span id="plot-42"><a href="#plot-42"><span class="linenos">42</span></a><span class="sd">        Matplotlib axis object instance containing </span>
</span><span id="plot-43"><a href="#plot-43"><span class="linenos">43</span></a><span class="sd">        the plotted geometric data</span>
</span><span id="plot-44"><a href="#plot-44"><span class="linenos">44</span></a>
</span><span id="plot-45"><a href="#plot-45"><span class="linenos">45</span></a><span class="sd">    Examples</span>
</span><span id="plot-46"><a href="#plot-46"><span class="linenos">46</span></a><span class="sd">    --------</span>
</span><span id="plot-47"><a href="#plot-47"><span class="linenos">47</span></a><span class="sd">    ### Basic usage</span>
</span><span id="plot-48"><a href="#plot-48"><span class="linenos">48</span></a>
</span><span id="plot-49"><a href="#plot-49"><span class="linenos">49</span></a><span class="sd">    ```python</span>
</span><span id="plot-50"><a href="#plot-50"><span class="linenos">50</span></a><span class="sd">    import matplotlib.pyplot as plt</span>
</span><span id="plot-51"><a href="#plot-51"><span class="linenos">51</span></a><span class="sd">    import simstock as sim</span>
</span><span id="plot-52"><a href="#plot-52"><span class="linenos">52</span></a>
</span><span id="plot-53"><a href="#plot-53"><span class="linenos">53</span></a><span class="sd">    # Create test simstockdataframe</span>
</span><span id="plot-54"><a href="#plot-54"><span class="linenos">54</span></a><span class="sd">    sdf = sim.read_csv(&quot;testdata.csv&quot;)</span>
</span><span id="plot-55"><a href="#plot-55"><span class="linenos">55</span></a>
</span><span id="plot-56"><a href="#plot-56"><span class="linenos">56</span></a><span class="sd">    # Plot</span>
</span><span id="plot-57"><a href="#plot-57"><span class="linenos">57</span></a><span class="sd">    sim.plot(sdf, facecolor=&quot;lightblue&quot;, edgecolor=&quot;red&quot;)</span>
</span><span id="plot-58"><a href="#plot-58"><span class="linenos">58</span></a><span class="sd">    plt.show()</span>
</span><span id="plot-59"><a href="#plot-59"><span class="linenos">59</span></a><span class="sd">    ```</span>
</span><span id="plot-60"><a href="#plot-60"><span class="linenos">60</span></a>
</span><span id="plot-61"><a href="#plot-61"><span class="linenos">61</span></a><span class="sd">    ### More advanced usage</span>
</span><span id="plot-62"><a href="#plot-62"><span class="linenos">62</span></a>
</span><span id="plot-63"><a href="#plot-63"><span class="linenos">63</span></a><span class="sd">    ```python</span>
</span><span id="plot-64"><a href="#plot-64"><span class="linenos">64</span></a><span class="sd">    import matplotlib.pyplot as plt</span>
</span><span id="plot-65"><a href="#plot-65"><span class="linenos">65</span></a><span class="sd">    import simstock as sim</span>
</span><span id="plot-66"><a href="#plot-66"><span class="linenos">66</span></a>
</span><span id="plot-67"><a href="#plot-67"><span class="linenos">67</span></a><span class="sd">    # Create test simstockdataframe</span>
</span><span id="plot-68"><a href="#plot-68"><span class="linenos">68</span></a><span class="sd">    sdf = sim.read_csv(&quot;testdata.csv&quot;)</span>
</span><span id="plot-69"><a href="#plot-69"><span class="linenos">69</span></a>
</span><span id="plot-70"><a href="#plot-70"><span class="linenos">70</span></a><span class="sd">    # Create matplotlib figure and axis</span>
</span><span id="plot-71"><a href="#plot-71"><span class="linenos">71</span></a><span class="sd">    fig = plt.figure()</span>
</span><span id="plot-72"><a href="#plot-72"><span class="linenos">72</span></a><span class="sd">    ax = fig.add_subplot(111)</span>
</span><span id="plot-73"><a href="#plot-73"><span class="linenos">73</span></a>
</span><span id="plot-74"><a href="#plot-74"><span class="linenos">74</span></a><span class="sd">    # Plot to the existing axis</span>
</span><span id="plot-75"><a href="#plot-75"><span class="linenos">75</span></a><span class="sd">    sim.plot(</span>
</span><span id="plot-76"><a href="#plot-76"><span class="linenos">76</span></a><span class="sd">        sdf,</span>
</span><span id="plot-77"><a href="#plot-77"><span class="linenos">77</span></a><span class="sd">        facecolor=&quot;lightblue&quot;,</span>
</span><span id="plot-78"><a href="#plot-78"><span class="linenos">78</span></a><span class="sd">        edgecolor=&quot;red&quot;,</span>
</span><span id="plot-79"><a href="#plot-79"><span class="linenos">79</span></a><span class="sd">        ax=ax)</span>
</span><span id="plot-80"><a href="#plot-80"><span class="linenos">80</span></a>
</span><span id="plot-81"><a href="#plot-81"><span class="linenos">81</span></a><span class="sd">    # Set some ttributes</span>
</span><span id="plot-82"><a href="#plot-82"><span class="linenos">82</span></a><span class="sd">    ax.title(&quot;Test Plot&quot;)</span>
</span><span id="plot-83"><a href="#plot-83"><span class="linenos">83</span></a><span class="sd">    ax.set_xticks([])</span>
</span><span id="plot-84"><a href="#plot-84"><span class="linenos">84</span></a><span class="sd">    ax.set_yticks([])</span>
</span><span id="plot-85"><a href="#plot-85"><span class="linenos">85</span></a>
</span><span id="plot-86"><a href="#plot-86"><span class="linenos">86</span></a><span class="sd">    # Display plot</span>
</span><span id="plot-87"><a href="#plot-87"><span class="linenos">87</span></a><span class="sd">    plt.show()</span>
</span><span id="plot-88"><a href="#plot-88"><span class="linenos">88</span></a><span class="sd">    ```</span>
</span><span id="plot-89"><a href="#plot-89"><span class="linenos">89</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="plot-90"><a href="#plot-90"><span class="linenos">90</span></a>
</span><span id="plot-91"><a href="#plot-91"><span class="linenos">91</span></a>    <span class="c1"># Select the polygon data and feed into the</span>
</span><span id="plot-92"><a href="#plot-92"><span class="linenos">92</span></a>    <span class="c1"># plotting function</span>
</span><span id="plot-93"><a href="#plot-93"><span class="linenos">93</span></a>    <span class="k">return</span> <span class="n">_plot_geometries</span><span class="p">(</span><span class="n">sdf</span><span class="o">.</span><span class="n">polygon</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Plot a SimstockDataframe's geometric data.</p>

<h2 id="parameters">Parameters</h2>

<p><code>sdf : SimstockDataframe or Pandas Series or Dataframe</code>
    The data to be plotted. One column must be called 
    <code>polygon</code> and contain shapely geometries.</p>

<p><code>**kwargs, optional</code>
    All additional keyword arguments to be passed to 
    <code>matplotlib</code></p>

<h2 id="returns">Returns</h2>

<p><code>ax : matplotlib Axes</code>
    Matplotlib axis object instance containing 
    the plotted geometric data</p>

<h2 id="examples">Examples</h2>

<h3 id="basic-usage">Basic usage</h3>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">simstock</span> <span class="k">as</span> <span class="nn">sim</span>

<span class="c1"># Create test simstockdataframe</span>
<span class="n">sdf</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;testdata.csv&quot;</span><span class="p">)</span>

<span class="c1"># Plot</span>
<span class="n">sim</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">sdf</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s2">&quot;lightblue&quot;</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre>
</div>

<h3 id="more-advanced-usage">More advanced usage</h3>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">simstock</span> <span class="k">as</span> <span class="nn">sim</span>

<span class="c1"># Create test simstockdataframe</span>
<span class="n">sdf</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;testdata.csv&quot;</span><span class="p">)</span>

<span class="c1"># Create matplotlib figure and axis</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>

<span class="c1"># Plot to the existing axis</span>
<span class="n">sim</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
    <span class="n">sdf</span><span class="p">,</span>
    <span class="n">facecolor</span><span class="o">=</span><span class="s2">&quot;lightblue&quot;</span><span class="p">,</span>
    <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span>
    <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>

<span class="c1"># Set some ttributes</span>
<span class="n">ax</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Test Plot&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">([])</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">([])</span>

<span class="c1"># Display plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre>
</div>
</div>


                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>